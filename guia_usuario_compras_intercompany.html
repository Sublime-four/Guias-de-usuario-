<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guia Funcional - Automatizacion Compras Intercompania | COONDEV</title>
    <style>
        :root {
            --primary: #7B5B7B;
            --primary-dark: #5E3F5E;
            --primary-light: #9B7B9B;
            --secondary: #4A2D4A;
            --accent: #C9A0C9;
            --dark: #2E1A2E;
            --gray-100: #f8f7f9;
            --gray-200: #eae7ec;
            --gray-300: #ddd8df;
            --gray-400: #c4bdc7;
            --gray-500: #9e95a1;
            --gray-600: #6c636f;
            --gray-700: #4a434d;
            --gray-800: #342e37;
            --white: #ffffff;
            --success: #5a9e6f;
            --warning: #c9a84c;
            --danger: #b5545a;
            --info: #6b8fa8;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; line-height: 1.7; color: var(--gray-800); background: var(--gray-100); }

        .header { background: linear-gradient(135deg, var(--secondary) 0%, var(--primary) 50%, var(--primary-light) 100%); color: var(--white); position: sticky; top: 0; z-index: 1000; box-shadow: 0 4px 20px rgba(75,45,75,0.25); }
        .header-top { display: flex; align-items: center; justify-content: space-between; padding: 15px 40px; max-width: 1400px; margin: 0 auto; }
        .logo-area { display: flex; align-items: center; gap: 20px; }
        .logo-area svg { height: 48px; width: auto; }
        .header-badge { background: rgba(255,255,255,0.15); border: 1px solid rgba(255,255,255,0.3); padding: 6px 16px; border-radius: 20px; font-size: 12px; letter-spacing: 1px; }

        .hero { background: linear-gradient(135deg, var(--secondary) 0%, var(--primary) 40%, var(--primary-light) 100%); color: var(--white); padding: 60px 40px; text-align: center; position: relative; overflow: hidden; }
        .hero::before { content: ''; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%; background: radial-gradient(circle, rgba(255,255,255,0.06) 0%, transparent 60%); animation: pulse 8s ease-in-out infinite; }
        @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.1); } }
        .hero-content { position: relative; z-index: 1; max-width: 900px; margin: 0 auto; }
        .hero h1 { font-size: 38px; font-weight: 800; margin-bottom: 15px; text-shadow: 0 2px 10px rgba(0,0,0,0.2); }
        .hero .version-badge { display: inline-block; background: rgba(255,255,255,0.2); border: 1px solid rgba(255,255,255,0.3); padding: 4px 14px; border-radius: 15px; font-size: 13px; margin-bottom: 20px; }
        .hero p { font-size: 18px; opacity: 0.9; max-width: 700px; margin: 0 auto; }
        .hero-meta { display: flex; justify-content: center; gap: 20px; margin-top: 30px; flex-wrap: wrap; }
        .hero-meta-item { background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); padding: 10px 20px; border-radius: 10px; font-size: 13px; }
        .hero-meta-item strong { display: block; font-size: 11px; text-transform: uppercase; letter-spacing: 1px; opacity: 0.7; margin-bottom: 2px; }

        .nav-bar { background: var(--white); border-bottom: 2px solid var(--gray-200); padding: 0 40px; position: sticky; top: 78px; z-index: 999; box-shadow: 0 2px 10px rgba(0,0,0,0.05); }
        .nav-bar ul { list-style: none; display: flex; max-width: 1400px; margin: 0 auto; overflow-x: auto; }
        .nav-bar ul li a { display: block; padding: 14px 20px; color: var(--gray-600); text-decoration: none; font-size: 13px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; border-bottom: 3px solid transparent; transition: all 0.3s; white-space: nowrap; }
        .nav-bar ul li a:hover { color: var(--primary); border-bottom-color: var(--primary); background: rgba(123,91,123,0.06); }

        .main-content { max-width: 1200px; margin: 0 auto; padding: 40px; }
        .section { background: var(--white); border-radius: 16px; padding: 40px; margin-bottom: 30px; box-shadow: 0 2px 20px rgba(75,45,75,0.06); border: 1px solid var(--gray-200); }
        .section-header { display: flex; align-items: center; gap: 15px; margin-bottom: 30px; padding-bottom: 20px; border-bottom: 2px solid var(--gray-200); }
        .section-icon { width: 50px; height: 50px; border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 24px; flex-shrink: 0; }
        .section-icon.mauve { background: linear-gradient(135deg, var(--primary-light), var(--primary)); color: white; }
        .section-icon.deep { background: linear-gradient(135deg, var(--primary), var(--secondary)); color: white; }
        .section-icon.warm { background: linear-gradient(135deg, #c9a84c, #b8943e); color: white; }
        .section-icon.plum { background: linear-gradient(135deg, #8e6b8e, #6b3f6b); color: white; }
        .section-icon.sage { background: linear-gradient(135deg, #7ba88e, #5a9e6f); color: white; }
        .section-icon.soft { background: linear-gradient(135deg, var(--accent), var(--primary-light)); color: white; }
        .section-header h2 { font-size: 24px; color: var(--secondary); font-weight: 700; }
        .section-header h2 small { display: block; font-size: 12px; color: var(--gray-500); font-weight: 400; text-transform: uppercase; letter-spacing: 2px; margin-top: 4px; }
        .section p { margin-bottom: 15px; color: var(--gray-700); }

        .highlight-box { background: linear-gradient(135deg, #f5eef5, #faf5fa); border-left: 4px solid var(--primary); padding: 15px 20px; border-radius: 0 10px 10px 0; margin: 20px 0; }
        .highlight-box.info { background: linear-gradient(135deg, #eee8f0, #f5eff7); border-left-color: var(--info); }
        .highlight-box.success { background: linear-gradient(135deg, #e8f0eb, #eff5f1); border-left-color: var(--success); }
        .highlight-box.danger { background: linear-gradient(135deg, #f0e8e9, #f7eff0); border-left-color: var(--danger); }
        .highlight-box strong { display: block; margin-bottom: 5px; color: var(--gray-800); }

        .feature-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin: 20px 0; }
        .feature-card { background: var(--gray-100); border: 1px solid var(--gray-200); border-radius: 12px; padding: 25px; transition: all 0.3s; }
        .feature-card:hover { transform: translateY(-3px); box-shadow: 0 8px 25px rgba(75,45,75,0.12); border-color: var(--primary); }
        .feature-card .icon { font-size: 28px; margin-bottom: 12px; }
        .feature-card h4 { color: var(--secondary); margin-bottom: 8px; font-size: 16px; }
        .feature-card p { font-size: 13px; color: var(--gray-600); margin-bottom: 0; }

        .vflow { position: relative; padding-left: 60px; margin: 30px 0; }
        .vflow::before { content: ''; position: absolute; left: 28px; top: 0; bottom: 0; width: 3px; background: linear-gradient(to bottom, var(--primary), var(--secondary), var(--accent)); border-radius: 2px; }
        .vflow-step { position: relative; margin-bottom: 25px; padding: 20px; background: var(--gray-100); border-radius: 12px; border: 1px solid var(--gray-200); }
        .vflow-step::before { content: attr(data-step); position: absolute; left: -48px; top: 20px; width: 36px; height: 36px; border-radius: 50%; background: var(--primary); color: white; display: flex; align-items: center; justify-content: center; font-weight: 800; font-size: 14px; box-shadow: 0 3px 10px rgba(123,91,123,0.35); z-index: 2; }
        .vflow-step h4 { color: var(--secondary); margin-bottom: 8px; font-size: 16px; }
        .vflow-step p { font-size: 14px; color: var(--gray-600); margin-bottom: 0; }

        .table-responsive { overflow-x: auto; margin: 20px 0; }
        table { width: 100%; border-collapse: collapse; font-size: 14px; }
        table thead th { background: var(--secondary); color: var(--white); padding: 12px 16px; text-align: left; font-weight: 600; font-size: 12px; text-transform: uppercase; letter-spacing: 0.5px; }
        table thead th:first-child { border-radius: 10px 0 0 0; }
        table thead th:last-child { border-radius: 0 10px 0 0; }
        table tbody td { padding: 12px 16px; border-bottom: 1px solid var(--gray-200); }
        table tbody tr:hover { background: var(--gray-100); }
        table tbody tr:last-child td:first-child { border-radius: 0 0 0 10px; }
        table tbody tr:last-child td:last-child { border-radius: 0 0 10px 0; }

        .badge { display: inline-block; padding: 4px 10px; border-radius: 6px; font-size: 11px; font-weight: 700; text-transform: uppercase; letter-spacing: 0.5px; }
        .badge-complete { background: #dce8e0; color: #2a5a3a; }
        .badge-partial { background: #f0e8d4; color: #7a6530; }
        .badge-pending { background: #f0dfe0; color: #7a3035; }
        .badge-info { background: #dce8ef; color: #3a5f75; }
        .badge-locked { background: #f0e8d4; color: #7a6530; }
        .badge-ic { background: #e5dae5; color: #5E3F5E; }

        .eco-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin: 25px 0; }
        .eco-card { border: 2px solid var(--gray-300); border-radius: 16px; padding: 25px; text-align: center; transition: all 0.3s; }
        .eco-card:hover { border-color: var(--primary); box-shadow: 0 8px 25px rgba(75,45,75,0.12); }
        .eco-card h4 { color: var(--secondary); margin-bottom: 8px; font-size: 15px; }
        .eco-card .eco-icon { font-size: 36px; margin-bottom: 12px; }
        .eco-card p { font-size: 12px; color: var(--gray-600); margin-bottom: 0; }
        .eco-card.price { border-color: var(--info); background: linear-gradient(135deg, #f0f5f8, #e8eff3); }
        .eco-card.tracking { border-color: var(--primary); background: linear-gradient(135deg, #f5eef5, #ede4ed); }
        .eco-card.notif { border-color: var(--warning); background: linear-gradient(135deg, #f8f4e8, #f5f0dd); }

        .flow-horizontal { display: flex; align-items: center; justify-content: center; gap: 0; margin: 30px 0; flex-wrap: nowrap; overflow-x: auto; padding: 15px 0; }
        .flow-box { min-width: 160px; padding: 18px; border-radius: 12px; text-align: center; font-size: 13px; font-weight: 600; color: white; flex-shrink: 0; }
        .flow-box.co-a { background: linear-gradient(135deg, var(--info), #4a7a95); }
        .flow-box.process { background: linear-gradient(135deg, var(--primary), var(--secondary)); }
        .flow-box.co-b { background: linear-gradient(135deg, var(--success), #4a8e5f); }
        .flow-box.alert { background: linear-gradient(135deg, var(--warning), #b89a3e); }
        .flow-box.return { background: linear-gradient(135deg, var(--danger), #a5444a); }
        .flow-arrow { font-size: 24px; color: var(--gray-400); margin: 0 5px; flex-shrink: 0; }
        .flow-box small { display: block; font-weight: 400; font-size: 11px; margin-top: 4px; opacity: 0.9; }

        .faq-item { border: 1px solid var(--gray-200); border-radius: 12px; margin-bottom: 12px; overflow: hidden; transition: all 0.3s; }
        .faq-item:hover { border-color: var(--primary); box-shadow: 0 4px 15px rgba(123,91,123,0.12); }
        .faq-question { padding: 18px 20px; background: var(--gray-100); font-weight: 700; color: var(--secondary); display: flex; align-items: center; gap: 12px; }
        .faq-question .q-marker { background: var(--primary); color: white; width: 28px; height: 28px; border-radius: 8px; display: flex; align-items: center; justify-content: center; font-size: 14px; font-weight: 800; flex-shrink: 0; }
        .faq-answer { padding: 18px 20px; padding-left: 60px; color: var(--gray-700); font-size: 14px; border-top: 1px solid var(--gray-200); }

        .group-card { display: flex; align-items: flex-start; gap: 15px; padding: 20px; background: var(--gray-100); border-radius: 12px; margin: 10px 0; }
        .group-icon { width: 44px; height: 44px; border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 20px; flex-shrink: 0; }
        .group-icon.user { background: linear-gradient(135deg, var(--primary-light), var(--primary)); color: white; }
        .group-icon.admin { background: linear-gradient(135deg, var(--primary-dark), var(--secondary)); color: white; }
        .group-icon.price { background: linear-gradient(135deg, var(--info), #4a7a95); color: white; }

        .footer { background: var(--dark); color: var(--gray-500); padding: 40px; text-align: center; }
        .footer .company-name { font-size: 22px; font-weight: 800; color: var(--white); letter-spacing: 3px; margin-bottom: 5px; }
        .footer .tagline { font-size: 12px; letter-spacing: 2px; text-transform: uppercase; margin-bottom: 20px; }
        .footer-divider { width: 60px; height: 3px; background: var(--primary); margin: 20px auto; border-radius: 2px; }
        .footer p { font-size: 13px; margin-bottom: 5px; }

        @media (max-width: 768px) {
            .header-top { padding: 10px 20px; } .hero { padding: 30px 20px; } .hero h1 { font-size: 26px; }
            .nav-bar { padding: 0 15px; } .main-content { padding: 20px; } .section { padding: 25px; }
            .eco-grid { grid-template-columns: 1fr; } .flow-horizontal { flex-direction: column; }
        }
        @media print { .header, .nav-bar { position: static; } .section { break-inside: avoid; box-shadow: none; border: 1px solid #ddd; } }
    </style>
</head>
<body>

<!-- HEADER -->
<div class="header">
    <div class="header-top">
        <div class="logo-area">
            <svg viewBox="0 0 240 48" xmlns="http://www.w3.org/2000/svg">
                <defs><linearGradient id="logoGrad" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#9B7B9B"/><stop offset="100%" style="stop-color:#C9A0C9"/></linearGradient></defs>
                <rect x="0" y="4" width="40" height="40" rx="10" fill="url(#logoGrad)"/>
                <text x="20" y="32" font-family="Arial,sans-serif" font-size="26" font-weight="800" fill="white" text-anchor="middle">C</text>
                <text x="52" y="22" font-family="Arial,sans-serif" font-size="18" font-weight="800" fill="white" letter-spacing="2">COONDEV</text>
                <text x="52" y="38" font-family="Arial,sans-serif" font-size="8" fill="rgba(255,255,255,0.8)" letter-spacing="2">COONSULTING &amp; DEVELOPMENT</text>
            </svg>
        </div>
        <div class="header-badge">GUIA FUNCIONAL v1.0</div>
    </div>
</div>

<!-- HERO -->
<div class="hero">
    <div class="hero-content">
        <div class="version-badge">Odoo 18 Enterprise &bull; Ecosistema de 3 Modulos</div>
        <h1>Automatizacion de Compras Intercompania</h1>
        <p>Ecosistema completo para la gestion automatizada de precios, seguimiento de entregas y deteccion de diferencias en operaciones de compra entre companias del grupo empresarial.</p>
        <div class="hero-meta">
            <div class="hero-meta-item"><strong>Ecosistema</strong>3 Modulos Integrados</div>
            <div class="hero-meta-item"><strong>Categoria</strong>Compras / Inventario</div>
            <div class="hero-meta-item"><strong>Autor</strong>Coondev</div>
            <div class="hero-meta-item"><strong>Licencia</strong>LGPL-3</div>
        </div>
    </div>
</div>

<!-- NAVIGATION -->
<div class="nav-bar">
    <ul>
        <li><a href="#introduccion">Introduccion</a></li>
        <li><a href="#flujos">Flujos de Trabajo</a></li>
        <li><a href="#parametros">Parametros</a></li>
        <li><a href="#guia-paso-a-paso">Guia Paso a Paso</a></li>
        <li><a href="#estados">Estados</a></li>
        <li><a href="#trazabilidad">Trazabilidad</a></li>
        <li><a href="#reportes">Reportes</a></li>
        <li><a href="#faq">Preguntas y Respuestas</a></li>
    </ul>
</div>

<!-- MAIN CONTENT -->
<div class="main-content">

    <!-- 1. INTRODUCCION -->
    <div class="section" id="introduccion">
        <div class="section-header">
            <div class="section-icon mauve">&#127981;</div>
            <h2>1. Introduccion <small>Vision general del ecosistema</small></h2>
        </div>

        <p>La <strong>Automatizacion de Compras Intercompania</strong> es un ecosistema de tres modulos integrados que resuelve las necesidades operativas de compras entre companias del mismo grupo empresarial en Odoo 18. Cubre desde la asignacion automatica de precios hasta la deteccion de diferencias en cantidades recibidas y la generacion automatica de devoluciones.</p>

        <div class="highlight-box info">
            <strong>&#9432; Que resuelve este ecosistema?</strong>
            En operaciones intercompania, el precio de compra debe reflejar el costo real del producto en la compania vendedora, no un precio de lista. Ademas, al recibir mercancia entre bodegas de distintas companias, pueden ocurrir diferencias entre lo despachado y lo recibido. Este ecosistema automatiza la asignacion de precios correctos, el seguimiento en tiempo real de las entregas y la creacion de notificaciones y devoluciones automaticas cuando se detectan diferencias.
        </div>

        <h3 style="margin: 25px 0 15px; color: var(--secondary);">Ecosistema de Modulos</h3>
        <div class="eco-grid">
            <div class="eco-card price">
                <div class="eco-icon">&#128176;</div>
                <h4>Precio Intercompania</h4>
                <p>Asigna automaticamente el costo del producto de la compania vendedora como precio de la orden de compra. Bloquea la edicion del precio para usuarios sin permiso.</p>
            </div>
            <div class="eco-card tracking">
                <div class="eco-icon">&#128202;</div>
                <h4>Seguimiento de Backorders</h4>
                <p>Panel visual con barras de progreso que muestra cantidades pedidas, recibidas/despachadas y pendientes. Vincula ordenes de compra con ordenes de venta entre companias.</p>
            </div>
            <div class="eco-card notif">
                <div class="eco-icon">&#128276;</div>
                <h4>Notificaciones y Devoluciones</h4>
                <p>Detecta diferencias entre lo despachado y lo recibido. Envia notificaciones a ambas companias y genera devoluciones automaticas por la diferencia.</p>
            </div>
        </div>

        <h3 style="margin: 25px 0 15px; color: var(--secondary);">Capacidades Principales</h3>
        <div class="feature-grid">
            <div class="feature-card">
                <div class="icon">&#128176;</div>
                <h4>Precio Automatico desde Costo Real</h4>
                <p>El precio de la orden de compra se toma directamente del costo del producto en la compania vendedora, no de listas de precios o informacion de proveedores.</p>
            </div>
            <div class="feature-card">
                <div class="icon">&#128274;</div>
                <h4>Control de Edicion de Precios</h4>
                <p>Rol especifico de "Gestor de Precios Intercompania" que controla quien puede modificar precios en compras intercompania. Sin este rol, el precio es de solo lectura.</p>
            </div>
            <div class="feature-card">
                <div class="icon">&#128260;</div>
                <h4>Vinculacion Automatica OC-OV</h4>
                <p>Enlace automatico entre la Orden de Compra y la Orden de Venta generada en la otra compania, con botones inteligentes para navegar entre ambas.</p>
            </div>
            <div class="feature-card">
                <div class="icon">&#128200;</div>
                <h4>Barras de Progreso en Tiempo Real</h4>
                <p>Panel visual dentro de cada orden que muestra el porcentaje de avance de la recepcion (OC) o despacho (OV), con detalle linea por linea.</p>
            </div>
            <div class="feature-card">
                <div class="icon">&#128276;</div>
                <h4>Notificaciones de Diferencias</h4>
                <p>Al validar una recepcion, si las cantidades recibidas difieren de las despachadas, se notifica automaticamente a los responsables de compras y ventas.</p>
            </div>
            <div class="feature-card">
                <div class="icon">&#128259;</div>
                <h4>Devoluciones Automaticas</h4>
                <p>Cuando se detecta una diferencia, se genera automaticamente un movimiento de devolucion en ambas companias por la cantidad faltante.</p>
            </div>
        </div>

        <h3 style="margin: 25px 0 15px; color: var(--secondary);">Dependencias del Ecosistema</h3>
        <div class="table-responsive">
            <table>
                <thead><tr><th>Modulo Requerido</th><th>Descripcion</th><th>Usado Por</th></tr></thead>
                <tbody>
                    <tr><td><strong>Compras</strong></td><td>Gestion de ordenes de compra</td><td>Los 3 modulos</td></tr>
                    <tr><td><strong>Ventas</strong></td><td>Gestion de ordenes de venta</td><td>Seguimiento + Notificaciones</td></tr>
                    <tr><td><strong>Inventario</strong></td><td>Movimientos de almacen y recepciones</td><td>Seguimiento + Notificaciones</td></tr>
                    <tr><td><strong>Ventas con Inventario</strong></td><td>Enlace entre ventas y despachos</td><td>Seguimiento</td></tr>
                    <tr><td><strong>Compras con Inventario</strong></td><td>Enlace entre compras y recepciones</td><td>Seguimiento</td></tr>
                    <tr><td><strong>Reglas Intercompania</strong></td><td>Reglas nativas de Odoo para operaciones entre companias</td><td>Precio Intercompania</td></tr>
                    <tr><td><strong>Mensajeria</strong></td><td>Sistema de notificaciones internas de Odoo</td><td>Notificaciones</td></tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- 2. FLUJOS DE TRABAJO -->
    <div class="section" id="flujos">
        <div class="section-header">
            <div class="section-icon deep">&#9881;</div>
            <h2>2. Flujos de Trabajo <small>Diagramas de procesos graficos</small></h2>
        </div>

        <h3 style="margin-bottom: 20px; color: var(--secondary);">2.1 Flujo General del Ecosistema</h3>
        <div class="flow-horizontal">
            <div class="flow-box process">Precio Automatico<small>Costo real del vendedor</small></div>
            <div class="flow-arrow">&#10230;</div>
            <div class="flow-box co-b">Compania Vendedora<small>Recibe Orden de Venta</small></div>
            <div class="flow-arrow">&#10230;</div>
            <div class="flow-box process">Seguimiento<small>Barras de progreso</small></div>
            <div class="flow-arrow">&#10230;</div>
            <div class="flow-box alert">Validacion<small>Detecta diferencias</small></div>
            <div class="flow-arrow">&#10230;</div>
            <div class="flow-box return">Devolucion<small>Automatica</small></div>
        </div>

        <h3 style="margin: 35px 0 15px; color: var(--secondary);">2.2 Flujo Detallado: Asignacion de Precios</h3>
        <div class="vflow">
            <div class="vflow-step" data-step="1">
                <h4>El usuario crea una Orden de Compra</h4>
                <p>Al seleccionar como proveedor a un contacto que pertenece a otra compania del grupo, el sistema detecta automaticamente que se trata de una <strong>compra intercompania</strong>.</p>
            </div>
            <div class="vflow-step" data-step="2">
                <h4>Indicadores visuales aparecen</h4>
                <p>Se muestra una etiqueta <span class="badge badge-ic">Compra Intercompania</span> en la orden. Si el usuario no tiene permiso de edicion de precios, tambien aparece <span class="badge badge-locked">Precio Bloqueado</span>.</p>
            </div>
            <div class="vflow-step" data-step="3">
                <h4>El usuario agrega productos</h4>
                <p>Al seleccionar un producto en las lineas de la orden, el sistema obtiene automaticamente el <strong>costo del producto en la compania vendedora</strong> y lo asigna como precio unitario de la linea.</p>
            </div>
            <div class="vflow-step" data-step="4">
                <h4>Proteccion del precio</h4>
                <p>Si el usuario no pertenece al grupo <strong>"Gestor de Precios Intercompania"</strong>, el campo de precio aparece como solo lectura. Cualquier intento de modificacion es bloqueado por el sistema.</p>
            </div>
        </div>

        <h3 style="margin: 35px 0 15px; color: var(--secondary);">2.3 Flujo Detallado: Seguimiento de Entregas</h3>
        <div class="vflow">
            <div class="vflow-step" data-step="1">
                <h4>La Orden de Compra se confirma</h4>
                <p>Al confirmar la orden de compra, Odoo genera automaticamente una Orden de Venta en la compania vendedora (funcionalidad estandar de reglas intercompania).</p>
            </div>
            <div class="vflow-step" data-step="2">
                <h4>El modulo vincula las ordenes</h4>
                <p>El sistema detecta automaticamente la relacion entre la Orden de Compra y la Orden de Venta generada. Aparecen <strong>botones inteligentes</strong> en ambas ordenes para navegar entre ellas.</p>
            </div>
            <div class="vflow-step" data-step="3">
                <h4>Se inician los despachos y recepciones</h4>
                <p>La compania vendedora despacha mercancia (aumenta la cantidad despachada en la OV). La compania compradora recibe mercancia (aumenta la cantidad recibida en la OC).</p>
            </div>
            <div class="vflow-step" data-step="4">
                <h4>Panel de seguimiento se actualiza</h4>
                <p>En la pestana <strong>"Tracking Backorder"</strong> de cada orden se muestra en tiempo real: cantidad total pedida, cantidad recibida/despachada, cantidad pendiente, barra de progreso porcentual y el estado del backorder.</p>
            </div>
            <div class="vflow-step" data-step="5">
                <h4>Detalle linea por linea</h4>
                <p>Se muestra una tabla con cada producto de la orden, su cantidad pedida, cantidad recibida/despachada, cantidad pendiente y una barra de progreso individual con indicador de color.</p>
            </div>
        </div>

        <h3 style="margin: 35px 0 15px; color: var(--secondary);">2.4 Flujo Detallado: Deteccion de Diferencias y Devoluciones</h3>
        <div class="vflow">
            <div class="vflow-step" data-step="1">
                <h4>La compania compradora valida una recepcion</h4>
                <p>Al validar un movimiento de recepcion en el almacen de la compania compradora, el sistema se activa automaticamente para comparar cantidades.</p>
            </div>
            <div class="vflow-step" data-step="2">
                <h4>Comparacion de cantidades</h4>
                <p>El sistema compara, para cada producto de la orden: la <strong>cantidad despachada</strong> por la compania vendedora (registrada en la Orden de Venta) contra la <strong>cantidad recibida</strong> por la compania compradora (registrada en la Orden de Compra). Se manejan automaticamente las conversiones de unidad de medida.</p>
            </div>
            <div class="vflow-step" data-step="3">
                <h4>Si se detecta diferencia: Notificaciones</h4>
                <p>Se crean dos notificaciones automaticas:<br>
                - <strong>En la Orden de Compra</strong> (alerta amarilla): informa a los responsables de compras sobre la diferencia detectada, mostrando lo despachado, lo recibido y la diferencia por producto.<br>
                - <strong>En la Orden de Venta</strong> (alerta roja): informa a los responsables de ventas sobre la misma diferencia, con las cantidades en la unidad de medida correspondiente.</p>
            </div>
            <div class="vflow-step" data-step="4">
                <h4>Devolucion automatica</h4>
                <p>El sistema genera automaticamente:<br>
                - Un <strong>movimiento de salida</strong> en la compania compradora por la cantidad de la diferencia (devolucion).<br>
                - Un <strong>movimiento de entrada</strong> en la compania vendedora por la misma cantidad (recepcion de devolucion).<br>
                Se envia una notificacion adicional (alerta azul) informando que la devolucion fue creada.</p>
            </div>
            <div class="vflow-step" data-step="5">
                <h4>Validacion de la devolucion</h4>
                <p>Los movimientos de devolucion quedan disponibles para que el personal de almacen los valide manualmente y complete el proceso de devolucion fisica.</p>
            </div>
        </div>
    </div>

    <!-- 3. PARAMETROS -->
    <div class="section" id="parametros">
        <div class="section-header">
            <div class="section-icon warm">&#9881;</div>
            <h2>3. Parametros a Tener en Cuenta <small>Configuracion del ecosistema</small></h2>
        </div>

        <h3 style="margin-bottom: 15px; color: var(--secondary);">3.1 Requisitos Previos</h3>
        <div class="highlight-box">
            <strong>&#9888; Configuracion Obligatoria de Odoo</strong>
            Para que el ecosistema funcione correctamente, deben estar activas las <strong>Reglas Intercompania</strong> en Odoo (Ajustes &gt; Empresas &gt; Reglas Intercompania). Cada compania del grupo debe tener configurado su contacto como proveedor/cliente de la otra compania.
        </div>

        <div class="table-responsive">
            <table>
                <thead><tr><th>Requisito</th><th>Donde Configurar</th><th>Descripcion</th></tr></thead>
                <tbody>
                    <tr><td><strong>Multi-compania activa</strong></td><td>Ajustes &gt; Companias</td><td>Deben existir al menos dos companias en el sistema</td></tr>
                    <tr><td><strong>Reglas Intercompania</strong></td><td>Ajustes &gt; Empresas &gt; Reglas Inter-compania</td><td>Definir que al confirmar una OC, se genere automaticamente una OV en la compania vendedora</td></tr>
                    <tr><td><strong>Contactos vinculados</strong></td><td>Contactos</td><td>Cada compania debe tener un contacto de la otra compania configurado como proveedor</td></tr>
                    <tr><td><strong>Productos compartidos</strong></td><td>Productos</td><td>Los productos deben existir en ambas companias con sus costos definidos</td></tr>
                    <tr><td><strong>Almacenes configurados</strong></td><td>Inventario &gt; Configuracion</td><td>Cada compania debe tener sus almacenes y ubicaciones correctamente configurados</td></tr>
                </tbody>
            </table>
        </div>

        <h3 style="margin: 30px 0 15px; color: var(--secondary);">3.2 Indicadores Visuales en Ordenes de Compra</h3>
        <div class="table-responsive">
            <table>
                <thead><tr><th>Indicador</th><th>Cuando Aparece</th><th>Significado</th></tr></thead>
                <tbody>
                    <tr><td><span class="badge badge-ic">Compra Intercompania</span></td><td>El proveedor es otra compania del grupo</td><td>Indica que la orden esta sujeta a las reglas de precio intercompania</td></tr>
                    <tr><td><span class="badge badge-locked">Precio Bloqueado</span></td><td>Compra intercompania y el usuario no tiene permiso de edicion</td><td>El precio no puede ser modificado por este usuario</td></tr>
                    <tr><td><strong>Boton "OV Intercompania"</strong></td><td>Existe una Orden de Venta vinculada</td><td>Boton inteligente para navegar a la Orden de Venta en la compania vendedora</td></tr>
                    <tr><td><strong>Compania Vendedora</strong></td><td>Es compra intercompania</td><td>Muestra la compania del grupo que actua como proveedor</td></tr>
                    <tr><td><strong>Costo Compania Vendedora</strong></td><td>Columna opcional en lineas</td><td>Muestra el costo de referencia del producto en la compania vendedora</td></tr>
                </tbody>
            </table>
        </div>

        <h3 style="margin: 30px 0 15px; color: var(--secondary);">3.3 Indicadores Visuales en Ordenes de Venta</h3>
        <div class="table-responsive">
            <table>
                <thead><tr><th>Indicador</th><th>Cuando Aparece</th><th>Significado</th></tr></thead>
                <tbody>
                    <tr><td><strong>Boton "OC Intercompania"</strong></td><td>Existe una Orden de Compra vinculada</td><td>Boton inteligente para navegar a la Orden de Compra en la compania compradora</td></tr>
                    <tr><td><strong>Pestana "Tracking Backorder"</strong></td><td>Es orden intercompania</td><td>Panel de seguimiento con barras de progreso de despacho</td></tr>
                </tbody>
            </table>
        </div>

        <h3 style="margin: 30px 0 15px; color: var(--secondary);">3.4 Logica de Asignacion de Precio</h3>
        <div class="highlight-box info">
            <strong>&#9432; Regla de Precio</strong>
            El precio en compras intercompania se obtiene <strong>siempre</strong> del costo del producto en la compania vendedora. Se ignoran las listas de precios de proveedor, las tarifas personalizadas y cualquier otra fuente de precio. Esto garantiza que el precio refleje el costo real del producto.
        </div>

        <h3 style="margin: 30px 0 15px; color: var(--secondary);">3.5 Filtros Adicionales en Compras</h3>
        <div class="table-responsive">
            <table>
                <thead><tr><th>Filtro</th><th>Descripcion</th></tr></thead>
                <tbody>
                    <tr><td><strong>Compras Intercompania</strong></td><td>Filtro rapido para mostrar solo ordenes de compra donde el proveedor es otra compania del grupo</td></tr>
                    <tr><td><strong>Agrupar por Compania Vendedora</strong></td><td>Permite agrupar las ordenes de compra por la compania del grupo que actua como proveedor</td></tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- 4. GUIA PASO A PASO -->
    <div class="section" id="guia-paso-a-paso">
        <div class="section-header">
            <div class="section-icon sage">&#128221;</div>
            <h2>4. Guia Paso a Paso <small>Configuracion y operacion</small></h2>
        </div>

        <h3 style="margin-bottom: 15px; color: var(--secondary);">Paso 1: Instalar los Modulos</h3>
        <div class="vflow">
            <div class="vflow-step" data-step="1">
                <h4>Instalar los tres modulos</h4>
                <p>Ir a <strong>Aplicaciones</strong> y buscar e instalar en este orden: <strong>Intercompany Backorder Tracking</strong>, luego <strong>Intercompany Tracking Notifications</strong> y finalmente <strong>Purchase Intercompany Price</strong>. Las dependencias se instalan automaticamente.</p>
            </div>
        </div>

        <h3 style="margin: 30px 0 15px; color: var(--secondary);">Paso 2: Configurar las Reglas Intercompania</h3>
        <div class="vflow">
            <div class="vflow-step" data-step="1">
                <h4>Activar reglas intercompania</h4>
                <p>Ir a <strong>Ajustes &gt; Empresas &gt; Reglas Inter-compania</strong>. Para cada compania que participara en operaciones intercompania, activar la regla de que al confirmar una Orden de Compra se genere automaticamente una Orden de Venta en la compania vendedora.</p>
            </div>
            <div class="vflow-step" data-step="2">
                <h4>Verificar contactos</h4>
                <p>Asegurar que cada compania tenga un contacto de la otra compania configurado como proveedor. El sistema usa este vinculo para detectar que una orden es intercompania.</p>
            </div>
        </div>

        <h3 style="margin: 30px 0 15px; color: var(--secondary);">Paso 3: Asignar Permisos</h3>
        <div class="group-card">
            <div class="group-icon user">&#128100;</div>
            <div>
                <h4 style="color: var(--secondary); margin-bottom: 5px;">Usuario de Compras / Ventas</h4>
                <p style="font-size: 13px; color: var(--gray-600); margin-bottom: 0;">Puede crear ordenes de compra intercompania, ver el panel de seguimiento, recibir notificaciones de diferencias y consultar las devoluciones generadas. <strong>No puede</strong> modificar el precio en compras intercompania.</p>
            </div>
        </div>
        <div class="group-card">
            <div class="group-icon price">&#128176;</div>
            <div>
                <h4 style="color: var(--secondary); margin-bottom: 5px;">Gestor de Precios Intercompania</h4>
                <p style="font-size: 13px; color: var(--gray-600); margin-bottom: 0;"><strong>Rol especial.</strong> Permite modificar el precio unitario en ordenes de compra intercompania. Sin este rol, el precio se asigna automaticamente y no es editable. Asignar en <strong>Ajustes &gt; Usuarios &gt; Pestana Intercompania</strong>.</p>
            </div>
        </div>
        <div class="group-card">
            <div class="group-icon admin">&#128272;</div>
            <div>
                <h4 style="color: var(--secondary); margin-bottom: 5px;">Administrador de Inventario</h4>
                <p style="font-size: 13px; color: var(--gray-600); margin-bottom: 0;">Valida recepciones en almacen (dispara las verificaciones de diferencias), gestiona las devoluciones automaticas generadas y tiene visibilidad completa de los movimientos.</p>
            </div>
        </div>

        <h3 style="margin: 30px 0 15px; color: var(--secondary);">Paso 4: Crear una Orden de Compra Intercompania</h3>
        <div class="vflow">
            <div class="vflow-step" data-step="1">
                <h4>Crear la orden</h4>
                <p>Ir a <strong>Compras &gt; Ordenes de Compra &gt; Crear</strong>. Seleccionar como proveedor a la compania vendedora del grupo. Automaticamente aparecera la etiqueta <span class="badge badge-ic">Compra Intercompania</span>.</p>
            </div>
            <div class="vflow-step" data-step="2">
                <h4>Agregar productos</h4>
                <p>Al agregar productos, el precio se asigna automaticamente desde el costo del producto en la compania vendedora. Si no se tiene el rol de Gestor de Precios, el campo de precio sera de solo lectura.</p>
            </div>
            <div class="vflow-step" data-step="3">
                <h4>Confirmar la orden</h4>
                <p>Al confirmar, Odoo genera automaticamente la Orden de Venta en la compania vendedora. Aparecera el boton inteligente <strong>"OV Intercompania"</strong> para navegar directamente a la orden generada.</p>
            </div>
        </div>

        <h3 style="margin: 30px 0 15px; color: var(--secondary);">Paso 5: Monitorear Entregas y Recepciones</h3>
        <div class="vflow">
            <div class="vflow-step" data-step="1">
                <h4>Consultar el panel de seguimiento</h4>
                <p>En la Orden de Compra, ir a la pestana <strong>"Tracking Backorder"</strong> para ver el estado de la recepcion: cantidad total pedida, cantidad recibida, cantidad pendiente y la barra de progreso con porcentaje.</p>
            </div>
            <div class="vflow-step" data-step="2">
                <h4>Navegar entre ordenes</h4>
                <p>Usar el boton inteligente <strong>"OV Intercompania"</strong> (desde la OC) o <strong>"OC Intercompania"</strong> (desde la OV) para navegar entre la compania compradora y la compania vendedora y ver el estado desde ambas perspectivas.</p>
            </div>
            <div class="vflow-step" data-step="3">
                <h4>Revisar detalle por producto</h4>
                <p>En la tabla de detalle por producto se muestra cada linea con su barra de progreso individual, identificando rapidamente que productos estan pendientes de recepcion o despacho.</p>
            </div>
        </div>

        <h3 style="margin: 30px 0 15px; color: var(--secondary);">Paso 6: Gestionar Diferencias</h3>
        <div class="vflow">
            <div class="vflow-step" data-step="1">
                <h4>Validar la recepcion</h4>
                <p>Al validar la recepcion de mercancia en la compania compradora, el sistema compara automaticamente las cantidades despachadas contra las recibidas.</p>
            </div>
            <div class="vflow-step" data-step="2">
                <h4>Revisar notificaciones</h4>
                <p>Si hay diferencia, se publican notificaciones en ambas ordenes (OC y OV) con el detalle de lo despachado, lo recibido y la diferencia por producto. Los responsables reciben la notificacion en su bandeja de entrada.</p>
            </div>
            <div class="vflow-step" data-step="3">
                <h4>Gestionar la devolucion</h4>
                <p>Se genera automaticamente un movimiento de devolucion. Revisar el movimiento de salida en la compania compradora y el movimiento de entrada en la compania vendedora. Validar los movimientos cuando la devolucion fisica se concrete.</p>
            </div>
        </div>
    </div>

    <!-- 5. ESTADOS -->
    <div class="section" id="estados">
        <div class="section-header">
            <div class="section-icon plum">&#128203;</div>
            <h2>5. Estados del Proceso <small>Ciclo de vida y estados</small></h2>
        </div>

        <h3 style="margin-bottom: 15px; color: var(--secondary);">5.1 Estado de Recepcion / Despacho (Backorder)</h3>
        <div class="table-responsive">
            <table>
                <thead><tr><th>Estado</th><th>Indicador</th><th>Condicion</th><th>Color de Barra</th><th>Descripcion</th></tr></thead>
                <tbody>
                    <tr>
                        <td><strong>Pendiente</strong></td>
                        <td><span class="badge badge-pending">Pendiente</span></td>
                        <td>0% de avance</td>
                        <td>Rojo</td>
                        <td>No se ha recibido ni despachado ninguna unidad del pedido</td>
                    </tr>
                    <tr>
                        <td><strong>Parcial</strong></td>
                        <td><span class="badge badge-partial">Parcial</span></td>
                        <td>Mayor a 0% y menor a 100%</td>
                        <td>Amarillo</td>
                        <td>Se ha recibido/despachado parte del pedido, quedan unidades pendientes</td>
                    </tr>
                    <tr>
                        <td><strong>Completo</strong></td>
                        <td><span class="badge badge-complete">Completo</span></td>
                        <td>100% de avance</td>
                        <td>Verde</td>
                        <td>Se ha recibido/despachado la totalidad del pedido</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <h3 style="margin: 30px 0 15px; color: var(--secondary);">5.2 Tipos de Notificacion</h3>
        <div class="table-responsive">
            <table>
                <thead><tr><th>Notificacion</th><th>Color</th><th>Donde Aparece</th><th>Destinatarios</th><th>Descripcion</th></tr></thead>
                <tbody>
                    <tr>
                        <td><strong>Diferencia en Compras</strong></td>
                        <td><span class="badge badge-partial">Amarillo</span></td>
                        <td>Orden de Compra</td>
                        <td>Responsable de la OC + usuario actual</td>
                        <td>Detalla la diferencia entre lo despachado y lo recibido, en la unidad de medida de compra</td>
                    </tr>
                    <tr>
                        <td><strong>Diferencia en Ventas</strong></td>
                        <td><span class="badge badge-pending">Rojo</span></td>
                        <td>Orden de Venta</td>
                        <td>Responsable de la OV + usuario actual</td>
                        <td>Detalla la misma diferencia pero en la unidad de medida de venta</td>
                    </tr>
                    <tr>
                        <td><strong>Devolucion Creada</strong></td>
                        <td><span class="badge badge-info">Azul</span></td>
                        <td>Orden de Compra</td>
                        <td>Responsable de la OC</td>
                        <td>Informa que se creo automaticamente un movimiento de devolucion por la diferencia</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <h3 style="margin: 30px 0 15px; color: var(--secondary);">5.3 Contenido de las Notificaciones</h3>
        <p>Cada notificacion de diferencia incluye:</p>
        <div class="feature-grid" style="grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));">
            <div class="feature-card">
                <h4>Referencia Cruzada</h4>
                <p>Numero de la Orden de Venta y numero de la Orden de Compra vinculadas</p>
            </div>
            <div class="feature-card">
                <h4>Detalle por Producto</h4>
                <p>Nombre del producto, cantidad despachada, cantidad recibida y diferencia</p>
            </div>
            <div class="feature-card">
                <h4>Tipo de Diferencia</h4>
                <p>"Recepcion Parcial" si se recibio algo, o "Sin Recibir" si no se recibio nada del producto</p>
            </div>
            <div class="feature-card">
                <h4>Unidad de Medida</h4>
                <p>Las cantidades se expresan en la unidad de medida correspondiente (compra o venta segun la orden)</p>
            </div>
        </div>
    </div>

    <!-- 6. TRAZABILIDAD -->
    <div class="section" id="trazabilidad">
        <div class="section-header">
            <div class="section-icon sage">&#128269;</div>
            <h2>6. Trazabilidad <small>Seguimiento completo de operaciones</small></h2>
        </div>

        <p>El ecosistema proporciona trazabilidad completa de cada operacion intercompania, desde la creacion de la orden hasta la resolucion de diferencias.</p>

        <h3 style="margin: 25px 0 15px; color: var(--secondary);">6.1 Vinculacion entre Ordenes</h3>
        <div class="highlight-box success">
            <strong>Navegacion Bidireccional</strong>
            Cada Orden de Compra intercompania se vincula automaticamente con su Orden de Venta correspondiente en la compania vendedora. Los botones inteligentes "OV Intercompania" y "OC Intercompania" permiten navegar instantaneamente entre ambas ordenes, sin necesidad de cambiar de compania manualmente.
        </div>

        <h3 style="margin: 25px 0 15px; color: var(--secondary);">6.2 Metricas de Seguimiento por Orden</h3>
        <div class="table-responsive">
            <table>
                <thead><tr><th>Metrica</th><th>En Orden de Compra</th><th>En Orden de Venta</th></tr></thead>
                <tbody>
                    <tr><td><strong>Cantidad Total Pedida</strong></td><td>Suma de cantidades de todas las lineas de la OC</td><td>Suma de cantidades de todas las lineas de la OV</td></tr>
                    <tr><td><strong>Cantidad Recibida/Despachada</strong></td><td>Suma de cantidades recibidas en almacen</td><td>Suma de cantidades despachadas al comprador</td></tr>
                    <tr><td><strong>Cantidad Pendiente</strong></td><td>Pedida menos recibida</td><td>Pedida menos despachada</td></tr>
                    <tr><td><strong>Porcentaje de Avance</strong></td><td>% de recepcion completada</td><td>% de despacho completado</td></tr>
                    <tr><td><strong>Tiene Backorder</strong></td><td>Si la cantidad pendiente es mayor a cero</td><td>Si la cantidad pendiente es mayor a cero</td></tr>
                </tbody>
            </table>
        </div>

        <h3 style="margin: 25px 0 15px; color: var(--secondary);">6.3 Metricas de Seguimiento por Linea</h3>
        <div class="table-responsive">
            <table>
                <thead><tr><th>Metrica</th><th>En Lineas de OC</th><th>En Lineas de OV</th></tr></thead>
                <tbody>
                    <tr><td><strong>Cantidad Pendiente</strong></td><td>Cantidad pedida menos cantidad recibida por producto</td><td>Cantidad pedida menos cantidad despachada por producto</td></tr>
                    <tr><td><strong>Porcentaje de Avance</strong></td><td>% de recepcion del producto</td><td>% de despacho del producto</td></tr>
                </tbody>
            </table>
        </div>

        <h3 style="margin: 25px 0 15px; color: var(--secondary);">6.4 Historial de Notificaciones</h3>
        <p>Todas las notificaciones de diferencias y devoluciones se registran en el <strong>hilo de conversacion</strong> (chatter) de las ordenes de compra y venta. Esto permite consultar el historial completo de alertas generadas para cada orden.</p>

        <h3 style="margin: 25px 0 15px; color: var(--secondary);">6.5 Prevencion de Duplicados</h3>
        <div class="highlight-box">
            <strong>&#9888; Control de Devoluciones Duplicadas</strong>
            El sistema verifica antes de crear una devolucion si ya existe un movimiento de devolucion previo para la misma orden. Si ya existe, no se crea uno nuevo, evitando movimientos duplicados en el inventario.
        </div>

        <h3 style="margin: 25px 0 15px; color: var(--secondary);">6.6 Conversion de Unidades de Medida</h3>
        <p>Cuando la unidad de medida de compra difiere de la unidad de medida de venta (por ejemplo, comprar en cajas pero vender en unidades), el sistema convierte automaticamente las cantidades a la unidad base para realizar la comparacion correcta, y muestra los resultados en la unidad de medida correspondiente a cada orden.</p>
    </div>

    <!-- 7. REPORTES -->
    <div class="section" id="reportes">
        <div class="section-header">
            <div class="section-icon warm">&#128202;</div>
            <h2>7. Detalle de Reportes <small>Vistas y paneles disponibles</small></h2>
        </div>

        <div class="highlight-box">
            <strong>&#9888; Nota:</strong>
            El ecosistema no incluye reportes impresos (PDF) dedicados. La informacion se presenta como paneles integrados dentro de cada orden y como filtros/agrupaciones en las vistas de lista existentes.
        </div>

        <h3 style="margin: 25px 0 15px; color: var(--secondary);">7.1 Panel de Tracking Backorder (OC y OV)</h3>
        <div class="feature-grid" style="grid-template-columns: 1fr 1fr;">
            <div class="feature-card">
                <h4>Seccion de Estado General</h4>
                <p>Muestra: cantidad total pedida, cantidad recibida/despachada, cantidad pendiente, barra de progreso con porcentaje y etiqueta de estado (Pendiente / Parcial / Completo).</p>
            </div>
            <div class="feature-card">
                <h4>Tabla de Detalle por Producto</h4>
                <p>Tabla con encabezados oscuros mostrando: producto, cantidad pedida, cantidad recibida/despachada, cantidad pendiente y barra de progreso individual con color segun avance.</p>
            </div>
        </div>

        <h3 style="margin: 25px 0 15px; color: var(--secondary);">7.2 Informacion en Vista de Lista de Compras</h3>
        <div class="table-responsive">
            <table>
                <thead><tr><th>Elemento</th><th>Descripcion</th></tr></thead>
                <tbody>
                    <tr><td><strong>Columna "Compania Vendedora"</strong></td><td>Columna opcional en la lista de ordenes de compra que muestra la compania del grupo que actua como proveedor</td></tr>
                    <tr><td><strong>Filtro "Compras Intercompania"</strong></td><td>Filtro rapido para mostrar solo ordenes dirigidas a companias del grupo</td></tr>
                    <tr><td><strong>Agrupacion "Compania Vendedora"</strong></td><td>Permite agrupar todas las ordenes por la compania proveedora del grupo</td></tr>
                </tbody>
            </table>
        </div>

        <h3 style="margin: 25px 0 15px; color: var(--secondary);">7.3 Notificaciones como Registro</h3>
        <p>Las notificaciones de diferencias y devoluciones se conservan en el hilo de mensajes de cada orden y funcionan como un registro historico consultable de todos los eventos relevantes de la operacion intercompania.</p>
    </div>

    <!-- 8. FAQ -->
    <div class="section" id="faq">
        <div class="section-header">
            <div class="section-icon mauve">&#10067;</div>
            <h2>8. Preguntas y Respuestas <small>Preguntas frecuentes del ecosistema</small></h2>
        </div>

        <div class="faq-item">
            <div class="faq-question"><span class="q-marker">Q</span>De donde se obtiene el precio en una compra intercompania?</div>
            <div class="faq-answer">El precio se toma <strong>directamente del costo del producto en la compania vendedora</strong>. No se usan listas de precios de proveedor ni tarifas especiales. Esto garantiza que el precio de transferencia entre companias refleje el costo real del producto.</div>
        </div>

        <div class="faq-item">
            <div class="faq-question"><span class="q-marker">Q</span>Puedo modificar el precio en una compra intercompania?</div>
            <div class="faq-answer">Solo si su usuario tiene asignado el rol de <strong>"Gestor de Precios Intercompania"</strong>. Sin este rol, el precio es de solo lectura y el sistema bloqueara cualquier intento de modificacion. Este control existe para mantener la integridad de los precios de transferencia.</div>
        </div>

        <div class="faq-item">
            <div class="faq-question"><span class="q-marker">Q</span>Como se detecta que una orden es intercompania?</div>
            <div class="faq-answer">El sistema verifica si el proveedor seleccionado en la orden de compra es el contacto asociado a otra compania del mismo grupo empresarial en Odoo. La deteccion es automatica y no requiere ninguna accion manual del usuario.</div>
        </div>

        <div class="faq-item">
            <div class="faq-question"><span class="q-marker">Q</span>Que sucede al confirmar la orden de compra?</div>
            <div class="faq-answer">Al confirmar, las reglas intercompania de Odoo generan automaticamente una <strong>Orden de Venta</strong> en la compania vendedora. El modulo de seguimiento vincula ambas ordenes y activa los paneles de tracking. Los botones inteligentes permiten navegar entre la OC y la OV.</div>
        </div>

        <div class="faq-item">
            <div class="faq-question"><span class="q-marker">Q</span>Cuando se dispara la deteccion de diferencias?</div>
            <div class="faq-answer">La deteccion se dispara automaticamente al <strong>validar una recepcion de mercancia</strong> en la compania compradora. El sistema compara lo que la compania vendedora registro como despachado contra lo que la compania compradora registro como recibido.</div>
        </div>

        <div class="faq-item">
            <div class="faq-question"><span class="q-marker">Q</span>Que pasa si recibo menos de lo que despacharon?</div>
            <div class="faq-answer">El sistema:<br>1. Envia una <strong>notificacion amarilla</strong> en la Orden de Compra al equipo de compras<br>2. Envia una <strong>notificacion roja</strong> en la Orden de Venta al equipo de ventas<br>3. Genera automaticamente un <strong>movimiento de devolucion</strong> en ambas companias por la cantidad de la diferencia<br>Los responsables reciben la notificacion en su bandeja de entrada de Odoo.</div>
        </div>

        <div class="faq-item">
            <div class="faq-question"><span class="q-marker">Q</span>La devolucion automatica se valida sola?</div>
            <div class="faq-answer"><strong>No.</strong> Los movimientos de devolucion se crean pero quedan pendientes de validacion. El personal de almacen debe validarlos manualmente una vez que se concrete la devolucion fisica de la mercancia. Esto permite tener control sobre el proceso fisico real.</div>
        </div>

        <div class="faq-item">
            <div class="faq-question"><span class="q-marker">Q</span>Se crean devoluciones duplicadas si valido varias recepciones?</div>
            <div class="faq-answer"><strong>No.</strong> El sistema verifica si ya existe un movimiento de devolucion para la misma orden antes de crear uno nuevo. Si ya existe una devolucion previa, no se genera una duplicada, evitando movimientos dobles en el inventario.</div>
        </div>

        <div class="faq-item">
            <div class="faq-question"><span class="q-marker">Q</span>Que pasa si la unidad de medida de compra es diferente a la de venta?</div>
            <div class="faq-answer">El sistema maneja automaticamente la <strong>conversion de unidades de medida</strong>. Convierte las cantidades a la unidad base para hacer la comparacion correcta, y muestra los resultados en la unidad de medida correspondiente a cada orden (unidad de compra en la OC, unidad de venta en la OV).</div>
        </div>

        <div class="faq-item">
            <div class="faq-question"><span class="q-marker">Q</span>Puedo ver el historial de diferencias detectadas?</div>
            <div class="faq-answer"><strong>Si.</strong> Todas las notificaciones de diferencias y devoluciones se registran en el hilo de conversacion (chatter) de cada orden. Puede desplazarse por el historial de mensajes para ver todas las alertas que se generaron a lo largo del tiempo.</div>
        </div>

        <div class="faq-item">
            <div class="faq-question"><span class="q-marker">Q</span>Los tres modulos se pueden instalar por separado?</div>
            <div class="faq-answer">El modulo de <strong>Precio Intercompania</strong> y el de <strong>Seguimiento de Backorders</strong> pueden funcionar de forma independiente. Sin embargo, el modulo de <strong>Notificaciones y Devoluciones</strong> requiere que el de Seguimiento de Backorders este instalado, ya que utiliza los datos de seguimiento para detectar diferencias.</div>
        </div>

        <div class="faq-item">
            <div class="faq-question"><span class="q-marker">Q</span>Que significa "Recepcion Parcial" vs "Sin Recibir" en la notificacion?</div>
            <div class="faq-answer"><strong>"Recepcion Parcial"</strong> indica que se recibio una parte de la cantidad despachada del producto (por ejemplo, se despacharon 100 unidades pero solo se recibieron 80). <strong>"Sin Recibir"</strong> indica que no se recibio ninguna unidad del producto a pesar de que fue despachado por la compania vendedora.</div>
        </div>
    </div>

</div>

<!-- FOOTER -->
<div class="footer">
    <div class="company-name">COONDEV</div>
    <div class="tagline">Coonsulting &amp; Development</div>
    <div class="footer-divider"></div>
    <p>Guia Funcional - Automatizacion de Compras Intercompania</p>
    <p>Ecosistema: <strong>Backorder Tracking + Tracking Notifications + Intercompany Price</strong> | Odoo 18</p>
    <p style="margin-top: 15px; font-size: 12px; opacity: 0.7;">Documento generado &bull; Febrero 2026</p>
</div>

</body>
</html>
