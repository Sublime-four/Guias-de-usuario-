<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guia Funcional - Kardex Inventory Valuation | COONDEV</title>
    <style>
        :root {
            --primary: #7B5B7B;
            --primary-dark: #5E3F5E;
            --primary-light: #9B7B9B;
            --secondary: #4A2D4A;
            --accent: #C9A0C9;
            --dark: #2E1A2E;
            --gray-100: #f8f7f9;
            --gray-200: #eae7ec;
            --gray-300: #ddd8df;
            --gray-400: #c4bdc7;
            --gray-500: #9e95a1;
            --gray-600: #6c636f;
            --gray-700: #4a434d;
            --gray-800: #342e37;
            --gray-900: #211c23;
            --white: #ffffff;
            --success: #5a9e6f;
            --warning: #c9a84c;
            --danger: #b5545a;
            --info: #6b8fa8;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.7;
            color: var(--gray-800);
            background: var(--gray-100);
        }

        .header {
            background: linear-gradient(135deg, var(--secondary) 0%, var(--primary) 50%, var(--primary-light) 100%);
            color: var(--white);
            position: sticky; top: 0; z-index: 1000;
            box-shadow: 0 4px 20px rgba(75,45,75,0.25);
        }

        .header-top {
            display: flex; align-items: center; justify-content: space-between;
            padding: 15px 40px; max-width: 1400px; margin: 0 auto;
        }

        .logo-area { display: flex; align-items: center; gap: 20px; }
        .logo-area svg { height: 48px; width: auto; }

        .header-badge {
            background: rgba(255,255,255,0.15); border: 1px solid rgba(255,255,255,0.3);
            padding: 6px 16px; border-radius: 20px; font-size: 12px; letter-spacing: 1px;
        }

        .hero {
            background: linear-gradient(135deg, var(--secondary) 0%, var(--primary) 40%, var(--primary-light) 100%);
            color: var(--white); padding: 60px 40px; text-align: center;
            position: relative; overflow: hidden;
        }

        .hero::before {
            content: ''; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.06) 0%, transparent 60%);
            animation: pulse 8s ease-in-out infinite;
        }

        @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.1); } }

        .hero-content { position: relative; z-index: 1; max-width: 800px; margin: 0 auto; }
        .hero h1 { font-size: 42px; font-weight: 800; margin-bottom: 15px; text-shadow: 0 2px 10px rgba(0,0,0,0.2); }

        .hero .version-badge {
            display: inline-block; background: rgba(255,255,255,0.2);
            border: 1px solid rgba(255,255,255,0.3); padding: 4px 14px;
            border-radius: 15px; font-size: 13px; margin-bottom: 20px;
        }

        .hero p { font-size: 18px; opacity: 0.9; max-width: 600px; margin: 0 auto; }

        .hero-meta { display: flex; justify-content: center; gap: 30px; margin-top: 30px; flex-wrap: wrap; }

        .hero-meta-item {
            background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2);
            padding: 10px 20px; border-radius: 10px; font-size: 13px;
        }

        .hero-meta-item strong {
            display: block; font-size: 11px; text-transform: uppercase;
            letter-spacing: 1px; opacity: 0.7; margin-bottom: 2px;
        }

        .nav-bar {
            background: var(--white); border-bottom: 2px solid var(--gray-200);
            padding: 0 40px; position: sticky; top: 78px; z-index: 999;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .nav-bar ul {
            list-style: none; display: flex; max-width: 1400px;
            margin: 0 auto; overflow-x: auto;
        }

        .nav-bar ul li a {
            display: block; padding: 14px 20px; color: var(--gray-600);
            text-decoration: none; font-size: 13px; font-weight: 600;
            text-transform: uppercase; letter-spacing: 0.5px;
            border-bottom: 3px solid transparent; transition: all 0.3s; white-space: nowrap;
        }

        .nav-bar ul li a:hover {
            color: var(--primary); border-bottom-color: var(--primary);
            background: rgba(123,91,123,0.06);
        }

        .main-content { max-width: 1200px; margin: 0 auto; padding: 40px; }

        .section {
            background: var(--white); border-radius: 16px; padding: 40px;
            margin-bottom: 30px; box-shadow: 0 2px 20px rgba(75,45,75,0.06);
            border: 1px solid var(--gray-200);
        }

        .section-header {
            display: flex; align-items: center; gap: 15px;
            margin-bottom: 30px; padding-bottom: 20px; border-bottom: 2px solid var(--gray-200);
        }

        .section-icon {
            width: 50px; height: 50px; border-radius: 12px;
            display: flex; align-items: center; justify-content: center;
            font-size: 24px; flex-shrink: 0;
        }

        .section-icon.mauve { background: linear-gradient(135deg, var(--primary-light), var(--primary)); color: white; }
        .section-icon.deep { background: linear-gradient(135deg, var(--primary), var(--secondary)); color: white; }
        .section-icon.soft { background: linear-gradient(135deg, var(--accent), var(--primary-light)); color: white; }
        .section-icon.warm { background: linear-gradient(135deg, #c9a84c, #b8943e); color: white; }
        .section-icon.plum { background: linear-gradient(135deg, #8e6b8e, #6b3f6b); color: white; }
        .section-icon.sage { background: linear-gradient(135deg, #7ba88e, #5a9e6f); color: white; }

        .section-header h2 { font-size: 24px; color: var(--secondary); font-weight: 700; }

        .section-header h2 small {
            display: block; font-size: 12px; color: var(--gray-500);
            font-weight: 400; text-transform: uppercase; letter-spacing: 2px; margin-top: 4px;
        }

        .section p { margin-bottom: 15px; color: var(--gray-700); }

        .highlight-box {
            background: linear-gradient(135deg, #f5eef5, #faf5fa);
            border-left: 4px solid var(--primary); padding: 15px 20px;
            border-radius: 0 10px 10px 0; margin: 20px 0;
        }

        .highlight-box.info { background: linear-gradient(135deg, #eee8f0, #f5eff7); border-left-color: var(--info); }
        .highlight-box.success { background: linear-gradient(135deg, #e8f0eb, #eff5f1); border-left-color: var(--success); }
        .highlight-box.danger { background: linear-gradient(135deg, #f0e8e9, #f7eff0); border-left-color: var(--danger); }
        .highlight-box strong { display: block; margin-bottom: 5px; color: var(--gray-800); }

        .feature-grid {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px; margin: 20px 0;
        }

        .feature-card {
            background: var(--gray-100); border: 1px solid var(--gray-200);
            border-radius: 12px; padding: 25px; transition: all 0.3s;
        }

        .feature-card:hover {
            transform: translateY(-3px); box-shadow: 0 8px 25px rgba(75,45,75,0.12);
            border-color: var(--primary);
        }

        .feature-card .icon { font-size: 28px; margin-bottom: 12px; }
        .feature-card h4 { color: var(--secondary); margin-bottom: 8px; font-size: 16px; }
        .feature-card p { font-size: 13px; color: var(--gray-600); margin-bottom: 0; }

        .vflow { position: relative; padding-left: 60px; margin: 30px 0; }

        .vflow::before {
            content: ''; position: absolute; left: 28px; top: 0; bottom: 0; width: 3px;
            background: linear-gradient(to bottom, var(--primary), var(--secondary), var(--accent));
            border-radius: 2px;
        }

        .vflow-step {
            position: relative; margin-bottom: 25px; padding: 20px;
            background: var(--gray-100); border-radius: 12px; border: 1px solid var(--gray-200);
        }

        .vflow-step::before {
            content: attr(data-step); position: absolute; left: -48px; top: 20px;
            width: 36px; height: 36px; border-radius: 50%; background: var(--primary);
            color: white; display: flex; align-items: center; justify-content: center;
            font-weight: 800; font-size: 14px; box-shadow: 0 3px 10px rgba(123,91,123,0.35); z-index: 2;
        }

        .vflow-step h4 { color: var(--secondary); margin-bottom: 8px; font-size: 16px; }
        .vflow-step p { font-size: 14px; color: var(--gray-600); margin-bottom: 0; }

        .bidir-flow {
            display: grid; grid-template-columns: 1fr 80px 1fr 80px 1fr;
            gap: 0; align-items: center; margin: 30px 0;
        }

        .bidir-box {
            background: var(--gray-100); border: 2px solid var(--gray-300);
            border-radius: 16px; padding: 20px; text-align: center;
        }

        .bidir-box.entries { border-color: var(--success); background: linear-gradient(135deg, #e8f0eb, #dce8e0); }
        .bidir-box.stock { border-color: var(--primary); background: linear-gradient(135deg, #f5eef5, #ede4ed); }
        .bidir-box.exits { border-color: var(--danger); background: linear-gradient(135deg, #f0e8e9, #f7eff0); }
        .bidir-box h4 { font-size: 16px; margin-bottom: 8px; }
        .bidir-box.entries h4 { color: var(--success); }
        .bidir-box.stock h4 { color: var(--primary); }
        .bidir-box.exits h4 { color: var(--danger); }

        .bidir-center { display: flex; flex-direction: column; align-items: center; gap: 4px; }
        .bidir-center .arrow { font-size: 22px; color: var(--gray-500); }
        .bidir-center .label { font-size: 9px; text-transform: uppercase; letter-spacing: 1px; color: var(--gray-500); font-weight: 600; }

        .table-responsive { overflow-x: auto; margin: 20px 0; }
        table { width: 100%; border-collapse: collapse; font-size: 14px; }

        table thead th {
            background: var(--secondary); color: var(--white); padding: 12px 16px;
            text-align: left; font-weight: 600; font-size: 12px;
            text-transform: uppercase; letter-spacing: 0.5px;
        }

        table thead th:first-child { border-radius: 10px 0 0 0; }
        table thead th:last-child { border-radius: 0 10px 0 0; }
        table tbody td { padding: 12px 16px; border-bottom: 1px solid var(--gray-200); }
        table tbody tr:hover { background: var(--gray-100); }
        table tbody tr:last-child td:first-child { border-radius: 0 0 0 10px; }
        table tbody tr:last-child td:last-child { border-radius: 0 0 10px 0; }

        .badge {
            display: inline-block; padding: 4px 10px; border-radius: 6px;
            font-size: 11px; font-weight: 700; text-transform: uppercase; letter-spacing: 0.5px;
        }

        .badge-entry { background: #dce8e0; color: #2a5a3a; }
        .badge-exit { background: #f0dfe0; color: #7a3035; }
        .badge-neutral { background: #e2e0e5; color: #4a434d; }
        .badge-calc { background: #e5dae5; color: #5E3F5E; }
        .badge-diff-pos { background: #d1ecf1; color: #0c5460; }
        .badge-diff-neg { background: #f8d7da; color: #721c24; }

        .columns-grid {
            display: grid; grid-template-columns: 1fr 1fr;
            gap: 15px; margin: 20px 0;
        }

        .column-card {
            background: var(--gray-100); border: 1px solid var(--gray-200);
            border-radius: 10px; padding: 18px; border-left: 4px solid var(--gray-400);
        }

        .column-card.entry { border-left-color: var(--success); }
        .column-card.exit { border-left-color: var(--danger); }
        .column-card.calc { border-left-color: var(--primary); }
        .column-card.info-col { border-left-color: var(--info); }

        .column-card h5 { color: var(--secondary); margin-bottom: 6px; font-size: 14px; }
        .column-card p { font-size: 12px; color: var(--gray-600); margin-bottom: 0; }
        .column-card .col-fields { font-size: 11px; color: var(--gray-500); margin-top: 6px; }

        .faq-item {
            border: 1px solid var(--gray-200); border-radius: 12px;
            margin-bottom: 12px; overflow: hidden; transition: all 0.3s;
        }

        .faq-item:hover { border-color: var(--primary); box-shadow: 0 4px 15px rgba(123,91,123,0.12); }

        .faq-question {
            padding: 18px 20px; background: var(--gray-100); font-weight: 700;
            color: var(--secondary); cursor: pointer; display: flex; align-items: center; gap: 12px;
        }

        .faq-question .q-marker {
            background: var(--primary); color: white; width: 28px; height: 28px;
            border-radius: 8px; display: flex; align-items: center; justify-content: center;
            font-size: 14px; font-weight: 800; flex-shrink: 0;
        }

        .faq-answer {
            padding: 18px 20px; padding-left: 60px; color: var(--gray-700);
            font-size: 14px; border-top: 1px solid var(--gray-200);
        }

        .footer {
            background: var(--dark); color: var(--gray-500); padding: 40px; text-align: center;
        }

        .footer .company-name { font-size: 22px; font-weight: 800; color: var(--white); letter-spacing: 3px; margin-bottom: 5px; }
        .footer .tagline { font-size: 12px; letter-spacing: 2px; text-transform: uppercase; margin-bottom: 20px; }
        .footer-divider { width: 60px; height: 3px; background: var(--primary); margin: 20px auto; border-radius: 2px; }
        .footer p { font-size: 13px; margin-bottom: 5px; }

        .group-card {
            display: flex; align-items: flex-start; gap: 15px; padding: 20px;
            background: var(--gray-100); border-radius: 12px; margin: 10px 0;
        }

        .group-icon {
            width: 44px; height: 44px; border-radius: 10px;
            display: flex; align-items: center; justify-content: center;
            font-size: 20px; flex-shrink: 0;
        }

        .group-icon.user { background: linear-gradient(135deg, var(--primary-light), var(--primary)); color: white; }
        .group-icon.admin { background: linear-gradient(135deg, var(--primary-dark), var(--secondary)); color: white; }

        .workflow-container { overflow-x: auto; padding: 20px 0; }

        .workflow-diagram {
            display: flex; align-items: center; gap: 0; min-width: 700px; padding: 20px;
        }

        .workflow-step { display: flex; flex-direction: column; align-items: center; min-width: 130px; }

        .workflow-node {
            width: 80px; height: 80px; border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            font-size: 28px; color: white; box-shadow: 0 4px 15px rgba(0,0,0,0.15); z-index: 2;
        }

        .workflow-node.wizard { background: linear-gradient(135deg, var(--primary-light), var(--primary)); }
        .workflow-node.process { background: linear-gradient(135deg, #c9a84c, #b8943e); }
        .workflow-node.result { background: linear-gradient(135deg, #5a9e6f, #4a8e5f); }
        .workflow-node.analysis { background: linear-gradient(135deg, #6b8fa8, #5a7e97); }

        .workflow-label {
            margin-top: 10px; font-size: 11px; font-weight: 700;
            text-transform: uppercase; letter-spacing: 0.5px; color: var(--gray-700); text-align: center;
        }

        .workflow-arrow {
            width: 40px; height: 3px; background: var(--gray-400);
            position: relative; margin: 0 -5px; margin-bottom: 30px;
        }

        .workflow-arrow::after {
            content: ''; position: absolute; right: -6px; top: -4px;
            border: 5px solid transparent; border-left: 8px solid var(--gray-400);
        }

        @media (max-width: 768px) {
            .header-top { padding: 10px 20px; }
            .hero { padding: 30px 20px; }
            .hero h1 { font-size: 28px; }
            .nav-bar { padding: 0 15px; }
            .nav-bar ul li a { padding: 10px 12px; font-size: 11px; }
            .main-content { padding: 20px; }
            .section { padding: 25px; }
            .bidir-flow { grid-template-columns: 1fr; gap: 15px; }
            .columns-grid { grid-template-columns: 1fr; }
        }

        @media print {
            .header, .nav-bar { position: static; }
            .section { break-inside: avoid; box-shadow: none; border: 1px solid #ddd; }
        }
    </style>
</head>
<body>

<!-- ===================== HEADER ===================== -->
<div class="header">
    <div class="header-top">
        <div class="logo-area">
            <svg viewBox="0 0 240 48" xmlns="http://www.w3.org/2000/svg">
                <defs>
                    <linearGradient id="logoGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#9B7B9B"/>
                        <stop offset="100%" style="stop-color:#C9A0C9"/>
                    </linearGradient>
                </defs>
                <rect x="0" y="4" width="40" height="40" rx="10" fill="url(#logoGrad)"/>
                <text x="20" y="32" font-family="Arial, sans-serif" font-size="26" font-weight="800" fill="white" text-anchor="middle">C</text>
                <text x="52" y="22" font-family="Arial, sans-serif" font-size="18" font-weight="800" fill="white" letter-spacing="2">COONDEV</text>
                <text x="52" y="38" font-family="Arial, sans-serif" font-size="8" fill="rgba(255,255,255,0.8)" letter-spacing="2">COONSULTING &amp; DEVELOPMENT</text>
            </svg>
        </div>
        <div class="header-badge">GUIA FUNCIONAL v1.0</div>
    </div>
</div>

<!-- ===================== HERO ===================== -->
<div class="hero">
    <div class="hero-content">
        <div class="version-badge">Odoo 18 Enterprise</div>
        <h1>Kardex Inventory Valuation</h1>
        <p>Reporte tipo Kardex completo para la valoracion de inventarios con separacion de operaciones de manufactura, compras, ventas y ajustes.</p>
        <div class="hero-meta">
            <div class="hero-meta-item"><strong>Modulo</strong>Kardex Inventory Valuation</div>
            <div class="hero-meta-item"><strong>Categoria</strong>Inventario</div>
            <div class="hero-meta-item"><strong>Autor</strong>Coondev SAS</div>
            <div class="hero-meta-item"><strong>Licencia</strong>LGPL-3</div>
        </div>
    </div>
</div>

<!-- ===================== NAVIGATION ===================== -->
<div class="nav-bar">
    <ul>
        <li><a href="#introduccion">Introduccion</a></li>
        <li><a href="#flujos">Flujos de Trabajo</a></li>
        <li><a href="#parametros">Parametros</a></li>
        <li><a href="#guia-paso-a-paso">Guia Paso a Paso</a></li>
        <li><a href="#estados">Estados</a></li>
        <li><a href="#trazabilidad">Trazabilidad</a></li>
        <li><a href="#reportes">Reportes</a></li>
        <li><a href="#faq">Preguntas y Respuestas</a></li>
    </ul>
</div>

<!-- ===================== MAIN CONTENT ===================== -->
<div class="main-content">

    <!-- ========== 1. INTRODUCCION ========== -->
    <div class="section" id="introduccion">
        <div class="section-header">
            <div class="section-icon mauve">&#128203;</div>
            <h2>1. Introduccion <small>Vision general del modulo</small></h2>
        </div>

        <p>El modulo <strong>Kardex Inventory Valuation</strong> proporciona un reporte tipo Kardex completo para la valoracion de inventarios en Odoo 18. Permite consultar los movimientos de productos por periodo, almacen y ubicacion, desglosando todas las operaciones de entrada y salida con su respectiva valoracion monetaria.</p>

        <div class="highlight-box info">
            <strong>&#9432; Que resuelve este modulo?</strong>
            Centraliza la informacion de movimientos de inventario en un unico reporte tipo Kardex que muestra: inventario inicial, todas las entradas (compras, fabricacion, transferencias, ajustes), todas las salidas (ventas, consumo de materias primas, transferencias, bajas), el stock calculado, el inventario final fisico y las diferencias (sobrantes/faltantes), todo valorado monetariamente.
        </div>

        <h3 style="margin: 25px 0 15px; color: var(--secondary);">Capacidades Principales</h3>
        <div class="feature-grid">
            <div class="feature-card">
                <div class="icon">&#128202;</div>
                <h4>Reporte Kardex Completo</h4>
                <p>19 columnas de informacion que cubren inventario inicial, entradas, salidas, stock calculado, inventario final y diferencias con valoracion monetaria.</p>
            </div>
            <div class="feature-card">
                <div class="icon">&#128295;</div>
                <h4>Separacion de Manufactura</h4>
                <p>Distingue claramente entre productos fabricados (entradas) y materias primas consumidas (salidas) en procesos de produccion.</p>
            </div>
            <div class="feature-card">
                <div class="icon">&#128200;</div>
                <h4>Vistas de Analisis</h4>
                <p>Vista de lista tipo Excel, tabla dinamica para cruce de datos y graficos de barras para analisis visual por categoria.</p>
            </div>
            <div class="feature-card">
                <div class="icon">&#128270;</div>
                <h4>Filtros Avanzados</h4>
                <p>Filtra por productos con movimientos, con saldo final, con diferencias, faltantes, sobrantes o stock calculado negativo.</p>
            </div>
            <div class="feature-card">
                <div class="icon">&#9881;</div>
                <h4>Asistente de Generacion</h4>
                <p>Formulario intuitivo para seleccionar compania, almacenes, ubicaciones, rango de fechas y filtros de producto o categoria.</p>
            </div>
            <div class="feature-card">
                <div class="icon">&#128176;</div>
                <h4>Valoracion Precisa</h4>
                <p>Calcula costo unitario, costo promedio y costo total basado en las capas de valoracion de Odoo, compatible con FIFO, Promedio y Estandar.</p>
            </div>
        </div>

        <h3 style="margin: 25px 0 15px; color: var(--secondary);">Ecosistema del Modulo</h3>
        <p>Este modulo forma parte del ecosistema Kardex y se complementa con los modulos auxiliares de reporte de movimientos detallados y valoracion con soporte de manufactura.</p>

        <div class="table-responsive">
            <table>
                <thead>
                    <tr><th>Modulo Requerido</th><th>Descripcion</th><th>Tipo</th></tr>
                </thead>
                <tbody>
                    <tr><td><strong>Base</strong></td><td>Modulo base de Odoo</td><td>Nucleo</td></tr>
                    <tr><td><strong>Inventario</strong></td><td>Gestion de almacen, movimientos y ubicaciones</td><td>Nucleo</td></tr>
                    <tr><td><strong>Valoracion de Inventario</strong></td><td>Capas de valoracion y costeo de productos</td><td>Nucleo</td></tr>
                    <tr><td><strong>Fabricacion</strong></td><td>Ordenes de produccion y consumo de materias primas</td><td>Nucleo</td></tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- ========== 2. FLUJOS DE TRABAJO ========== -->
    <div class="section" id="flujos">
        <div class="section-header">
            <div class="section-icon deep">&#9881;</div>
            <h2>2. Flujos de Trabajo <small>Diagramas de procesos graficos</small></h2>
        </div>

        <h3 style="margin-bottom: 20px; color: var(--secondary);">2.1 Flujo General del Reporte</h3>
        <div class="workflow-container">
            <div class="workflow-diagram">
                <div class="workflow-step">
                    <div class="workflow-node wizard">&#128221;</div>
                    <div class="workflow-label">Asistente<br>de Consulta</div>
                </div>
                <div class="workflow-arrow"></div>
                <div class="workflow-step">
                    <div class="workflow-node process">&#9881;</div>
                    <div class="workflow-label">Generacion<br>del Reporte</div>
                </div>
                <div class="workflow-arrow"></div>
                <div class="workflow-step">
                    <div class="workflow-node result">&#128202;</div>
                    <div class="workflow-label">Vista de<br>Resultados</div>
                </div>
                <div class="workflow-arrow"></div>
                <div class="workflow-step">
                    <div class="workflow-node analysis">&#128200;</div>
                    <div class="workflow-label">Analisis y<br>Agrupacion</div>
                </div>
            </div>
        </div>

        <h3 style="margin: 35px 0 15px; color: var(--secondary);">2.2 Estructura del Reporte Kardex (Entradas y Salidas)</h3>
        <div class="bidir-flow">
            <div class="bidir-box entries">
                <h4>&#10133; Entradas</h4>
                <p style="font-size: 12px; color: var(--gray-600);">
                    Compras a Proveedores<br>
                    Compras Intercompania<br>
                    Transferencias de Entrada<br>
                    Fabricacion (Prod. Terminados)<br>
                    Altas de Inventario (Ajustes +)
                </p>
            </div>
            <div class="bidir-center">
                <div class="arrow">&#10230;</div>
                <div class="label">Suman</div>
            </div>
            <div class="bidir-box stock">
                <h4>&#128230; Stock</h4>
                <p style="font-size: 12px; color: var(--gray-600);">
                    <strong>Inv. Inicial</strong> + Entradas - Salidas<br>
                    = <strong>Stock Calculado</strong><br><br>
                    <strong>Inv. Final</strong> (fisico real)<br>
                    <strong>Diferencia</strong> = Final - Calculado
                </p>
            </div>
            <div class="bidir-center">
                <div class="arrow">&#10229;</div>
                <div class="label">Restan</div>
            </div>
            <div class="bidir-box exits">
                <h4>&#10134; Salidas</h4>
                <p style="font-size: 12px; color: var(--gray-600);">
                    Ventas a Clientes<br>
                    Ventas Internas (Bodega)<br>
                    Fabricacion (Mat. Prima)<br>
                    Transferencias de Salida<br>
                    Bajas de Inventario (Ajustes -)
                </p>
            </div>
        </div>

        <h3 style="margin: 35px 0 15px; color: var(--secondary);">2.3 Flujo Detallado de Generacion</h3>
        <div class="vflow">
            <div class="vflow-step" data-step="1">
                <h4>El usuario abre el Asistente de Consulta</h4>
                <p>Navegar a <strong>Gestion de Almacen &gt; Kardex &gt; Generar Reporte Kardex</strong>. Se despliega el formulario del asistente con los campos de configuracion.</p>
            </div>
            <div class="vflow-step" data-step="2">
                <h4>Configuracion de parametros</h4>
                <p>El usuario selecciona la compania, uno o mas almacenes, opcionalmente ubicaciones especificas, el rango de fechas y los filtros de productos (todos, por producto o por categoria).</p>
            </div>
            <div class="vflow-step" data-step="3">
                <h4>Validacion de datos</h4>
                <p>El sistema valida que: al menos un almacen este seleccionado, las fechas sean coherentes (inicio anterior o igual al fin), y si se filtro por producto o categoria, que al menos uno este seleccionado.</p>
            </div>
            <div class="vflow-step" data-step="4">
                <h4>Obtencion de productos</h4>
                <p>Segun el filtro seleccionado, el sistema obtiene la lista de productos almacenables a incluir en el reporte.</p>
            </div>
            <div class="vflow-step" data-step="5">
                <h4>Calculo del Inventario Inicial</h4>
                <p>Se ejecuta una consulta optimizada que calcula el saldo de existencias de todos los productos seleccionados <strong>antes de la fecha de inicio</strong> del periodo consultado. Esto incluye cantidad y valor monetario.</p>
            </div>
            <div class="vflow-step" data-step="6">
                <h4>Calculo de Movimientos del Periodo</h4>
                <p>Se ejecuta una segunda consulta optimizada que clasifica <strong>todos los movimientos dentro del periodo</strong> en sus categorias correspondientes: compras a proveedores, compras intercompania, transferencias de entrada, fabricacion (entrada), altas de inventario, bajas, ventas a clientes, ventas internas, fabricacion (salida) y transferencias de salida. Cada categoria incluye cantidad y valoracion monetaria.</p>
            </div>
            <div class="vflow-step" data-step="7">
                <h4>Generacion de lineas del reporte</h4>
                <p>Para cada producto y almacen, se crea una linea en el reporte con las 19 columnas de informacion. Se calculan automaticamente: el stock calculado (inicial + entradas - salidas), el inventario final fisico, la diferencia (sobrante/faltante), el costo promedio unitario y el costo total.</p>
            </div>
            <div class="vflow-step" data-step="8">
                <h4>Presentacion de resultados</h4>
                <p>Se abre la vista de lista con todas las lineas generadas. El usuario puede alternar entre vista de lista, tabla dinamica y grafico. Puede aplicar filtros, agrupar por categoria, almacen o metodo de costeo, y hacer clic en el boton de cada linea para ver los movimientos detallados del producto.</p>
            </div>
        </div>

        <h3 style="margin: 35px 0 15px; color: var(--secondary);">2.4 Las 19 Columnas del Reporte</h3>

        <h4 style="margin: 15px 0 10px; color: var(--gray-700);">Informacion General</h4>
        <div class="columns-grid">
            <div class="column-card info-col">
                <h5>1. Grupo (Categoria)</h5>
                <p>Categoria del producto para agrupacion y analisis</p>
            </div>
            <div class="column-card info-col">
                <h5>2. Codigo</h5>
                <p>Referencia interna del producto</p>
            </div>
            <div class="column-card info-col">
                <h5>3. Producto</h5>
                <p>Nombre completo del producto</p>
            </div>
            <div class="column-card info-col">
                <h5>4. Unidad de Medida</h5>
                <p>Unidad en que se miden las cantidades</p>
            </div>
        </div>

        <h4 style="margin: 15px 0 10px; color: var(--gray-700);">Inventario Inicial y Entradas</h4>
        <div class="columns-grid">
            <div class="column-card calc">
                <h5>5. Inventario Inicial</h5>
                <p>Cantidad y valor al inicio del periodo consultado</p>
                <div class="col-fields">Cantidad &bull; Valor &bull; Costo Unitario</div>
            </div>
            <div class="column-card entry">
                <h5>6. Compras a Proveedores</h5>
                <p>Recepciones de compras a proveedores externos</p>
                <div class="col-fields">Cantidad &bull; Valor &bull; Costo Unitario</div>
            </div>
            <div class="column-card entry">
                <h5>7. Compras Intercompania</h5>
                <p>Recepciones provenientes de otras companias del grupo</p>
                <div class="col-fields">Cantidad &bull; Valor &bull; Costo Unitario</div>
            </div>
            <div class="column-card entry">
                <h5>8. Transferencias de Entrada</h5>
                <p>Transferencias internas que ingresan al almacen</p>
                <div class="col-fields">Cantidad &bull; Valor &bull; Costo Unitario</div>
            </div>
            <div class="column-card entry">
                <h5>9. Fabricacion (Entrada)</h5>
                <p>Productos terminados ingresados por ordenes de produccion</p>
                <div class="col-fields">Cantidad &bull; Valor &bull; Costo Unitario</div>
            </div>
            <div class="column-card entry">
                <h5>9.5 Altas de Inventario</h5>
                <p>Ajustes positivos de inventario (entradas manuales)</p>
                <div class="col-fields">Cantidad &bull; Valor &bull; Costo Unitario</div>
            </div>
        </div>

        <h4 style="margin: 15px 0 10px; color: var(--gray-700);">Salidas</h4>
        <div class="columns-grid">
            <div class="column-card exit">
                <h5>10. Bajas de Inventario</h5>
                <p>Ajustes negativos, perdidas y mermas</p>
                <div class="col-fields">Cantidad &bull; Valor &bull; Costo Unitario</div>
            </div>
            <div class="column-card exit">
                <h5>11. Ventas a Clientes</h5>
                <p>Despachos por ordenes de venta a clientes externos</p>
                <div class="col-fields">Cantidad &bull; Valor &bull; Costo Unitario</div>
            </div>
            <div class="column-card exit">
                <h5>12. Ventas Internas (Bodega)</h5>
                <p>Salidas por operaciones internas entre bodegas</p>
                <div class="col-fields">Cantidad &bull; Valor &bull; Costo Unitario</div>
            </div>
            <div class="column-card exit">
                <h5>13. Fabricacion (Salida)</h5>
                <p>Materias primas consumidas en ordenes de produccion</p>
                <div class="col-fields">Cantidad &bull; Valor &bull; Costo Unitario</div>
            </div>
            <div class="column-card exit">
                <h5>14. Transferencias de Salida</h5>
                <p>Transferencias internas que salen del almacen</p>
                <div class="col-fields">Cantidad &bull; Valor &bull; Costo Unitario</div>
            </div>
        </div>

        <h4 style="margin: 15px 0 10px; color: var(--gray-700);">Calculos Finales</h4>
        <div class="columns-grid">
            <div class="column-card calc">
                <h5>15. Stock Calculado (Teorico)</h5>
                <p>Inventario Inicial + Total Entradas - Total Salidas</p>
                <div class="col-fields">Cantidad &bull; Valor</div>
            </div>
            <div class="column-card calc">
                <h5>16. Inventario Final (Fisico)</h5>
                <p>Existencia real al cierre del periodo consultado</p>
                <div class="col-fields">Cantidad &bull; Valor</div>
            </div>
            <div class="column-card calc">
                <h5>17. Sobrante / Faltante</h5>
                <p>Diferencia = Inventario Final - Stock Calculado</p>
                <div class="col-fields">Cantidad &bull; Valor</div>
            </div>
            <div class="column-card calc">
                <h5>18. Costo Promedio Unitario</h5>
                <p>Valor del inventario final dividido entre la cantidad final</p>
            </div>
            <div class="column-card calc">
                <h5>19. Costo Total</h5>
                <p>Valor monetario total del inventario final del producto</p>
            </div>
        </div>
    </div>

    <!-- ========== 3. PARAMETROS ========== -->
    <div class="section" id="parametros">
        <div class="section-header">
            <div class="section-icon warm">&#9881;</div>
            <h2>3. Parametros a Tener en Cuenta <small>Configuracion del asistente</small></h2>
        </div>

        <h3 style="margin-bottom: 15px; color: var(--secondary);">3.1 Configuracion General</h3>
        <div class="table-responsive">
            <table>
                <thead><tr><th>Parametro</th><th>Tipo</th><th>Requerido</th><th>Descripcion</th></tr></thead>
                <tbody>
                    <tr><td><strong>Compania</strong></td><td>Seleccion</td><td>Si</td><td>Compania para la cual se genera el reporte (por defecto la compania actual del usuario)</td></tr>
                    <tr><td><strong>Almacenes</strong></td><td>Seleccion multiple</td><td>Si</td><td>Uno o mas almacenes a incluir en el reporte</td></tr>
                    <tr><td><strong>Ubicaciones</strong></td><td>Seleccion multiple</td><td>No</td><td>Ubicaciones internas especificas dentro de los almacenes seleccionados. Si se deja vacio, se incluyen todas las ubicaciones del almacen.</td></tr>
                </tbody>
            </table>
        </div>

        <h3 style="margin: 30px 0 15px; color: var(--secondary);">3.2 Periodo de Consulta</h3>
        <div class="table-responsive">
            <table>
                <thead><tr><th>Parametro</th><th>Tipo</th><th>Requerido</th><th>Descripcion</th></tr></thead>
                <tbody>
                    <tr><td><strong>Fecha Desde</strong></td><td>Fecha</td><td>Si</td><td>Inicio del periodo a consultar (por defecto: fecha de hoy)</td></tr>
                    <tr><td><strong>Fecha Hasta</strong></td><td>Fecha</td><td>Si</td><td>Fin del periodo a consultar (por defecto: fecha de hoy). Debe ser igual o posterior a la Fecha Desde.</td></tr>
                </tbody>
            </table>
        </div>

        <h3 style="margin: 30px 0 15px; color: var(--secondary);">3.3 Filtros de Producto</h3>
        <div class="table-responsive">
            <table>
                <thead><tr><th>Parametro</th><th>Opciones</th><th>Descripcion</th></tr></thead>
                <tbody>
                    <tr><td><strong>Filtrar Por</strong></td><td><strong>Todos</strong> | <strong>Producto</strong> | <strong>Categoria</strong></td><td>Define si se incluyen todos los productos almacenables o se filtra por producto especifico o por categoria</td></tr>
                    <tr><td><strong>Productos</strong></td><td>Seleccion multiple</td><td>Solo visible si "Filtrar Por" = Producto. Permite seleccionar productos almacenables especificos.</td></tr>
                    <tr><td><strong>Categorias</strong></td><td>Seleccion multiple</td><td>Solo visible si "Filtrar Por" = Categoria. Permite seleccionar categorias de producto.</td></tr>
                </tbody>
            </table>
        </div>

        <h3 style="margin: 30px 0 15px; color: var(--secondary);">3.4 Opciones Adicionales</h3>
        <div class="table-responsive">
            <table>
                <thead><tr><th>Parametro</th><th>Valor Predeterminado</th><th>Descripcion</th></tr></thead>
                <tbody>
                    <tr><td><strong>Agrupar por Categoria</strong></td><td>Desactivado</td><td>Si se activa, el reporte se organiza agrupando los productos por su categoria</td></tr>
                    <tr><td><strong>Mostrar Lineas sin Movimiento</strong></td><td>Desactivado</td><td>Si se activa, incluye productos que no tuvieron ningun movimiento en el periodo consultado</td></tr>
                    <tr><td><strong>Usar Inventario Fisico</strong></td><td>Desactivado</td><td>Si se activa, calcula el inventario final basado en el conteo fisico real en lugar del saldo contable</td></tr>
                </tbody>
            </table>
        </div>

        <div class="highlight-box">
            <strong>&#9888; Nota sobre el Metodo de Costeo</strong>
            El reporte respeta el metodo de costeo configurado en la categoria de cada producto (FIFO, Costo Promedio o Costo Estandar). La columna "Metodo de Costeo" se muestra de forma opcional y permite agrupar por este criterio.
        </div>
    </div>

    <!-- ========== 4. GUIA PASO A PASO ========== -->
    <div class="section" id="guia-paso-a-paso">
        <div class="section-header">
            <div class="section-icon sage">&#128221;</div>
            <h2>4. Guia Paso a Paso <small>Uso del modulo</small></h2>
        </div>

        <h3 style="margin-bottom: 15px; color: var(--secondary);">Paso 1: Instalar el Modulo</h3>
        <div class="vflow">
            <div class="vflow-step" data-step="1">
                <h4>Instalar Kardex Inventory Valuation</h4>
                <p>Ir a <strong>Aplicaciones</strong>, buscar <em>"Kardex Inventory Valuation"</em> y hacer clic en <strong>Instalar</strong>. Se instalaran automaticamente las dependencias: Inventario, Valoracion de Inventario y Fabricacion.</p>
            </div>
        </div>

        <h3 style="margin: 30px 0 15px; color: var(--secondary);">Paso 2: Generar un Reporte Kardex</h3>
        <div class="vflow">
            <div class="vflow-step" data-step="1">
                <h4>Abrir el asistente</h4>
                <p>Navegar a <strong>Inventario &gt; Kardex &gt; Generar Reporte Kardex</strong>. Se abrira el formulario del asistente.</p>
            </div>
            <div class="vflow-step" data-step="2">
                <h4>Seleccionar compania y almacenes</h4>
                <p>Verificar que la <strong>Compania</strong> sea correcta. Seleccionar uno o mas <strong>Almacenes</strong> para el reporte. Opcionalmente, elegir <strong>Ubicaciones</strong> especificas.</p>
            </div>
            <div class="vflow-step" data-step="3">
                <h4>Definir el periodo</h4>
                <p>Establecer la <strong>Fecha Desde</strong> y <strong>Fecha Hasta</strong> del periodo que se desea consultar. Ejemplo: del 01/01/2026 al 31/01/2026 para un Kardex mensual.</p>
            </div>
            <div class="vflow-step" data-step="4">
                <h4>Aplicar filtros (opcional)</h4>
                <p>En <strong>Filtrar Por</strong>, elegir entre "Todos los productos", "Por Producto" (seleccionar productos puntuales) o "Por Categoria" (seleccionar categorias completas).</p>
            </div>
            <div class="vflow-step" data-step="5">
                <h4>Configurar opciones</h4>
                <p>Activar <strong>Agrupar por Categoria</strong> si se desea la organizacion por grupos. Activar <strong>Mostrar Lineas sin Movimiento</strong> para ver productos sin actividad en el periodo. Activar <strong>Usar Inventario Fisico</strong> para comparar contra conteo real.</p>
            </div>
            <div class="vflow-step" data-step="6">
                <h4>Generar el reporte</h4>
                <p>Presionar <strong>"Generar Reporte"</strong>. El sistema procesara la informacion y abrira la vista de resultados con todas las lineas del Kardex.</p>
            </div>
        </div>

        <h3 style="margin: 30px 0 15px; color: var(--secondary);">Paso 3: Analizar los Resultados</h3>
        <div class="vflow">
            <div class="vflow-step" data-step="1">
                <h4>Vista de Lista (tipo Excel)</h4>
                <p>La vista principal muestra todas las columnas del Kardex. Las cantidades y valores se pueden sumar por columna. Los colores indican: <span class="badge badge-diff-neg">Rojo</span> = faltantes, <span class="badge" style="background:#fff3cd;color:#856404;">Amarillo</span> = stock calculado negativo, <span class="badge badge-diff-pos">Azul</span> = sobrantes.</p>
            </div>
            <div class="vflow-step" data-step="2">
                <h4>Aplicar filtros y agrupaciones</h4>
                <p>Usar la barra de busqueda para filtrar por: <strong>Con Movimientos</strong> (activo por defecto), <strong>Con Saldo Final</strong>, <strong>Con Diferencias</strong>, <strong>Faltantes</strong>, <strong>Sobrantes</strong> o <strong>Stock Calculado Negativo</strong>. Agrupar por Categoria, Almacen o Metodo de Costeo.</p>
            </div>
            <div class="vflow-step" data-step="3">
                <h4>Alternar vistas</h4>
                <p>Cambiar a <strong>Tabla Dinamica</strong> para cruzar datos por categoria y producto con todas las medidas disponibles. Cambiar a <strong>Grafico de Barras</strong> para ver Costo Total, Valor del Inventario Final y Valor de Diferencias agrupados por categoria.</p>
            </div>
            <div class="vflow-step" data-step="4">
                <h4>Ver movimientos detallados</h4>
                <p>En cualquier linea del reporte, hacer clic en el boton <strong>Ver Movimientos Detallados</strong> (icono de lista) para abrir la lista completa de movimientos de inventario del producto en el periodo consultado.</p>
            </div>
        </div>

        <h3 style="margin: 30px 0 15px; color: var(--secondary);">Paso 4: Consultar Reportes Anteriores</h3>
        <div class="vflow">
            <div class="vflow-step" data-step="1">
                <h4>Acceder a reportes generados</h4>
                <p>Navegar a <strong>Inventario &gt; Kardex &gt; Ver Reportes Kardex</strong> para acceder a todos los registros de reportes generados anteriormente y consultarlos nuevamente.</p>
            </div>
        </div>

        <h3 style="margin: 30px 0 15px; color: var(--secondary);">Permisos de Acceso</h3>
        <div class="group-card">
            <div class="group-icon user">&#128100;</div>
            <div>
                <h4 style="color: var(--secondary); margin-bottom: 5px;">Usuario de Inventario</h4>
                <p style="font-size: 13px; color: var(--gray-600); margin-bottom: 0;">Puede generar reportes Kardex, consultar resultados, aplicar filtros, cambiar vistas y ver movimientos detallados de productos. Acceso completo al asistente y a los registros del reporte.</p>
            </div>
        </div>
        <div class="group-card">
            <div class="group-icon admin">&#128272;</div>
            <div>
                <h4 style="color: var(--secondary); margin-bottom: 5px;">Administrador de Inventario</h4>
                <p style="font-size: 13px; color: var(--gray-600); margin-bottom: 0;">Acceso completo: todos los permisos del Usuario de Inventario mas la capacidad de gestionar configuraciones avanzadas del modulo de inventario y valoracion.</p>
            </div>
        </div>
    </div>

    <!-- ========== 5. ESTADOS DEL PROCESO ========== -->
    <div class="section" id="estados">
        <div class="section-header">
            <div class="section-icon plum">&#128203;</div>
            <h2>5. Estados del Proceso <small>Ciclo de vida del reporte</small></h2>
        </div>

        <div class="highlight-box info">
            <strong>&#9432; Nota</strong>
            El modulo Kardex funciona como un reporte bajo demanda. No maneja un flujo de estados como un documento transaccional. El proceso es lineal: configurar, generar y consultar.
        </div>

        <h3 style="margin: 25px 0 15px; color: var(--secondary);">5.1 Etapas del Proceso de Generacion</h3>
        <div class="table-responsive">
            <table>
                <thead><tr><th>Etapa</th><th>Indicador</th><th>Descripcion</th><th>Siguiente Etapa</th></tr></thead>
                <tbody>
                    <tr><td><strong>Configuracion</strong></td><td><span class="badge badge-neutral">Configurar</span></td><td>El usuario completa los parametros del asistente (compania, almacenes, fechas, filtros)</td><td>Validacion</td></tr>
                    <tr><td><strong>Validacion</strong></td><td><span class="badge badge-entry">Validar</span></td><td>El sistema verifica que los parametros sean correctos y coherentes</td><td>Calculo o Error</td></tr>
                    <tr><td><strong>Calculo</strong></td><td><span class="badge" style="background:#f0e8d4;color:#7a6530;">Procesando</span></td><td>Se ejecutan las consultas de inventario inicial y movimientos del periodo</td><td>Resultados</td></tr>
                    <tr><td><strong>Resultados</strong></td><td><span class="badge" style="background:#d4e5da;color:#2a5a3a;">Completado</span></td><td>Las lineas del reporte se generan y se presentan en la vista de lista</td><td>Analisis</td></tr>
                    <tr><td><strong>Analisis</strong></td><td><span class="badge badge-calc">Consultar</span></td><td>El usuario aplica filtros, agrupa, cambia de vista y explora los datos</td><td>&mdash;</td></tr>
                </tbody>
            </table>
        </div>

        <h3 style="margin: 30px 0 15px; color: var(--secondary);">5.2 Indicadores Visuales en el Reporte</h3>
        <div class="table-responsive">
            <table>
                <thead><tr><th>Color</th><th>Indicador</th><th>Condicion</th><th>Significado</th></tr></thead>
                <tbody>
                    <tr><td><span class="badge badge-diff-neg">Rojo</span></td><td>Fila en rojo</td><td>La diferencia (Sobrante/Faltante) es negativa</td><td>El producto tiene <strong>faltante</strong>: el inventario fisico es menor al stock calculado</td></tr>
                    <tr><td><span class="badge" style="background:#fff3cd;color:#856404;">Amarillo</span></td><td>Fila en amarillo</td><td>El stock calculado es negativo</td><td>Alerta: las salidas superan las entradas mas el inventario inicial (posible error de registro)</td></tr>
                    <tr><td><span class="badge badge-diff-pos">Azul</span></td><td>Fila en azul</td><td>La diferencia (Sobrante/Faltante) es positiva</td><td>El producto tiene <strong>sobrante</strong>: el inventario fisico es mayor al stock calculado</td></tr>
                    <tr><td><span class="badge badge-neutral">Normal</span></td><td>Fila sin color</td><td>Sin diferencias y stock positivo</td><td>El inventario coincide entre lo calculado y lo fisico</td></tr>
                </tbody>
            </table>
        </div>

        <h3 style="margin: 30px 0 15px; color: var(--secondary);">5.3 Filtros Rapidos Disponibles</h3>
        <div class="table-responsive">
            <table>
                <thead><tr><th>Filtro</th><th>Descripcion</th><th>Activo por Defecto</th></tr></thead>
                <tbody>
                    <tr><td><strong>Con Movimientos</strong></td><td>Muestra solo productos que tuvieron al menos un movimiento en el periodo</td><td><strong>Si</strong></td></tr>
                    <tr><td><strong>Con Saldo Final</strong></td><td>Muestra solo productos con inventario final distinto de cero</td><td>No</td></tr>
                    <tr><td><strong>Con Diferencias</strong></td><td>Muestra solo productos donde el inventario final difiere del stock calculado</td><td>No</td></tr>
                    <tr><td><strong>Faltantes</strong></td><td>Muestra solo productos con diferencia negativa (faltante)</td><td>No</td></tr>
                    <tr><td><strong>Sobrantes</strong></td><td>Muestra solo productos con diferencia positiva (sobrante)</td><td>No</td></tr>
                    <tr><td><strong>Stock Calculado Negativo</strong></td><td>Muestra productos cuyo stock teorico resulta negativo</td><td>No</td></tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- ========== 6. TRAZABILIDAD ========== -->
    <div class="section" id="trazabilidad">
        <div class="section-header">
            <div class="section-icon sage">&#128269;</div>
            <h2>6. Trazabilidad <small>Seguimiento y detalle de movimientos</small></h2>
        </div>

        <p>El modulo Kardex permite rastrear el origen de cada cifra mostrada en el reporte hasta los movimientos individuales de inventario que la componen.</p>

        <h3 style="margin: 25px 0 15px; color: var(--secondary);">6.1 Boton "Ver Movimientos Detallados"</h3>
        <div class="highlight-box success">
            <strong>Trazabilidad por Producto</strong>
            Cada linea del reporte incluye un boton que abre la lista completa de movimientos de inventario del producto dentro del periodo y almacen consultado. Desde alli se puede acceder al documento origen de cada movimiento (orden de compra, orden de venta, orden de produccion, ajuste de inventario, transferencia, etc.).
        </div>

        <h3 style="margin: 25px 0 15px; color: var(--secondary);">6.2 Clasificacion de Movimientos</h3>
        <p>El sistema clasifica automaticamente cada movimiento de inventario en una de las siguientes categorias segun su origen y destino:</p>
        <div class="table-responsive">
            <table>
                <thead><tr><th>Categoria</th><th>Tipo</th><th>Como se Identifica</th></tr></thead>
                <tbody>
                    <tr><td><strong>Compras a Proveedores</strong></td><td><span class="badge badge-entry">Entrada</span></td><td>Recepcion desde ubicacion de proveedor hacia ubicacion interna</td></tr>
                    <tr><td><strong>Compras Intercompania</strong></td><td><span class="badge badge-entry">Entrada</span></td><td>Recepcion desde otra compania del grupo empresarial</td></tr>
                    <tr><td><strong>Transferencias de Entrada</strong></td><td><span class="badge badge-entry">Entrada</span></td><td>Movimiento desde otra ubicacion interna (otro almacen) hacia el almacen consultado</td></tr>
                    <tr><td><strong>Fabricacion (Entrada)</strong></td><td><span class="badge badge-entry">Entrada</span></td><td>Producto terminado ingresado desde ubicacion de produccion</td></tr>
                    <tr><td><strong>Altas de Inventario</strong></td><td><span class="badge badge-entry">Entrada</span></td><td>Ajuste positivo desde ubicacion virtual de inventario</td></tr>
                    <tr><td><strong>Bajas de Inventario</strong></td><td><span class="badge badge-exit">Salida</span></td><td>Ajuste negativo o perdida hacia ubicacion virtual de inventario</td></tr>
                    <tr><td><strong>Ventas a Clientes</strong></td><td><span class="badge badge-exit">Salida</span></td><td>Despacho desde ubicacion interna hacia ubicacion de cliente</td></tr>
                    <tr><td><strong>Ventas Internas</strong></td><td><span class="badge badge-exit">Salida</span></td><td>Salida interna entre bodegas del mismo almacen o grupo</td></tr>
                    <tr><td><strong>Fabricacion (Salida)</strong></td><td><span class="badge badge-exit">Salida</span></td><td>Materia prima consumida hacia ubicacion de produccion</td></tr>
                    <tr><td><strong>Transferencias de Salida</strong></td><td><span class="badge badge-exit">Salida</span></td><td>Movimiento desde el almacen consultado hacia otra ubicacion interna</td></tr>
                </tbody>
            </table>
        </div>

        <h3 style="margin: 25px 0 15px; color: var(--secondary);">6.3 Valoracion Monetaria</h3>
        <p>Cada movimiento se valoriza segun las capas de valoracion de Odoo:</p>
        <div class="feature-grid" style="grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));">
            <div class="feature-card">
                <h4>FIFO</h4>
                <p>Se valora segun el costo de la primera unidad disponible (primero en entrar, primero en salir)</p>
            </div>
            <div class="feature-card">
                <h4>Costo Promedio</h4>
                <p>Se valora segun el costo promedio ponderado de todas las unidades disponibles</p>
            </div>
            <div class="feature-card">
                <h4>Costo Estandar</h4>
                <p>Se valora al costo fijo definido en la ficha del producto</p>
            </div>
        </div>

        <h3 style="margin: 25px 0 15px; color: var(--secondary);">6.4 Formula del Stock Calculado</h3>
        <div class="highlight-box">
            <strong>Formula del Kardex</strong>
            <strong>Stock Calculado</strong> = Inventario Inicial + (Compras Proveedores + Compras Intercompania + Transferencias Entrada + Fabricacion Entrada + Altas Inventario) - (Bajas + Ventas Clientes + Ventas Internas + Fabricacion Salida + Transferencias Salida)<br><br>
            <strong>Diferencia</strong> = Inventario Final (Fisico) - Stock Calculado<br>
            <em>Positiva = Sobrante &bull; Negativa = Faltante</em>
        </div>
    </div>

    <!-- ========== 7. REPORTES ========== -->
    <div class="section" id="reportes">
        <div class="section-header">
            <div class="section-icon warm">&#128202;</div>
            <h2>7. Detalle de Reportes <small>Vistas y formatos disponibles</small></h2>
        </div>

        <h3 style="margin-bottom: 15px; color: var(--secondary);">7.1 Vista de Lista (Reporte Principal)</h3>
        <div class="feature-grid" style="grid-template-columns: 1fr 1fr;">
            <div class="feature-card">
                <h4>Formato Tipo Excel</h4>
                <p>19 columnas organizadas en secciones: Informacion General, Inventario Inicial, Entradas (5 tipos), Salidas (5 tipos), Calculos Finales (5 columnas). Todas las columnas de cantidad y valor ofrecen sumatorias al pie.</p>
            </div>
            <div class="feature-card">
                <h4>Columnas Opcionales</h4>
                <p>Las columnas de Valor y Costo Unitario de cada tipo de movimiento estan ocultas por defecto para no saturar la vista. Se pueden activar individualmente segun la necesidad de analisis.</p>
            </div>
        </div>

        <h3 style="margin: 25px 0 15px; color: var(--secondary);">7.2 Tabla Dinamica (Pivot)</h3>
        <div class="feature-grid" style="grid-template-columns: 1fr 1fr;">
            <div class="feature-card">
                <h4>Filas Predeterminadas</h4>
                <p>Categoria de producto y Producto como filas de analisis, permitiendo desglose jerarquico.</p>
            </div>
            <div class="feature-card">
                <h4>Medidas Disponibles</h4>
                <p>Todas las 19 columnas de cantidad y valor estan disponibles como medidas para cruzar con cualquier dimension.</p>
            </div>
        </div>

        <h3 style="margin: 25px 0 15px; color: var(--secondary);">7.3 Grafico de Barras</h3>
        <div class="feature-grid" style="grid-template-columns: 1fr;">
            <div class="feature-card">
                <h4>Analisis Visual por Categoria</h4>
                <p>Grafico de barras con el eje X mostrando las categorias de producto y tres medidas en el eje Y: <strong>Costo Total</strong>, <strong>Valor del Inventario Final</strong> y <strong>Valor de las Diferencias</strong>. Permite identificar rapidamente las categorias con mayor valor de inventario o con mayores diferencias.</p>
            </div>
        </div>

        <h3 style="margin: 25px 0 15px; color: var(--secondary);">7.4 Agrupaciones Disponibles</h3>
        <div class="table-responsive">
            <table>
                <thead><tr><th>Agrupacion</th><th>Descripcion</th></tr></thead>
                <tbody>
                    <tr><td><strong>Grupo (Categoria)</strong></td><td>Agrupa los productos por su categoria, mostrando subtotales por grupo</td></tr>
                    <tr><td><strong>Almacen</strong></td><td>Agrupa los productos por almacen, util cuando se consultan multiples almacenes</td></tr>
                    <tr><td><strong>Metodo de Costeo</strong></td><td>Agrupa por FIFO, Costo Promedio o Costo Estandar</td></tr>
                </tbody>
            </table>
        </div>

        <div class="highlight-box info">
            <strong>&#9432; Exportacion</strong>
            Desde cualquiera de las tres vistas (Lista, Tabla Dinamica, Grafico), se puede utilizar la funcionalidad nativa de Odoo para exportar los datos a formato Excel o CSV usando el boton de exportacion del menu de acciones.
        </div>
    </div>

    <!-- ========== 8. PREGUNTAS Y RESPUESTAS ========== -->
    <div class="section" id="faq">
        <div class="section-header">
            <div class="section-icon mauve">&#10067;</div>
            <h2>8. Preguntas y Respuestas <small>Preguntas frecuentes del modulo</small></h2>
        </div>

        <div class="faq-item">
            <div class="faq-question"><span class="q-marker">Q</span>Que diferencia hay entre "Stock Calculado" e "Inventario Final"?</div>
            <div class="faq-answer">
                El <strong>Stock Calculado</strong> es el resultado teorico de sumar el inventario inicial mas todas las entradas y restar todas las salidas del periodo. El <strong>Inventario Final</strong> es la existencia real (fisica o contable) del producto al cierre del periodo. La diferencia entre ambos se muestra en la columna <strong>Sobrante/Faltante</strong> e indica discrepancias que pueden requerir investigacion.
            </div>
        </div>

        <div class="faq-item">
            <div class="faq-question"><span class="q-marker">Q</span>Que significa que un producto aparezca en rojo?</div>
            <div class="faq-answer">
                Significa que el producto tiene un <strong>faltante</strong>: su inventario final fisico es menor que el stock calculado teoricamente. Esto puede indicar mermas no registradas, errores de conteo, robos o movimientos no documentados. Se recomienda investigar el producto haciendo clic en "Ver Movimientos Detallados".
            </div>
        </div>

        <div class="faq-item">
            <div class="faq-question"><span class="q-marker">Q</span>Que significa un "Stock Calculado Negativo" (fila amarilla)?</div>
            <div class="faq-answer">
                Un stock calculado negativo indica que las salidas registradas durante el periodo superan las entradas mas el inventario inicial. Esto generalmente senala un <strong>error de registro</strong> en el sistema: movimientos con fechas incorrectas, doble registro de salidas, o un inventario inicial incorrecto. Se recomienda revisar los movimientos del producto para identificar y corregir la anomalia.
            </div>
        </div>

        <div class="faq-item">
            <div class="faq-question"><span class="q-marker">Q</span>Como se calcula el inventario inicial?</div>
            <div class="faq-answer">
                El inventario inicial se calcula sumando todos los movimientos de inventario confirmados del producto <strong>anteriores a la fecha de inicio</strong> del periodo consultado, para las ubicaciones internas de los almacenes seleccionados. Es decir, es el saldo acumulado historico hasta el dia anterior al inicio del reporte.
            </div>
        </div>

        <div class="faq-item">
            <div class="faq-question"><span class="q-marker">Q</span>Puedo generar el Kardex para un solo producto?</div>
            <div class="faq-answer">
                <strong>Si.</strong> En el asistente, cambiar "Filtrar Por" a <strong>Producto</strong> y seleccionar el producto deseado. Se generara el reporte unicamente para ese producto, mostrando toda la informacion de sus 19 columnas.
            </div>
        </div>

        <div class="faq-item">
            <div class="faq-question"><span class="q-marker">Q</span>Que tipo de productos se incluyen en el reporte?</div>
            <div class="faq-answer">
                El reporte incluye unicamente <strong>productos almacenables</strong> (aquellos que tienen activada la opcion de ser rastreados en inventario). Los productos de tipo servicio o consumible no almacenable no aparecen en el Kardex ya que no generan movimientos de inventario.
            </div>
        </div>

        <div class="faq-item">
            <div class="faq-question"><span class="q-marker">Q</span>Como se distinguen las compras intercompania de las compras normales?</div>
            <div class="faq-answer">
                El sistema identifica las <strong>compras intercompania</strong> como aquellas recepciones cuyo proveedor pertenece a otra compania del mismo grupo empresarial en Odoo. Las <strong>compras a proveedores</strong> normales son recepciones de proveedores externos al grupo. Esta separacion permite analizar las adquisiciones internas vs. externas.
            </div>
        </div>

        <div class="faq-item">
            <div class="faq-question"><span class="q-marker">Q</span>Que diferencia hay entre "Fabricacion (Entrada)" y "Fabricacion (Salida)"?</div>
            <div class="faq-answer">
                <strong>Fabricacion (Entrada)</strong> registra los <strong>productos terminados</strong> que ingresan al inventario como resultado de una orden de produccion completada. <strong>Fabricacion (Salida)</strong> registra las <strong>materias primas y componentes</strong> que se consumieron para fabricar esos productos. Esta separacion es fundamental para entender el impacto de la manufactura en el inventario.
            </div>
        </div>

        <div class="faq-item">
            <div class="faq-question"><span class="q-marker">Q</span>Se puede consultar el Kardex de multiples almacenes a la vez?</div>
            <div class="faq-answer">
                <strong>Si.</strong> El asistente permite seleccionar multiples almacenes. Se generara una linea por cada combinacion de producto y almacen. Se puede usar la agrupacion por <strong>Almacen</strong> para ver los resultados organizados por bodega, con subtotales por cada una.
            </div>
        </div>

        <div class="faq-item">
            <div class="faq-question"><span class="q-marker">Q</span>El reporte soporta multi-compania?</div>
            <div class="faq-answer">
                <strong>Si.</strong> El asistente requiere seleccionar una compania y muestra unicamente los almacenes y ubicaciones que pertenecen a dicha compania. Los movimientos se filtran automaticamente por compania, garantizando que el reporte sea consistente con la informacion contable de la empresa seleccionada.
            </div>
        </div>

        <div class="faq-item">
            <div class="faq-question"><span class="q-marker">Q</span>Puedo exportar el Kardex a Excel?</div>
            <div class="faq-answer">
                <strong>Si.</strong> Desde la vista de lista o la tabla dinamica, se puede usar el boton de exportacion nativo de Odoo (en el menu de acciones) para descargar los datos en formato Excel o CSV. Todas las columnas visibles se incluiran en la exportacion.
            </div>
        </div>

        <div class="faq-item">
            <div class="faq-question"><span class="q-marker">Q</span>Que pasa si genero un reporte nuevo? Se pierden los anteriores?</div>
            <div class="faq-answer">
                Los registros del reporte son temporales y se gestionan automaticamente por Odoo. Sin embargo, puede acceder a los reportes generados recientemente desde el menu <strong>Kardex &gt; Ver Reportes Kardex</strong>. Para conservar los datos de forma permanente, se recomienda exportar el reporte a Excel antes de generar uno nuevo.
            </div>
        </div>
    </div>

</div>

<!-- ===================== FOOTER ===================== -->
<div class="footer">
    <div class="company-name">COONDEV</div>
    <div class="tagline">Coonsulting &amp; Development</div>
    <div class="footer-divider"></div>
    <p>Guia Funcional - Kardex Inventory Valuation</p>
    <p>Ecosistema: <strong>Kardex Inventory Valuation</strong> | Odoo 18 Enterprise</p>
    <p style="margin-top: 15px; font-size: 12px; opacity: 0.7;">Documento generado &bull; Febrero 2026</p>
</div>

</body>
</html>
