<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guia Funcional - Cierre de Caja POS | COONDEV</title>
    <style>
        :root {
            --primary: #7B5B7B;
            --primary-dark: #5E3F5E;
            --primary-light: #9B7B9B;
            --secondary: #4A2D4A;
            --accent: #C9A0C9;
            --dark: #2E1A2E;
            --gray-100: #f8f7f9;
            --gray-200: #eae7ec;
            --gray-300: #ddd8df;
            --gray-400: #c4bdc7;
            --gray-500: #9e95a1;
            --gray-600: #6c636f;
            --gray-700: #4a434d;
            --gray-800: #342e37;
            --white: #ffffff;
            --success: #5a9e6f;
            --warning: #c9a84c;
            --danger: #b5545a;
            --info: #6b8fa8;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; line-height: 1.7; color: var(--gray-800); background: var(--gray-100); }

        .header { background: linear-gradient(135deg, var(--secondary) 0%, var(--primary) 50%, var(--primary-light) 100%); color: var(--white); position: sticky; top: 0; z-index: 1000; box-shadow: 0 4px 20px rgba(75,45,75,0.25); }
        .header-top { display: flex; align-items: center; justify-content: space-between; padding: 15px 40px; max-width: 1400px; margin: 0 auto; }
        .logo-area { display: flex; align-items: center; gap: 20px; }
        .logo-area svg { height: 48px; width: auto; }
        .header-badge { background: rgba(255,255,255,0.15); border: 1px solid rgba(255,255,255,0.3); padding: 6px 16px; border-radius: 20px; font-size: 12px; letter-spacing: 1px; }

        .hero { background: linear-gradient(135deg, var(--secondary) 0%, var(--primary) 40%, var(--primary-light) 100%); color: var(--white); padding: 60px 40px; text-align: center; position: relative; overflow: hidden; }
        .hero::before { content: ''; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%; background: radial-gradient(circle, rgba(255,255,255,0.06) 0%, transparent 60%); animation: pulse 8s ease-in-out infinite; }
        @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.1); } }
        .hero-content { position: relative; z-index: 1; max-width: 900px; margin: 0 auto; }
        .hero h1 { font-size: 38px; font-weight: 800; margin-bottom: 15px; text-shadow: 0 2px 10px rgba(0,0,0,0.2); }
        .hero .version-badge { display: inline-block; background: rgba(255,255,255,0.2); border: 1px solid rgba(255,255,255,0.3); padding: 4px 14px; border-radius: 15px; font-size: 13px; margin-bottom: 20px; }
        .hero p { font-size: 18px; opacity: 0.9; max-width: 700px; margin: 0 auto; }
        .hero-meta { display: flex; justify-content: center; gap: 20px; margin-top: 30px; flex-wrap: wrap; }
        .hero-meta-item { background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); padding: 10px 20px; border-radius: 10px; font-size: 13px; }
        .hero-meta-item strong { display: block; font-size: 11px; text-transform: uppercase; letter-spacing: 1px; opacity: 0.7; margin-bottom: 2px; }

        .nav-bar { background: var(--white); border-bottom: 2px solid var(--gray-200); padding: 0 40px; position: sticky; top: 78px; z-index: 999; box-shadow: 0 2px 10px rgba(0,0,0,0.05); }
        .nav-bar ul { list-style: none; display: flex; max-width: 1400px; margin: 0 auto; overflow-x: auto; }
        .nav-bar ul li a { display: block; padding: 14px 20px; color: var(--gray-600); text-decoration: none; font-size: 13px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; border-bottom: 3px solid transparent; transition: all 0.3s; white-space: nowrap; }
        .nav-bar ul li a:hover { color: var(--primary); border-bottom-color: var(--primary); background: rgba(123,91,123,0.06); }

        .main-content { max-width: 1200px; margin: 0 auto; padding: 40px; }
        .section { background: var(--white); border-radius: 16px; padding: 40px; margin-bottom: 30px; box-shadow: 0 2px 20px rgba(75,45,75,0.06); border: 1px solid var(--gray-200); }
        .section-header { display: flex; align-items: center; gap: 15px; margin-bottom: 30px; padding-bottom: 20px; border-bottom: 2px solid var(--gray-200); }
        .section-icon { width: 50px; height: 50px; border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 24px; flex-shrink: 0; }
        .section-icon.mauve { background: linear-gradient(135deg, var(--primary-light), var(--primary)); color: white; }
        .section-icon.deep { background: linear-gradient(135deg, var(--primary), var(--secondary)); color: white; }
        .section-icon.warm { background: linear-gradient(135deg, #c9a84c, #b8943e); color: white; }
        .section-icon.plum { background: linear-gradient(135deg, #8e6b8e, #6b3f6b); color: white; }
        .section-icon.sage { background: linear-gradient(135deg, #7ba88e, #5a9e6f); color: white; }
        .section-icon.soft { background: linear-gradient(135deg, var(--accent), var(--primary-light)); color: white; }
        .section-header h2 { font-size: 24px; color: var(--secondary); font-weight: 700; }
        .section-header h2 small { display: block; font-size: 12px; color: var(--gray-500); font-weight: 400; text-transform: uppercase; letter-spacing: 2px; margin-top: 4px; }
        .section p { margin-bottom: 15px; color: var(--gray-700); }

        .highlight-box { background: linear-gradient(135deg, #f5eef5, #faf5fa); border-left: 4px solid var(--primary); padding: 15px 20px; border-radius: 0 10px 10px 0; margin: 20px 0; }
        .highlight-box.info { background: linear-gradient(135deg, #eee8f0, #f5eff7); border-left-color: var(--info); }
        .highlight-box.success { background: linear-gradient(135deg, #e8f0eb, #eff5f1); border-left-color: var(--success); }
        .highlight-box.danger { background: linear-gradient(135deg, #f0e8e9, #f7eff0); border-left-color: var(--danger); }
        .highlight-box strong { display: block; margin-bottom: 5px; color: var(--gray-800); }

        .feature-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin: 20px 0; }
        .feature-card { background: var(--gray-100); border: 1px solid var(--gray-200); border-radius: 12px; padding: 25px; transition: all 0.3s; }
        .feature-card:hover { transform: translateY(-3px); box-shadow: 0 8px 25px rgba(75,45,75,0.12); border-color: var(--primary); }
        .feature-card .icon { font-size: 28px; margin-bottom: 12px; }
        .feature-card h4 { color: var(--secondary); margin-bottom: 8px; font-size: 16px; }
        .feature-card p { font-size: 13px; color: var(--gray-600); margin-bottom: 0; }

        .vflow { position: relative; padding-left: 60px; margin: 30px 0; }
        .vflow::before { content: ''; position: absolute; left: 28px; top: 0; bottom: 0; width: 3px; background: linear-gradient(to bottom, var(--primary), var(--secondary), var(--accent)); border-radius: 2px; }
        .vflow-step { position: relative; margin-bottom: 25px; padding: 20px; background: var(--gray-100); border-radius: 12px; border: 1px solid var(--gray-200); }
        .vflow-step::before { content: attr(data-step); position: absolute; left: -48px; top: 20px; width: 36px; height: 36px; border-radius: 50%; background: var(--primary); color: white; display: flex; align-items: center; justify-content: center; font-weight: 800; font-size: 14px; box-shadow: 0 3px 10px rgba(123,91,123,0.35); z-index: 2; }
        .vflow-step h4 { color: var(--secondary); margin-bottom: 8px; font-size: 16px; }
        .vflow-step p { font-size: 14px; color: var(--gray-600); margin-bottom: 0; }

        .table-responsive { overflow-x: auto; margin: 20px 0; }
        table { width: 100%; border-collapse: collapse; font-size: 14px; }
        table thead th { background: var(--secondary); color: var(--white); padding: 12px 16px; text-align: left; font-weight: 600; font-size: 12px; text-transform: uppercase; letter-spacing: 0.5px; }
        table thead th:first-child { border-radius: 10px 0 0 0; }
        table thead th:last-child { border-radius: 0 10px 0 0; }
        table tbody td { padding: 12px 16px; border-bottom: 1px solid var(--gray-200); }
        table tbody tr:hover { background: var(--gray-100); }
        table tbody tr:last-child td:first-child { border-radius: 0 0 0 10px; }
        table tbody tr:last-child td:last-child { border-radius: 0 0 10px 0; }

        .badge { display: inline-block; padding: 4px 10px; border-radius: 6px; font-size: 11px; font-weight: 700; text-transform: uppercase; letter-spacing: 0.5px; }
        .badge-complete { background: #dce8e0; color: #2a5a3a; }
        .badge-partial { background: #f0e8d4; color: #7a6530; }
        .badge-pending { background: #f0dfe0; color: #7a3035; }
        .badge-info { background: #dce8ef; color: #3a5f75; }
        .badge-ic { background: #e5dae5; color: #5E3F5E; }

        .flow-horizontal { display: flex; align-items: center; justify-content: center; gap: 0; margin: 30px 0; flex-wrap: nowrap; overflow-x: auto; padding: 15px 0; }
        .flow-box { min-width: 160px; padding: 18px; border-radius: 12px; text-align: center; font-size: 13px; font-weight: 600; color: white; flex-shrink: 0; }
        .flow-box.co-a { background: linear-gradient(135deg, var(--info), #4a7a95); }
        .flow-box.process { background: linear-gradient(135deg, var(--primary), var(--secondary)); }
        .flow-box.co-b { background: linear-gradient(135deg, var(--success), #4a8e5f); }
        .flow-box.alert { background: linear-gradient(135deg, var(--warning), #b89a3e); }
        .flow-box.return { background: linear-gradient(135deg, var(--danger), #a5444a); }
        .flow-arrow { font-size: 24px; color: var(--gray-400); margin: 0 5px; flex-shrink: 0; }
        .flow-box small { display: block; font-weight: 400; font-size: 11px; margin-top: 4px; opacity: 0.9; }

        .faq-item { border: 1px solid var(--gray-200); border-radius: 12px; margin-bottom: 12px; overflow: hidden; transition: all 0.3s; }
        .faq-item:hover { border-color: var(--primary); box-shadow: 0 4px 15px rgba(123,91,123,0.12); }
        .faq-question { padding: 18px 20px; background: var(--gray-100); font-weight: 700; color: var(--secondary); display: flex; align-items: center; gap: 12px; }
        .faq-question .q-marker { background: var(--primary); color: white; width: 28px; height: 28px; border-radius: 8px; display: flex; align-items: center; justify-content: center; font-size: 14px; font-weight: 800; flex-shrink: 0; }
        .faq-answer { padding: 18px 20px; padding-left: 60px; color: var(--gray-700); font-size: 14px; border-top: 1px solid var(--gray-200); }

        .group-card { display: flex; align-items: flex-start; gap: 15px; padding: 20px; background: var(--gray-100); border-radius: 12px; margin: 10px 0; }
        .group-icon { width: 44px; height: 44px; border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 20px; flex-shrink: 0; }
        .group-icon.user { background: linear-gradient(135deg, var(--primary-light), var(--primary)); color: white; }
        .group-icon.admin { background: linear-gradient(135deg, var(--primary-dark), var(--secondary)); color: white; }

        .footer { background: var(--dark); color: var(--gray-500); padding: 40px; text-align: center; }
        .footer .company-name { font-size: 22px; font-weight: 800; color: var(--white); letter-spacing: 3px; margin-bottom: 5px; }
        .footer .tagline { font-size: 12px; letter-spacing: 2px; text-transform: uppercase; margin-bottom: 20px; }
        .footer-divider { width: 60px; height: 3px; background: var(--primary); margin: 20px auto; border-radius: 2px; }
        .footer p { font-size: 13px; margin-bottom: 5px; }

        @media (max-width: 768px) {
            .header-top { padding: 10px 20px; } .hero { padding: 30px 20px; } .hero h1 { font-size: 26px; }
            .nav-bar { padding: 0 15px; } .main-content { padding: 20px; } .section { padding: 25px; }
            .flow-horizontal { flex-direction: column; }
        }
        @media print { .header, .nav-bar { position: static; } .section { break-inside: avoid; box-shadow: none; border: 1px solid #ddd; } }
    </style>
</head>
<body>

<!-- HEADER -->
<div class="header">
    <div class="header-top">
        <div class="logo-area">
            <svg viewBox="0 0 240 48" xmlns="http://www.w3.org/2000/svg">
                <defs><linearGradient id="logoGrad" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#9B7B9B"/><stop offset="100%" style="stop-color:#C9A0C9"/></linearGradient></defs>
                <rect x="0" y="4" width="40" height="40" rx="10" fill="url(#logoGrad)"/>
                <text x="20" y="32" font-family="Arial,sans-serif" font-size="26" font-weight="800" fill="white" text-anchor="middle">C</text>
                <text x="52" y="22" font-family="Arial,sans-serif" font-size="18" font-weight="800" fill="white" letter-spacing="2">COONDEV</text>
                <text x="52" y="38" font-family="Arial,sans-serif" font-size="8" fill="rgba(255,255,255,0.8)" letter-spacing="2">COONSULTING &amp; DEVELOPMENT</text>
            </svg>
        </div>
        <div class="header-badge">GUIA FUNCIONAL v1.0</div>
    </div>
</div>

<!-- HERO -->
<div class="hero">
    <div class="hero-content">
        <div class="version-badge">Odoo 18 Enterprise &bull; Modulo Unico</div>
        <h1>Cierre de Caja</h1>
        <p>Resumen detallado de sesion al cerrar el Punto de Venta: propinas, descuentos, cancelaciones, consumo administrativo y desglose de ventas por canal, todo en espanol.</p>
        <div class="hero-meta">
            <div class="hero-meta-item"><strong>Modulo</strong>Recibo de Ventas POS</div>
            <div class="hero-meta-item"><strong>Categoria</strong>Punto de Venta</div>
            <div class="hero-meta-item"><strong>Autor</strong>Coondev</div>
            <div class="hero-meta-item"><strong>Licencia</strong>LGPL-3</div>
        </div>
    </div>
</div>

<!-- NAVIGATION -->
<div class="nav-bar">
    <ul>
        <li><a href="#introduccion">Introduccion</a></li>
        <li><a href="#flujos">Flujos de Trabajo</a></li>
        <li><a href="#parametros">Parametros</a></li>
        <li><a href="#guia-paso-a-paso">Guia Paso a Paso</a></li>
        <li><a href="#estados">Estados</a></li>
        <li><a href="#trazabilidad">Trazabilidad</a></li>
        <li><a href="#reportes">Reportes</a></li>
        <li><a href="#faq">Preguntas y Respuestas</a></li>
    </ul>
</div>

<!-- MAIN CONTENT -->
<div class="main-content">

    <!-- 1. INTRODUCCION -->
    <div class="section" id="introduccion">
        <div class="section-header">
            <div class="section-icon mauve">&#128179;</div>
            <h2>1. Introduccion <small>Vision general del modulo</small></h2>
        </div>

        <p>El modulo de <strong>Cierre de Caja</strong> extiende el reporte de cierre de sesion del Punto de Venta de Odoo 18, agregando secciones detalladas en espanol que permiten al cajero y al administrador conocer con precision todo lo ocurrido durante la jornada: propinas recibidas, descuentos otorgados, cancelaciones registradas, consumo administrativo y un desglose de ventas segun el canal de atencion.</p>

        <div class="highlight-box info">
            <strong>&#9432; Que resuelve este modulo?</strong>
            El reporte estandar de cierre de sesion de Odoo muestra unicamente los totales de venta y los metodos de pago. Para operaciones de restaurante y comercio, se necesita informacion adicional: cuanto se recibio en propinas, que descuentos se otorgaron (y quien los autorizo), que productos se cancelaron, cuanto fue consumo interno y como se distribuyeron las ventas entre mesas y mostrador. Este modulo agrega toda esa informacion al reporte de cierre de forma automatica.
        </div>

        <h3 style="margin: 25px 0 15px; color: var(--secondary);">Capacidades Principales</h3>
        <div class="feature-grid">
            <div class="feature-card">
                <div class="icon">&#128176;</div>
                <h4>Calculo de Propinas</h4>
                <p>Calcula automaticamente el total de propinas recibidas en la sesion a partir de los metodos de pago registrados en cada orden.</p>
            </div>
            <div class="feature-card">
                <div class="icon">&#127991;</div>
                <h4>Detalle de Descuentos</h4>
                <p>Lista todos los productos con descuento aplicado, mostrando el porcentaje, el monto descontado y el cajero que autorizo cada descuento.</p>
            </div>
            <div class="feature-card">
                <div class="icon">&#10060;</div>
                <h4>Registro de Cancelaciones</h4>
                <p>Identifica las lineas canceladas (cantidades negativas) y las presenta con el valor absoluto del monto para facilitar la lectura.</p>
            </div>
            <div class="feature-card">
                <div class="icon">&#127869;</div>
                <h4>Consumo Administrativo</h4>
                <p>Identifica productos de consumo interno y suma automaticamente su valor total para diferenciarlo de las ventas reales.</p>
            </div>
            <div class="feature-card">
                <div class="icon">&#128200;</div>
                <h4>Ventas por Canal</h4>
                <p>Separa las ventas entre "Mesa" (ordenes con mesa asignada) y "Mostrador" (ordenes sin mesa), mostrando cantidad de ordenes y monto por canal.</p>
            </div>
            <div class="feature-card">
                <div class="icon">&#128196;</div>
                <h4>Reporte en Espanol</h4>
                <p>Toda la informacion se presenta en espanol con formato de moneda local, integr√°ndose al reporte nativo de Odoo sin reemplazarlo.</p>
            </div>
        </div>

        <h3 style="margin: 25px 0 15px; color: var(--secondary);">Dependencias del Modulo</h3>
        <div class="table-responsive">
            <table>
                <thead><tr><th>Modulo Requerido</th><th>Descripcion</th><th>Uso</th></tr></thead>
                <tbody>
                    <tr><td><strong>Punto de Venta</strong></td><td>Funcionalidad base del terminal de venta</td><td>Reporte de sesion, ordenes, pagos</td></tr>
                    <tr><td><strong>Restaurante (PdV)</strong></td><td>Extension de restaurante para Punto de Venta</td><td>Identificacion de mesas para canal de ventas</td></tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- 2. FLUJOS DE TRABAJO -->
    <div class="section" id="flujos">
        <div class="section-header">
            <div class="section-icon deep">&#9881;</div>
            <h2>2. Flujos de Trabajo <small>Diagramas de procesos graficos</small></h2>
        </div>

        <h3 style="margin-bottom: 20px; color: var(--secondary);">2.1 Flujo General del Cierre de Caja</h3>
        <div class="flow-horizontal">
            <div class="flow-box co-a">Operacion del PdV<small>Ventas, descuentos, propinas</small></div>
            <div class="flow-arrow">&#10230;</div>
            <div class="flow-box process">Cerrar Sesion<small>El cajero inicia el cierre</small></div>
            <div class="flow-arrow">&#10230;</div>
            <div class="flow-box alert">Calculos Automaticos<small>Propinas, descuentos, canales</small></div>
            <div class="flow-arrow">&#10230;</div>
            <div class="flow-box co-b">Reporte Detallado<small>5 secciones en espanol</small></div>
            <div class="flow-arrow">&#10230;</div>
            <div class="flow-box return">Sesion Cerrada<small>Datos bloqueados</small></div>
        </div>

        <h3 style="margin: 35px 0 15px; color: var(--secondary);">2.2 Flujo Detallado: Generacion del Reporte de Cierre</h3>
        <div class="vflow">
            <div class="vflow-step" data-step="1">
                <h4>El cajero opera el Punto de Venta durante la jornada</h4>
                <p>Se registran ventas normales, se aplican descuentos a productos, se reciben propinas en los metodos de pago, se realizan cancelaciones y se registran consumos internos. El sistema almacena toda esta informacion automaticamente en cada orden.</p>
            </div>
            <div class="vflow-step" data-step="2">
                <h4>El cajero inicia el cierre de sesion</h4>
                <p>Al presionar "Cerrar" en el Punto de Venta, el sistema prepara el reporte de cierre. Se recopilan todas las ordenes de la sesion activa.</p>
            </div>
            <div class="vflow-step" data-step="3">
                <h4>El sistema calcula las propinas</h4>
                <p>Recorre los pagos de cada orden buscando metodos de pago de tipo "propina". Suma todos los montos de propina de la sesion y los presenta como total.</p>
            </div>
            <div class="vflow-step" data-step="4">
                <h4>El sistema identifica descuentos, cancelaciones y consumo administrativo</h4>
                <p>Filtra las lineas de productos con descuento (porcentaje mayor a cero), las lineas con cantidad negativa (cancelaciones) y las lineas cuyo producto contiene la palabra "administrativo" en su nombre (consumo interno).</p>
            </div>
            <div class="vflow-step" data-step="5">
                <h4>El sistema separa las ventas por canal</h4>
                <p>Clasifica las ordenes en dos canales: <strong>"Mesa"</strong> (ordenes que tienen una mesa asignada en el restaurante) y <strong>"Mostrador"</strong> (ordenes sin mesa asignada). Calcula la cantidad de ordenes y el monto total por canal.</p>
            </div>
            <div class="vflow-step" data-step="6">
                <h4>Se genera el reporte con las 5 secciones adicionales</h4>
                <p>El reporte nativo de Odoo se extiende con las secciones: Propinas, Descuentos, Cancelaciones, Consumo Administrativo y Ventas por Canal. Cada seccion solo se muestra si tiene datos relevantes.</p>
            </div>
        </div>
    </div>

    <!-- 3. PARAMETROS -->
    <div class="section" id="parametros">
        <div class="section-header">
            <div class="section-icon warm">&#9881;</div>
            <h2>3. Parametros a Tener en Cuenta <small>Configuracion del modulo</small></h2>
        </div>

        <h3 style="margin-bottom: 15px; color: var(--secondary);">3.1 Deteccion de Propinas</h3>
        <div class="highlight-box info">
            <strong>&#9432; Como se detectan las propinas</strong>
            El sistema busca en los pagos de cada orden aquellos cuyo metodo de pago contenga la palabra "tip" (sin importar mayusculas o minusculas). Tambien detecta propinas registradas directamente en el campo de propina del pago. Para que las propinas se calculen correctamente, el metodo de pago de propinas debe contener la palabra "tip" en su nombre.
        </div>

        <h3 style="margin: 30px 0 15px; color: var(--secondary);">3.2 Deteccion de Consumo Administrativo</h3>
        <div class="highlight-box">
            <strong>&#9888; Convencion de Nombres</strong>
            El sistema identifica lineas de consumo administrativo buscando la palabra <strong>"administrativo"</strong> en el nombre del producto (sin importar mayusculas). Para que esta seccion funcione correctamente, los productos de consumo interno deben tener la palabra "administrativo" en su nombre (ejemplo: "Almuerzo Administrativo", "Consumo Administrativo Empleados").
        </div>

        <h3 style="margin: 30px 0 15px; color: var(--secondary);">3.3 Deteccion de Cancelaciones</h3>
        <div class="table-responsive">
            <table>
                <thead><tr><th>Criterio</th><th>Descripcion</th></tr></thead>
                <tbody>
                    <tr><td><strong>Lineas con cantidad negativa</strong></td><td>Una linea de orden con cantidad menor a cero se considera cancelacion. El reporte muestra el valor absoluto para facilitar la lectura.</td></tr>
                </tbody>
            </table>
        </div>

        <h3 style="margin: 30px 0 15px; color: var(--secondary);">3.4 Deteccion de Descuentos</h3>
        <div class="table-responsive">
            <table>
                <thead><tr><th>Criterio</th><th>Descripcion</th></tr></thead>
                <tbody>
                    <tr><td><strong>Lineas con descuento mayor a cero</strong></td><td>Cualquier linea de producto que tenga un porcentaje de descuento aplicado se incluye en la seccion de descuentos del reporte.</td></tr>
                    <tr><td><strong>Monto del descuento</strong></td><td>Se calcula como: precio unitario x cantidad x porcentaje de descuento / 100</td></tr>
                    <tr><td><strong>Autorizador</strong></td><td>Se muestra el nombre del usuario que registro la orden (cajero responsable)</td></tr>
                </tbody>
            </table>
        </div>

        <h3 style="margin: 30px 0 15px; color: var(--secondary);">3.5 Clasificacion de Canales de Venta</h3>
        <div class="table-responsive">
            <table>
                <thead><tr><th>Canal</th><th>Criterio</th><th>Descripcion</th></tr></thead>
                <tbody>
                    <tr><td><strong>Mesa</strong></td><td>La orden tiene una mesa asignada</td><td>Ordenes de comensales sentados en mesas del restaurante</td></tr>
                    <tr><td><strong>Mostrador</strong></td><td>La orden no tiene mesa asignada</td><td>Ordenes para llevar, pedidos de mostrador o ventas sin mesa</td></tr>
                </tbody>
            </table>
        </div>

        <h3 style="margin: 30px 0 15px; color: var(--secondary);">3.6 Visibilidad en Vistas del Sistema</h3>
        <div class="table-responsive">
            <table>
                <thead><tr><th>Vista</th><th>Campo Agregado</th><th>Descripcion</th></tr></thead>
                <tbody>
                    <tr><td><strong>Formulario de Orden</strong></td><td>Monto de Propina</td><td>Se muestra despues del total de la orden (solo lectura)</td></tr>
                    <tr><td><strong>Lista de Ordenes</strong></td><td>Monto de Propina</td><td>Columna opcional con suma total al pie ("Total Propinas")</td></tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- 4. GUIA PASO A PASO -->
    <div class="section" id="guia-paso-a-paso">
        <div class="section-header">
            <div class="section-icon sage">&#128221;</div>
            <h2>4. Guia Paso a Paso <small>Operacion del cierre de caja</small></h2>
        </div>

        <h3 style="margin-bottom: 15px; color: var(--secondary);">Paso 1: Operar el Punto de Venta Normalmente</h3>
        <div class="vflow">
            <div class="vflow-step" data-step="1">
                <h4>Abrir la sesion del Punto de Venta</h4>
                <p>Ingrese al modulo de Punto de Venta y abra una nueva sesion. Registre el saldo inicial de caja si corresponde.</p>
            </div>
            <div class="vflow-step" data-step="2">
                <h4>Registrar ventas durante la jornada</h4>
                <p>Procese las ordenes normalmente: productos, descuentos, propinas, cancelaciones. El modulo recopilara toda esta informacion automaticamente al momento del cierre.</p>
            </div>
        </div>

        <h3 style="margin: 30px 0 15px; color: var(--secondary);">Paso 2: Iniciar el Cierre de Sesion</h3>
        <div class="vflow">
            <div class="vflow-step" data-step="1">
                <h4>Presionar el boton de Cierre</h4>
                <p>En la interfaz del Punto de Venta, presione el boton de <strong>"Cerrar"</strong> para iniciar el proceso de cierre de la sesion activa.</p>
            </div>
            <div class="vflow-step" data-step="2">
                <h4>Completar el conteo de caja</h4>
                <p>Si el sistema solicita conteo de caja, ingrese los montos contados por cada metodo de pago. El sistema comparara con los totales registrados.</p>
            </div>
            <div class="vflow-step" data-step="3">
                <h4>Confirmar el cierre</h4>
                <p>Al confirmar, el sistema procesa todas las ordenes de la sesion y genera el reporte de cierre con las secciones extendidas en espanol.</p>
            </div>
        </div>

        <h3 style="margin: 30px 0 15px; color: var(--secondary);">Paso 3: Consultar el Reporte de Cierre</h3>
        <div class="vflow">
            <div class="vflow-step" data-step="1">
                <h4>Acceder al reporte de la sesion</h4>
                <p>Desde el modulo Punto de Venta, abra la sesion cerrada y acceda al reporte de <strong>"Detalles de Ventas de la Sesion"</strong>. Las secciones extendidas aparecen despues de la seccion de pagos.</p>
            </div>
            <div class="vflow-step" data-step="2">
                <h4>Revisar cada seccion</h4>
                <p>El reporte muestra en orden: Propinas, Descuentos (con detalle por producto), Cancelaciones (con detalle por producto), Consumo Administrativo y Ventas por Canal. Solo se muestran las secciones que tienen datos.</p>
            </div>
            <div class="vflow-step" data-step="3">
                <h4>Imprimir o exportar</h4>
                <p>El reporte puede imprimirse directamente desde el navegador o descargarse como PDF. Es compatible con impresoras termicas de 80mm y con formatos de pagina estandar.</p>
            </div>
        </div>

        <h3 style="margin: 30px 0 15px; color: var(--secondary);">Permisos de Acceso</h3>
        <div class="group-card">
            <div class="group-icon user">&#128100;</div>
            <div>
                <h4 style="color: var(--secondary); margin-bottom: 5px;">Usuario del Punto de Venta</h4>
                <p style="font-size: 13px; color: var(--gray-600); margin-bottom: 0;">Puede operar el Punto de Venta, cerrar su sesion y consultar el reporte de cierre con las secciones extendidas. Ve el monto de propinas en las ordenes.</p>
            </div>
        </div>
        <div class="group-card">
            <div class="group-icon admin">&#128272;</div>
            <div>
                <h4 style="color: var(--secondary); margin-bottom: 5px;">Administrador del Punto de Venta</h4>
                <p style="font-size: 13px; color: var(--gray-600); margin-bottom: 0;"><strong>Acceso completo.</strong> Puede consultar reportes de cierre de cualquier sesion, ver la columna de propinas con totalizacion en la vista de lista de ordenes y acceder a todas las sesiones historicas.</p>
            </div>
        </div>
    </div>

    <!-- 5. ESTADOS -->
    <div class="section" id="estados">
        <div class="section-header">
            <div class="section-icon plum">&#128203;</div>
            <h2>5. Estados del Proceso <small>Ciclo de vida de la sesion</small></h2>
        </div>

        <h3 style="margin-bottom: 15px; color: var(--secondary);">5.1 Estados de la Sesion del Punto de Venta</h3>
        <div class="table-responsive">
            <table>
                <thead><tr><th>Estado</th><th>Indicador</th><th>Descripcion</th><th>Reporte Disponible</th></tr></thead>
                <tbody>
                    <tr>
                        <td><strong>Abierta</strong></td>
                        <td><span class="badge badge-complete">En Curso</span></td>
                        <td>La sesion esta activa y el cajero esta operando el Punto de Venta</td>
                        <td>No (los datos aun estan en construccion)</td>
                    </tr>
                    <tr>
                        <td><strong>En Cierre</strong></td>
                        <td><span class="badge badge-partial">Cerrando</span></td>
                        <td>El cajero inicio el proceso de cierre y esta completando el conteo de caja</td>
                        <td>No (el cierre aun no se ha confirmado)</td>
                    </tr>
                    <tr>
                        <td><strong>Cerrada y Registrada</strong></td>
                        <td><span class="badge badge-ic">Cerrada</span></td>
                        <td>La sesion fue cerrada exitosamente. Todos los datos estan bloqueados</td>
                        <td><strong>Si</strong> - Reporte completo con las 5 secciones</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <h3 style="margin: 30px 0 15px; color: var(--secondary);">5.2 Secciones del Reporte y su Visibilidad</h3>
        <div class="table-responsive">
            <table>
                <thead><tr><th>Seccion</th><th>Condicion de Visibilidad</th><th>Datos que Muestra</th></tr></thead>
                <tbody>
                    <tr>
                        <td><strong>Propinas</strong></td>
                        <td>Se muestra si el total de propinas es mayor a cero</td>
                        <td>Monto total de propinas de la sesion</td>
                    </tr>
                    <tr>
                        <td><strong>Descuentos</strong></td>
                        <td>Se muestra si existen lineas con descuento</td>
                        <td>Orden, producto, cantidad, porcentaje, monto del descuento, cajero autorizador</td>
                    </tr>
                    <tr>
                        <td><strong>Cancelaciones</strong></td>
                        <td>Se muestra si existen lineas con cantidad negativa</td>
                        <td>Orden, producto, cantidad cancelada, valor de la cancelacion</td>
                    </tr>
                    <tr>
                        <td><strong>Consumo Administrativo</strong></td>
                        <td>Se muestra si existen productos administrativos</td>
                        <td>Monto total del consumo administrativo de la sesion</td>
                    </tr>
                    <tr>
                        <td><strong>Ventas por Canal</strong></td>
                        <td>Se muestra siempre</td>
                        <td>Canal (Mesa / Mostrador), cantidad de ordenes, monto total por canal y total general</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- 6. TRAZABILIDAD -->
    <div class="section" id="trazabilidad">
        <div class="section-header">
            <div class="section-icon sage">&#128269;</div>
            <h2>6. Trazabilidad <small>Seguimiento completo de la sesion</small></h2>
        </div>

        <p>El modulo proporciona trazabilidad completa de todas las operaciones realizadas durante la sesion, permitiendo reconstruir exactamente lo sucedido en la jornada.</p>

        <h3 style="margin: 25px 0 15px; color: var(--secondary);">6.1 Trazabilidad de Propinas</h3>
        <div class="highlight-box success">
            <strong>Seguimiento desde la Orden</strong>
            Cada orden muestra su monto de propina en el formulario individual. En la vista de lista de ordenes, la columna de propinas incluye suma total al pie. El reporte de cierre consolida el total de propinas de toda la sesion.
        </div>

        <h3 style="margin: 25px 0 15px; color: var(--secondary);">6.2 Trazabilidad de Descuentos</h3>
        <div class="table-responsive">
            <table>
                <thead><tr><th>Dato Rastreable</th><th>Donde se Consulta</th></tr></thead>
                <tbody>
                    <tr><td><strong>Numero de orden que contiene el descuento</strong></td><td>Columna "Orden" en la seccion de Descuentos del reporte</td></tr>
                    <tr><td><strong>Producto al que se aplico el descuento</strong></td><td>Columna "Producto" en la seccion de Descuentos</td></tr>
                    <tr><td><strong>Cantidad del producto</strong></td><td>Columna "Cantidad" en la seccion de Descuentos</td></tr>
                    <tr><td><strong>Porcentaje de descuento aplicado</strong></td><td>Columna "Descuento %" en la seccion de Descuentos</td></tr>
                    <tr><td><strong>Monto total descontado</strong></td><td>Columna "Monto Descuento" y total al pie de la seccion</td></tr>
                    <tr><td><strong>Cajero que autorizo el descuento</strong></td><td>Columna "Autorizado por" en la seccion de Descuentos</td></tr>
                </tbody>
            </table>
        </div>

        <h3 style="margin: 25px 0 15px; color: var(--secondary);">6.3 Trazabilidad de Cancelaciones</h3>
        <div class="table-responsive">
            <table>
                <thead><tr><th>Dato Rastreable</th><th>Donde se Consulta</th></tr></thead>
                <tbody>
                    <tr><td><strong>Numero de orden con la cancelacion</strong></td><td>Columna "Orden" en la seccion de Cancelaciones</td></tr>
                    <tr><td><strong>Producto cancelado</strong></td><td>Columna "Producto" en la seccion de Cancelaciones</td></tr>
                    <tr><td><strong>Cantidad cancelada</strong></td><td>Columna "Cantidad" (se muestra en valor absoluto)</td></tr>
                    <tr><td><strong>Valor de la cancelacion</strong></td><td>Columna "Valor" y total al pie de la seccion</td></tr>
                </tbody>
            </table>
        </div>

        <h3 style="margin: 25px 0 15px; color: var(--secondary);">6.4 Consulta Historica</h3>
        <div class="highlight-box info">
            <strong>&#9432; Reportes de sesiones anteriores</strong>
            Los reportes de cierre de sesiones ya cerradas permanecen disponibles indefinidamente. Desde el modulo Punto de Venta se pueden consultar sesiones anteriores y acceder a sus reportes detallados con todas las secciones extendidas. Esto permite auditorias y analisis retrospectivos.
        </div>
    </div>

    <!-- 7. REPORTES -->
    <div class="section" id="reportes">
        <div class="section-header">
            <div class="section-icon warm">&#128202;</div>
            <h2>7. Detalle de Reportes <small>Estructura del reporte de cierre</small></h2>
        </div>

        <h3 style="margin-bottom: 15px; color: var(--secondary);">7.1 Estructura del Reporte de Cierre Extendido</h3>
        <p>El reporte se genera como una extension del reporte nativo de Odoo. Las secciones se agregan <strong>despues</strong> de la seccion de metodos de pago. El orden de presentacion es:</p>

        <div class="vflow">
            <div class="vflow-step" data-step="1">
                <h4>Seccion: PROPINAS</h4>
                <p>Tabla con una fila que muestra el <strong>Total de Propinas</strong> de la sesion. Solo se muestra si el monto es mayor a cero. El valor se formatea con el simbolo de moneda de la sesion.</p>
            </div>
            <div class="vflow-step" data-step="2">
                <h4>Seccion: DESCUENTOS</h4>
                <p>Tabla detallada con columnas: <strong>Orden</strong> (referencia), <strong>Producto</strong> (nombre), <strong>Cantidad</strong>, <strong>Descuento %</strong> (porcentaje aplicado), <strong>Monto Descuento</strong> (valor calculado) y <strong>Autorizado por</strong> (nombre del cajero). Incluye fila de total al pie con la suma de todos los montos de descuento.</p>
            </div>
            <div class="vflow-step" data-step="3">
                <h4>Seccion: CANCELACIONES</h4>
                <p>Tabla detallada con columnas: <strong>Orden</strong> (referencia), <strong>Producto</strong> (nombre), <strong>Cantidad</strong> (valor absoluto) y <strong>Valor</strong> (monto absoluto). Incluye fila de total al pie con la suma de todos los valores cancelados.</p>
            </div>
            <div class="vflow-step" data-step="4">
                <h4>Seccion: CONSUMO ADMINISTRATIVO</h4>
                <p>Tabla con una fila que muestra el <strong>Total Consumo Administrativo</strong>. Solo se muestra si existen productos con la palabra "administrativo" en su nombre. El valor se formatea con el simbolo de moneda.</p>
            </div>
            <div class="vflow-step" data-step="5">
                <h4>Seccion: VENTAS POR CANAL</h4>
                <p>Tabla con dos filas: <strong>Mesa</strong> (ordenes con mesa asignada) y <strong>Mostrador</strong> (ordenes sin mesa). Cada fila muestra la cantidad de ordenes y el monto total. Incluye fila de <strong>Total General</strong> al pie con la suma de ambos canales. Esta seccion siempre se muestra.</p>
            </div>
        </div>

        <h3 style="margin: 30px 0 15px; color: var(--secondary);">7.2 Informacion Adicional en Vistas del Sistema</h3>
        <div class="feature-grid" style="grid-template-columns: 1fr 1fr;">
            <div class="feature-card">
                <h4>Vista de Formulario de Orden</h4>
                <p>Se agrega el campo <strong>"Monto de Propina"</strong> despues del total de la orden. Campo de solo lectura que se calcula automaticamente a partir de los pagos.</p>
            </div>
            <div class="feature-card">
                <h4>Vista de Lista de Ordenes</h4>
                <p>Se agrega la columna <strong>"Monto de Propina"</strong> con suma total al pie de la tabla. Columna opcional que puede mostrarse u ocultarse segun preferencia.</p>
            </div>
        </div>

        <h3 style="margin: 30px 0 15px; color: var(--secondary);">7.3 Formato de Impresion</h3>
        <div class="highlight-box">
            <strong>&#9888; Compatibilidad de impresion</strong>
            El reporte utiliza tablas con estilos compatibles con impresoras termicas de 80mm y con formatos de pagina estandar (A4, Carta). Los valores monetarios se formatean automaticamente segun la moneda configurada en la sesion del Punto de Venta.
        </div>
    </div>

    <!-- 8. FAQ -->
    <div class="section" id="faq">
        <div class="section-header">
            <div class="section-icon mauve">&#10067;</div>
            <h2>8. Preguntas y Respuestas <small>Preguntas frecuentes del modulo</small></h2>
        </div>

        <div class="faq-item">
            <div class="faq-question"><span class="q-marker">Q</span>Donde puedo ver el reporte de cierre con las secciones extendidas?</div>
            <div class="faq-answer">Al cerrar la sesion del Punto de Venta, acceda al reporte de <strong>"Detalles de Ventas de la Sesion"</strong> desde la sesion cerrada. Las secciones de Propinas, Descuentos, Cancelaciones, Consumo Administrativo y Ventas por Canal aparecen despues de la seccion de metodos de pago.</div>
        </div>

        <div class="faq-item">
            <div class="faq-question"><span class="q-marker">Q</span>Por que no aparece la seccion de Propinas en mi reporte?</div>
            <div class="faq-answer">La seccion de Propinas solo se muestra si el total de propinas de la sesion es mayor a cero. Verifique que el <strong>metodo de pago de propinas</strong> contenga la palabra "tip" en su nombre. Si usa otro nombre, el sistema no podra identificar las propinas automaticamente.</div>
        </div>

        <div class="faq-item">
            <div class="faq-question"><span class="q-marker">Q</span>Como se identifica el consumo administrativo?</div>
            <div class="faq-answer">El sistema busca la palabra <strong>"administrativo"</strong> en el nombre del producto (sin importar mayusculas o minusculas). Para que un producto se contabilice como consumo interno, su nombre debe contener esa palabra. Ejemplo: "Almuerzo Administrativo", "Consumo Administrativo".</div>
        </div>

        <div class="faq-item">
            <div class="faq-question"><span class="q-marker">Q</span>Que diferencia hay entre "Mesa" y "Mostrador" en Ventas por Canal?</div>
            <div class="faq-answer"><strong>"Mesa"</strong> agrupa las ordenes que tienen una mesa asignada en el restaurante (comensales sentados). <strong>"Mostrador"</strong> agrupa las ordenes sin mesa asignada (pedidos para llevar, ventas de mostrador, entregas). La separacion es automatica segun la configuracion de la orden.</div>
        </div>

        <div class="faq-item">
            <div class="faq-question"><span class="q-marker">Q</span>Quien es el "Autorizado por" en la seccion de Descuentos?</div>
            <div class="faq-answer">Es el <strong>nombre del usuario</strong> (cajero) que estaba operando el Punto de Venta al momento de registrar la orden con descuento. Esto permite saber quien autorizo cada descuento para efectos de auditoria y control.</div>
        </div>

        <div class="faq-item">
            <div class="faq-question"><span class="q-marker">Q</span>Como se detectan las cancelaciones?</div>
            <div class="faq-answer">Las cancelaciones se identifican como <strong>lineas de orden con cantidad negativa</strong>. Cuando un producto se cancela o se devuelve en el Punto de Venta, se genera una linea con cantidad negativa. El reporte muestra estas cantidades en valor absoluto para facilitar la lectura.</div>
        </div>

        <div class="faq-item">
            <div class="faq-question"><span class="q-marker">Q</span>El modulo modifica el recibo individual de cada venta?</div>
            <div class="faq-answer"><strong>No.</strong> Este modulo solo extiende el <strong>reporte de cierre de sesion</strong> (resumen al final de la jornada). Los recibos individuales que se imprimen despues de cada venta no se modifican. Para personalizar recibos individuales existe otro modulo especializado.</div>
        </div>

        <div class="faq-item">
            <div class="faq-question"><span class="q-marker">Q</span>Puedo consultar reportes de sesiones anteriores?</div>
            <div class="faq-answer"><strong>Si.</strong> Los reportes de cierre de sesiones ya cerradas permanecen disponibles de forma permanente. Desde el modulo Punto de Venta puede navegar a sesiones anteriores y acceder a sus reportes detallados con todas las secciones extendidas.</div>
        </div>

        <div class="faq-item">
            <div class="faq-question"><span class="q-marker">Q</span>El reporte muestra secciones vacias?</div>
            <div class="faq-answer"><strong>No.</strong> Cada seccion tiene una condicion de visibilidad. Si no hubo propinas, esa seccion no aparece. Si no hubo descuentos, esa seccion no aparece. La unica excepcion es <strong>Ventas por Canal</strong>, que siempre se muestra (incluso si todos los valores son cero).</div>
        </div>

        <div class="faq-item">
            <div class="faq-question"><span class="q-marker">Q</span>En que moneda se muestran los valores del reporte?</div>
            <div class="faq-answer">Los valores se formatean automaticamente con la <strong>moneda configurada en la sesion</strong> del Punto de Venta. El sistema aplica el simbolo de moneda, los separadores de miles y los decimales segun la configuracion de la empresa.</div>
        </div>
    </div>

</div>

<!-- FOOTER -->
<div class="footer">
    <div class="company-name">COONDEV</div>
    <div class="tagline">Coonsulting &amp; Development</div>
    <div class="footer-divider"></div>
    <p>Guia Funcional - Cierre de Caja</p>
    <p>Modulo: <strong>Recibo de Ventas POS en Espanol</strong> | Odoo 18</p>
    <p style="margin-top: 15px; font-size: 12px; opacity: 0.7;">Documento generado &bull; Febrero 2026</p>
</div>

</body>
</html>
