<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guia Funcional - Reportes Venta Restaurantes / Programas de Lealtad y Descuentos | COONDEV</title>
    <style>
        :root {
            --primary: #7B5B7B;
            --primary-dark: #5E3F5E;
            --primary-light: #9B7B9B;
            --secondary: #4A2D4A;
            --accent: #C9A0C9;
            --dark: #2E1A2E;
            --gray-100: #f8f7f9;
            --gray-200: #eae7ec;
            --gray-300: #ddd8df;
            --gray-400: #c4bdc7;
            --gray-500: #9e95a1;
            --gray-600: #6c636f;
            --gray-700: #4a434d;
            --gray-800: #342e37;
            --white: #ffffff;
            --success: #5a9e6f;
            --warning: #c9a84c;
            --danger: #b5545a;
            --info: #6b8fa8;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; line-height: 1.7; color: var(--gray-800); background: var(--gray-100); }

        .header { background: linear-gradient(135deg, var(--secondary) 0%, var(--primary) 50%, var(--primary-light) 100%); color: var(--white); position: sticky; top: 0; z-index: 1000; box-shadow: 0 4px 20px rgba(75,45,75,0.25); }
        .header-top { display: flex; align-items: center; justify-content: space-between; padding: 15px 40px; max-width: 1400px; margin: 0 auto; }
        .logo-area { display: flex; align-items: center; gap: 20px; }
        .logo-area svg { height: 48px; width: auto; }
        .header-badge { background: rgba(255,255,255,0.15); border: 1px solid rgba(255,255,255,0.3); padding: 6px 16px; border-radius: 20px; font-size: 12px; letter-spacing: 1px; }

        .hero { background: linear-gradient(135deg, var(--secondary) 0%, var(--primary) 40%, var(--primary-light) 100%); color: var(--white); padding: 60px 40px; text-align: center; position: relative; overflow: hidden; }
        .hero::before { content: ''; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%; background: radial-gradient(circle, rgba(255,255,255,0.06) 0%, transparent 60%); animation: pulse 8s ease-in-out infinite; }
        @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.1); } }
        .hero-content { position: relative; z-index: 1; max-width: 900px; margin: 0 auto; }
        .hero h1 { font-size: 38px; font-weight: 800; margin-bottom: 15px; text-shadow: 0 2px 10px rgba(0,0,0,0.2); }
        .hero .version-badge { display: inline-block; background: rgba(255,255,255,0.2); border: 1px solid rgba(255,255,255,0.3); padding: 4px 14px; border-radius: 15px; font-size: 13px; margin-bottom: 20px; }
        .hero p { font-size: 18px; opacity: 0.9; max-width: 700px; margin: 0 auto; }
        .hero-meta { display: flex; justify-content: center; gap: 20px; margin-top: 30px; flex-wrap: wrap; }
        .hero-meta-item { background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); padding: 10px 20px; border-radius: 10px; font-size: 13px; }
        .hero-meta-item strong { display: block; font-size: 11px; text-transform: uppercase; letter-spacing: 1px; opacity: 0.7; margin-bottom: 2px; }

        .nav-bar { background: var(--white); border-bottom: 2px solid var(--gray-200); padding: 0 40px; position: sticky; top: 78px; z-index: 999; box-shadow: 0 2px 10px rgba(0,0,0,0.05); }
        .nav-bar ul { list-style: none; display: flex; max-width: 1400px; margin: 0 auto; overflow-x: auto; }
        .nav-bar ul li a { display: block; padding: 14px 20px; color: var(--gray-600); text-decoration: none; font-size: 13px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; border-bottom: 3px solid transparent; transition: all 0.3s; white-space: nowrap; }
        .nav-bar ul li a:hover { color: var(--primary); border-bottom-color: var(--primary); background: rgba(123,91,123,0.06); }

        .main-content { max-width: 1200px; margin: 0 auto; padding: 40px; }
        .section { background: var(--white); border-radius: 16px; padding: 40px; margin-bottom: 30px; box-shadow: 0 2px 20px rgba(75,45,75,0.06); border: 1px solid var(--gray-200); }
        .section-header { display: flex; align-items: center; gap: 15px; margin-bottom: 30px; padding-bottom: 20px; border-bottom: 2px solid var(--gray-200); }
        .section-icon { width: 50px; height: 50px; border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 24px; flex-shrink: 0; }
        .section-icon.mauve { background: linear-gradient(135deg, var(--primary-light), var(--primary)); color: white; }
        .section-icon.deep { background: linear-gradient(135deg, var(--primary), var(--secondary)); color: white; }
        .section-icon.warm { background: linear-gradient(135deg, #c9a84c, #b8943e); color: white; }
        .section-icon.plum { background: linear-gradient(135deg, #8e6b8e, #6b3f6b); color: white; }
        .section-icon.sage { background: linear-gradient(135deg, #7ba88e, #5a9e6f); color: white; }
        .section-icon.soft { background: linear-gradient(135deg, var(--accent), var(--primary-light)); color: white; }
        .section-header h2 { font-size: 24px; color: var(--secondary); font-weight: 700; }
        .section-header h2 small { display: block; font-size: 12px; color: var(--gray-500); font-weight: 400; text-transform: uppercase; letter-spacing: 2px; margin-top: 4px; }
        .section p { margin-bottom: 15px; color: var(--gray-700); }

        .highlight-box { background: linear-gradient(135deg, #f5eef5, #faf5fa); border-left: 4px solid var(--primary); padding: 15px 20px; border-radius: 0 10px 10px 0; margin: 20px 0; }
        .highlight-box.info { background: linear-gradient(135deg, #eee8f0, #f5eff7); border-left-color: var(--info); }
        .highlight-box.success { background: linear-gradient(135deg, #e8f0eb, #eff5f1); border-left-color: var(--success); }
        .highlight-box.danger { background: linear-gradient(135deg, #f0e8e9, #f7eff0); border-left-color: var(--danger); }
        .highlight-box strong { display: block; margin-bottom: 5px; color: var(--gray-800); }

        .feature-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin: 20px 0; }
        .feature-card { background: var(--gray-100); border: 1px solid var(--gray-200); border-radius: 12px; padding: 25px; transition: all 0.3s; }
        .feature-card:hover { transform: translateY(-3px); box-shadow: 0 8px 25px rgba(75,45,75,0.12); border-color: var(--primary); }
        .feature-card .icon { font-size: 28px; margin-bottom: 12px; }
        .feature-card h4 { color: var(--secondary); margin-bottom: 8px; font-size: 16px; }
        .feature-card p { font-size: 13px; color: var(--gray-600); margin-bottom: 0; }

        .vflow { position: relative; padding-left: 60px; margin: 30px 0; }
        .vflow::before { content: ''; position: absolute; left: 28px; top: 0; bottom: 0; width: 3px; background: linear-gradient(to bottom, var(--primary), var(--secondary), var(--accent)); border-radius: 2px; }
        .vflow-step { position: relative; margin-bottom: 25px; padding: 20px; background: var(--gray-100); border-radius: 12px; border: 1px solid var(--gray-200); }
        .vflow-step::before { content: attr(data-step); position: absolute; left: -48px; top: 20px; width: 36px; height: 36px; border-radius: 50%; background: var(--primary); color: white; display: flex; align-items: center; justify-content: center; font-weight: 800; font-size: 14px; box-shadow: 0 3px 10px rgba(123,91,123,0.35); z-index: 2; }
        .vflow-step h4 { color: var(--secondary); margin-bottom: 8px; font-size: 16px; }
        .vflow-step p { font-size: 14px; color: var(--gray-600); margin-bottom: 0; }

        .table-responsive { overflow-x: auto; margin: 20px 0; }
        table { width: 100%; border-collapse: collapse; font-size: 14px; }
        table thead th { background: var(--secondary); color: var(--white); padding: 12px 16px; text-align: left; font-weight: 600; font-size: 12px; text-transform: uppercase; letter-spacing: 0.5px; }
        table thead th:first-child { border-radius: 10px 0 0 0; }
        table thead th:last-child { border-radius: 0 10px 0 0; }
        table tbody td { padding: 12px 16px; border-bottom: 1px solid var(--gray-200); }
        table tbody tr:hover { background: var(--gray-100); }
        table tbody tr:last-child td:first-child { border-radius: 0 0 0 10px; }
        table tbody tr:last-child td:last-child { border-radius: 0 0 10px 0; }

        .badge { display: inline-block; padding: 4px 10px; border-radius: 6px; font-size: 11px; font-weight: 700; text-transform: uppercase; letter-spacing: 0.5px; }
        .badge-complete { background: #dce8e0; color: #2a5a3a; }
        .badge-partial { background: #f0e8d4; color: #7a6530; }
        .badge-pending { background: #f0dfe0; color: #7a3035; }
        .badge-info { background: #dce8ef; color: #3a5f75; }
        .badge-locked { background: #f0e8d4; color: #7a6530; }
        .badge-ic { background: #e5dae5; color: #5E3F5E; }

        .eco-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin: 25px 0; }
        .eco-card { border: 2px solid var(--gray-300); border-radius: 16px; padding: 25px; text-align: center; transition: all 0.3s; }
        .eco-card:hover { border-color: var(--primary); box-shadow: 0 8px 25px rgba(75,45,75,0.12); }
        .eco-card h4 { color: var(--secondary); margin-bottom: 8px; font-size: 15px; }
        .eco-card .eco-icon { font-size: 36px; margin-bottom: 12px; }
        .eco-card p { font-size: 12px; color: var(--gray-600); margin-bottom: 0; }
        .eco-card.courtesy { border-color: var(--success); background: linear-gradient(135deg, #e8f0eb, #dce8e0); }
        .eco-card.classification { border-color: var(--primary); background: linear-gradient(135deg, #f5eef5, #ede4ed); }
        .eco-card.notification { border-color: var(--info); background: linear-gradient(135deg, #e8eff3, #dce8ef); }

        .flow-horizontal { display: flex; align-items: center; justify-content: center; gap: 0; margin: 30px 0; flex-wrap: nowrap; overflow-x: auto; padding: 15px 0; }
        .flow-box { min-width: 160px; padding: 18px; border-radius: 12px; text-align: center; font-size: 13px; font-weight: 600; color: white; flex-shrink: 0; }
        .flow-box.co-a { background: linear-gradient(135deg, var(--info), #4a7a95); }
        .flow-box.process { background: linear-gradient(135deg, var(--primary), var(--secondary)); }
        .flow-box.co-b { background: linear-gradient(135deg, var(--success), #4a8e5f); }
        .flow-box.alert { background: linear-gradient(135deg, var(--warning), #b89a3e); }
        .flow-box.return { background: linear-gradient(135deg, var(--danger), #a5444a); }
        .flow-arrow { font-size: 24px; color: var(--gray-400); margin: 0 5px; flex-shrink: 0; }
        .flow-box small { display: block; font-weight: 400; font-size: 11px; margin-top: 4px; opacity: 0.9; }

        .faq-item { border: 1px solid var(--gray-200); border-radius: 12px; margin-bottom: 12px; overflow: hidden; transition: all 0.3s; }
        .faq-item:hover { border-color: var(--primary); box-shadow: 0 4px 15px rgba(123,91,123,0.12); }
        .faq-question { padding: 18px 20px; background: var(--gray-100); font-weight: 700; color: var(--secondary); display: flex; align-items: center; gap: 12px; }
        .faq-question .q-marker { background: var(--primary); color: white; width: 28px; height: 28px; border-radius: 8px; display: flex; align-items: center; justify-content: center; font-size: 14px; font-weight: 800; flex-shrink: 0; }
        .faq-answer { padding: 18px 20px; padding-left: 60px; color: var(--gray-700); font-size: 14px; border-top: 1px solid var(--gray-200); }

        .group-card { display: flex; align-items: flex-start; gap: 15px; padding: 20px; background: var(--gray-100); border-radius: 12px; margin: 10px 0; }
        .group-icon { width: 44px; height: 44px; border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 20px; flex-shrink: 0; }
        .group-icon.user { background: linear-gradient(135deg, var(--primary-light), var(--primary)); color: white; }
        .group-icon.admin { background: linear-gradient(135deg, var(--primary-dark), var(--secondary)); color: white; }
        .group-icon.price { background: linear-gradient(135deg, var(--info), #4a7a95); color: white; }

        .footer { background: var(--dark); color: var(--gray-500); padding: 40px; text-align: center; }
        .footer .company-name { font-size: 22px; font-weight: 800; color: var(--white); letter-spacing: 3px; margin-bottom: 5px; }
        .footer .tagline { font-size: 12px; letter-spacing: 2px; text-transform: uppercase; margin-bottom: 20px; }
        .footer-divider { width: 60px; height: 3px; background: var(--primary); margin: 20px auto; border-radius: 2px; }
        .footer p { font-size: 13px; margin-bottom: 5px; }

        @media (max-width: 768px) {
            .header-top { padding: 10px 20px; } .hero { padding: 30px 20px; } .hero h1 { font-size: 26px; }
            .nav-bar { padding: 0 15px; } .main-content { padding: 20px; } .section { padding: 25px; }
            .eco-grid { grid-template-columns: 1fr; } .flow-horizontal { flex-direction: column; }
        }
        @media print { .header, .nav-bar { position: static; } .section { break-inside: avoid; box-shadow: none; border: 1px solid #ddd; } }
    </style>
</head>
<body>

<!-- HEADER -->
<div class="header">
    <div class="header-top">
        <div class="logo-area">
            <svg viewBox="0 0 240 48" xmlns="http://www.w3.org/2000/svg">
                <defs><linearGradient id="logoGrad" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#9B7B9B"/><stop offset="100%" style="stop-color:#C9A0C9"/></linearGradient></defs>
                <rect x="0" y="4" width="40" height="40" rx="10" fill="url(#logoGrad)"/>
                <text x="20" y="32" font-family="Arial,sans-serif" font-size="26" font-weight="800" fill="white" text-anchor="middle">C</text>
                <text x="52" y="22" font-family="Arial,sans-serif" font-size="18" font-weight="800" fill="white" letter-spacing="2">COONDEV</text>
                <text x="52" y="38" font-family="Arial,sans-serif" font-size="8" fill="rgba(255,255,255,0.8)" letter-spacing="2">COONSULTING &amp; DEVELOPMENT</text>
            </svg>
        </div>
        <div class="header-badge">GUIA FUNCIONAL v1.0</div>
    </div>
</div>

<!-- HERO -->
<div class="hero">
    <div class="hero-content">
        <div class="version-badge">Odoo 18 Enterprise &bull; Ecosistema de 3 Modulos</div>
        <h1>Reportes de Venta Restaurantes<br>Programas de Lealtad y Descuentos</h1>
        <p>Ecosistema de personalizacion para Punto de Venta: gestion de cortesias, clasificacion inteligente de transacciones y notificaciones automaticas por correo electronico en programas de lealtad.</p>
        <div class="hero-meta">
            <div class="hero-meta-item"><strong>Ecosistema</strong>3 Modulos Integrados</div>
            <div class="hero-meta-item"><strong>Categoria</strong>Punto de Venta / Restaurante</div>
            <div class="hero-meta-item"><strong>Autor</strong>Coondev</div>
            <div class="hero-meta-item"><strong>Licencia</strong>LGPL-3</div>
        </div>
    </div>
</div>

<!-- NAVIGATION -->
<div class="nav-bar">
    <ul>
        <li><a href="#introduccion">Introduccion</a></li>
        <li><a href="#flujos">Flujos de Trabajo</a></li>
        <li><a href="#parametros">Parametros</a></li>
        <li><a href="#guia-paso-a-paso">Guia Paso a Paso</a></li>
        <li><a href="#estados">Estados</a></li>
        <li><a href="#trazabilidad">Trazabilidad</a></li>
        <li><a href="#reportes">Reportes</a></li>
        <li><a href="#faq">Preguntas y Respuestas</a></li>
    </ul>
</div>

<!-- MAIN CONTENT -->
<div class="main-content">

    <!-- 1. INTRODUCCION -->
    <div class="section" id="introduccion">
        <div class="section-header">
            <div class="section-icon mauve">&#127860;</div>
            <h2>1. Introduccion <small>Vision general del ecosistema</small></h2>
        </div>

        <p>El ecosistema de <strong>Reportes de Venta Restaurantes / Programas de Lealtad y Descuentos</strong> es un conjunto de tres modulos integrados que extienden las funcionalidades del Punto de Venta de Odoo 18 para entornos de restaurante y comercios con programas de fidelizacion. Cubre desde la gestion de cortesias hasta la clasificacion automatica de transacciones y el envio de notificaciones por correo electronico.</p>

        <div class="highlight-box info">
            <strong>&#9432; Que resuelve este ecosistema?</strong>
            En operaciones de restaurante, frecuentemente se otorgan cortesias a clientes, se aplican programas de lealtad con beneficios administrativos o gerenciales, y se necesita monitorear en tiempo real cuando se utilizan estos programas. Este ecosistema automatiza el registro de cortesias con trazabilidad completa, la clasificacion inteligente de ordenes segun el programa de lealtad utilizado (con eliminacion de propinas y ajuste a valor simbolico) y el envio automatico de alertas por correo a los responsables.
        </div>

        <h3 style="margin: 25px 0 15px; color: var(--secondary);">Ecosistema de Modulos</h3>
        <div class="eco-grid">
            <div class="eco-card courtesy">
                <div class="eco-icon">&#127873;</div>
                <h4>Boton de Cortesia</h4>
                <p>Permite marcar productos como cortesia directamente desde el Punto de Venta, aplicando descuento automatico del 100% y registrando la razon del obsequio para trazabilidad completa.</p>
            </div>
            <div class="eco-card classification">
                <div class="eco-icon">&#127991;</div>
                <h4>Clasificacion de Lealtad</h4>
                <p>Categoriza automaticamente las ordenes segun el programa de lealtad aplicado. Ejecuta comportamientos como eliminacion de propinas y ajuste a valor simbolico segun la categoria asignada.</p>
            </div>
            <div class="eco-card notification">
                <div class="eco-icon">&#9993;</div>
                <h4>Notificaciones por Correo</h4>
                <p>Envia alertas automaticas por correo electronico a los usuarios designados cuando se utiliza un programa de lealtad configurado, ideal para control de consumos gerenciales.</p>
            </div>
        </div>

        <h3 style="margin: 25px 0 15px; color: var(--secondary);">Capacidades Principales</h3>
        <div class="feature-grid">
            <div class="feature-card">
                <div class="icon">&#127873;</div>
                <h4>Cortesias con Un Clic</h4>
                <p>Boton dedicado en la interfaz del Punto de Venta que aplica descuento del 100% al producto seleccionado, con registro obligatorio de razon y soporte para cantidades parciales.</p>
            </div>
            <div class="feature-card">
                <div class="icon">&#128274;</div>
                <h4>Auditoria Completa</h4>
                <p>Cada cortesia genera un registro inmutable con referencia secuencial, usuario autorizador, terminal, sesion, precio original y monto descontado.</p>
            </div>
            <div class="feature-card">
                <div class="icon">&#127991;</div>
                <h4>Clasificacion Automatica</h4>
                <p>Las ordenes se clasifican automaticamente segun el programa de lealtad utilizado. El sistema selecciona la categoria con mayor prioridad cuando hay multiples programas.</p>
            </div>
            <div class="feature-card">
                <div class="icon">&#9889;</div>
                <h4>Comportamientos Automaticos</h4>
                <p>Las categorias pueden eliminar propinas y ajustar el total a un valor simbolico (ej: $1) de forma automatica al sincronizar la orden con el sistema.</p>
            </div>
            <div class="feature-card">
                <div class="icon">&#128231;</div>
                <h4>Alertas por Correo</h4>
                <p>Notificacion inmediata por email cuando se utiliza un programa de lealtad. Plantillas personalizables y multiples destinatarios por programa.</p>
            </div>
            <div class="feature-card">
                <div class="icon">&#128202;</div>
                <h4>Vistas de Analisis</h4>
                <p>Listado, tabla pivote y grafico de barras para analizar cortesias por producto, periodo, usuario y terminal. Filtros preconfigurados por fecha.</p>
            </div>
        </div>

        <h3 style="margin: 25px 0 15px; color: var(--secondary);">Dependencias del Ecosistema</h3>
        <div class="table-responsive">
            <table>
                <thead><tr><th>Modulo Requerido</th><th>Descripcion</th><th>Usado Por</th></tr></thead>
                <tbody>
                    <tr><td><strong>Punto de Venta</strong></td><td>Funcionalidad base del terminal de venta</td><td>Los 3 modulos</td></tr>
                    <tr><td><strong>Restaurante (PdV)</strong></td><td>Extension de restaurante para Punto de Venta</td><td>Boton de Cortesia</td></tr>
                    <tr><td><strong>Lealtad (PdV)</strong></td><td>Programas de lealtad integrados al Punto de Venta</td><td>Clasificacion + Notificaciones</td></tr>
                    <tr><td><strong>Correo Electronico</strong></td><td>Sistema de envio de correos y plantillas</td><td>Notificaciones</td></tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- 2. FLUJOS DE TRABAJO -->
    <div class="section" id="flujos">
        <div class="section-header">
            <div class="section-icon deep">&#9881;</div>
            <h2>2. Flujos de Trabajo <small>Diagramas de procesos graficos</small></h2>
        </div>

        <h3 style="margin-bottom: 20px; color: var(--secondary);">2.1 Flujo General del Ecosistema</h3>
        <div class="flow-horizontal">
            <div class="flow-box co-a">Orden en PdV<small>Cajero crea la orden</small></div>
            <div class="flow-arrow">&#10230;</div>
            <div class="flow-box co-b">Cortesia / Lealtad<small>Se aplican beneficios</small></div>
            <div class="flow-arrow">&#10230;</div>
            <div class="flow-box process">Clasificacion<small>Categoria automatica</small></div>
            <div class="flow-arrow">&#10230;</div>
            <div class="flow-box alert">Comportamientos<small>Propina / Valor simbolico</small></div>
            <div class="flow-arrow">&#10230;</div>
            <div class="flow-box return">Notificacion<small>Correo a responsables</small></div>
        </div>

        <h3 style="margin: 35px 0 15px; color: var(--secondary);">2.2 Flujo Detallado: Cortesia en Punto de Venta</h3>
        <div class="vflow">
            <div class="vflow-step" data-step="1">
                <h4>El cajero selecciona un producto de la orden</h4>
                <p>En la interfaz del Punto de Venta, el cajero hace clic sobre la linea de producto que desea obsequiar como cortesia dentro del resumen de la orden.</p>
            </div>
            <div class="vflow-step" data-step="2">
                <h4>Presiona el boton de Cortesia</h4>
                <p>En la barra de controles aparece un boton con icono de regalo. Al presionarlo, se abre una ventana emergente solicitando la informacion requerida.</p>
            </div>
            <div class="vflow-step" data-step="3">
                <h4>Ingresa la cantidad y la razon</h4>
                <p>La ventana muestra el nombre del producto y permite definir la <strong>cantidad a obsequiar</strong> (puede ser parcial) y la <strong>razon de la cortesia</strong> (campo obligatorio). Si la cantidad es menor al total, el sistema dividira la linea automaticamente.</p>
            </div>
            <div class="vflow-step" data-step="4">
                <h4>Se aplica el descuento del 100%</h4>
                <p>Al confirmar, el sistema aplica automaticamente un descuento del 100% a la linea de cortesia. Aparece una etiqueta verde <span class="badge badge-complete">Cortesia</span> en la linea del producto dentro de la orden.</p>
            </div>
            <div class="vflow-step" data-step="5">
                <h4>Se genera el registro de auditoria</h4>
                <p>Al confirmar el pago de la orden, se crea automaticamente un registro con referencia secuencial que almacena: producto, cantidad, precio original, monto descontado, razon, usuario autorizador, sesion y terminal.</p>
            </div>
        </div>

        <h3 style="margin: 35px 0 15px; color: var(--secondary);">2.3 Flujo Detallado: Clasificacion Automatica de Transacciones</h3>
        <div class="vflow">
            <div class="vflow-step" data-step="1">
                <h4>La orden incluye recompensas de programas de lealtad</h4>
                <p>Cuando el cajero aplica un programa de lealtad o descuento en la orden, las lineas de recompensa quedan vinculadas al programa correspondiente.</p>
            </div>
            <div class="vflow-step" data-step="2">
                <h4>El sistema detecta las categorias asociadas</h4>
                <p>Al sincronizar la orden, el sistema analiza cada linea de recompensa, identifica los programas de lealtad utilizados y obtiene la <strong>categoria de transaccion</strong> asignada a cada programa.</p>
            </div>
            <div class="vflow-step" data-step="3">
                <h4>Se asigna la categoria con mayor prioridad</h4>
                <p>Si hay multiples categorias, se selecciona automaticamente la de mayor numero de prioridad. Si ninguna linea tiene categoria, se asigna la categoria <strong>"Normal"</strong> por defecto.</p>
            </div>
            <div class="vflow-step" data-step="4">
                <h4>Se ejecutan los comportamientos configurados</h4>
                <p>Segun la categoria asignada, el sistema ejecuta automaticamente:<br>
                - <strong>Eliminar Propina:</strong> retira las lineas de propina y cargos de servicio de la orden.<br>
                - <strong>Valor Simbolico:</strong> ajusta el total de la orden a un valor fijo (ej: $1) redistribuyendo proporcionalmente los montos entre las lineas.</p>
            </div>
        </div>

        <h3 style="margin: 35px 0 15px; color: var(--secondary);">2.4 Flujo Detallado: Notificacion por Correo Electronico</h3>
        <div class="vflow">
            <div class="vflow-step" data-step="1">
                <h4>Se crea la orden en el sistema</h4>
                <p>Cuando la orden del Punto de Venta se registra en el sistema, se dispara automaticamente la verificacion de programas de lealtad con notificacion activa.</p>
            </div>
            <div class="vflow-step" data-step="2">
                <h4>Se identifican programas con notificacion</h4>
                <p>El sistema recorre las lineas de recompensa de la orden, identifica los programas de lealtad asociados y filtra aquellos que tienen la <strong>notificacion por correo activada</strong>.</p>
            </div>
            <div class="vflow-step" data-step="3">
                <h4>Se envia el correo a los destinatarios</h4>
                <p>Para cada programa con notificacion activa, se envia un correo electronico a todos los usuarios designados como destinatarios. El correo incluye: numero de orden, fecha, punto de venta, cajero, cliente, programa utilizado y total cobrado.</p>
            </div>
            <div class="vflow-step" data-step="4">
                <h4>Se marca la orden como notificada</h4>
                <p>La orden queda marcada como "notificacion enviada" para evitar envios duplicados. Si alguna notificacion falla, el error se registra en la bitacora del sistema sin interrumpir la venta.</p>
            </div>
        </div>
    </div>

    <!-- 3. PARAMETROS -->
    <div class="section" id="parametros">
        <div class="section-header">
            <div class="section-icon warm">&#9881;</div>
            <h2>3. Parametros a Tener en Cuenta <small>Configuracion del ecosistema</small></h2>
        </div>

        <h3 style="margin-bottom: 15px; color: var(--secondary);">3.1 Parametros del Boton de Cortesia</h3>
        <div class="table-responsive">
            <table>
                <thead><tr><th>Parametro</th><th>Tipo</th><th>Descripcion</th></tr></thead>
                <tbody>
                    <tr><td><strong>Razon de la Cortesia</strong></td><td><span class="badge badge-pending">Obligatorio</span></td><td>Texto libre que el cajero debe ingresar para justificar la cortesia. No aparece en el ticket del cliente.</td></tr>
                    <tr><td><strong>Cantidad a Obsequiar</strong></td><td><span class="badge badge-partial">Flexible</span></td><td>Puede ser parcial (ej: 2 de 5 unidades). El sistema divide la linea automaticamente si es necesario.</td></tr>
                    <tr><td><strong>Usuario Autorizador</strong></td><td><span class="badge badge-info">Automatico</span></td><td>Se registra automaticamente el usuario que esta operando el terminal al momento de otorgar la cortesia.</td></tr>
                    <tr><td><strong>Referencia Secuencial</strong></td><td><span class="badge badge-info">Automatico</span></td><td>Se genera automaticamente un numero secuencial consecutivo para cada registro de cortesia.</td></tr>
                </tbody>
            </table>
        </div>

        <h3 style="margin: 30px 0 15px; color: var(--secondary);">3.2 Parametros de Clasificacion de Transacciones</h3>
        <div class="table-responsive">
            <table>
                <thead><tr><th>Parametro</th><th>Tipo</th><th>Descripcion</th></tr></thead>
                <tbody>
                    <tr><td><strong>Nombre de Categoria</strong></td><td><span class="badge badge-pending">Obligatorio</span></td><td>Nombre descriptivo de la categoria de transaccion (ej: "Consumo Gerencial", "Beneficio Administrativo").</td></tr>
                    <tr><td><strong>Codigo Unico</strong></td><td><span class="badge badge-pending">Obligatorio</span></td><td>Codigo identificador unico de la categoria. No se puede repetir entre categorias.</td></tr>
                    <tr><td><strong>Prioridad</strong></td><td><span class="badge badge-partial">Numerico</span></td><td>Numero que define la prioridad de la categoria. A mayor numero, mayor prioridad. Se usa para resolver conflictos cuando hay multiples programas en una orden.</td></tr>
                    <tr><td><strong>Eliminar Propina</strong></td><td><span class="badge badge-info">Si/No</span></td><td>Si esta activo, se eliminan automaticamente las lineas de propina y cargos de servicio de la orden.</td></tr>
                    <tr><td><strong>Valor Simbolico</strong></td><td><span class="badge badge-info">Si/No</span></td><td>Si esta activo, el total de la orden se ajusta al valor simbolico configurado.</td></tr>
                    <tr><td><strong>Monto del Valor Simbolico</strong></td><td><span class="badge badge-partial">Numerico</span></td><td>Valor al que se ajustara el total de la orden (por defecto: $1). Solo visible si se activa el valor simbolico.</td></tr>
                </tbody>
            </table>
        </div>

        <h3 style="margin: 30px 0 15px; color: var(--secondary);">3.3 Parametros de Notificaciones por Correo</h3>
        <div class="table-responsive">
            <table>
                <thead><tr><th>Parametro</th><th>Tipo</th><th>Descripcion</th></tr></thead>
                <tbody>
                    <tr><td><strong>Activar Notificacion</strong></td><td><span class="badge badge-info">Si/No</span></td><td>Habilita o deshabilita el envio de correo electronico para este programa de lealtad especifico.</td></tr>
                    <tr><td><strong>Destinatarios</strong></td><td><span class="badge badge-partial">Configurable</span></td><td>Lista de usuarios que recibiran la notificacion. Solo se notifica a usuarios con correo electronico valido.</td></tr>
                    <tr><td><strong>Plantilla de Correo</strong></td><td><span class="badge badge-info">Opcional</span></td><td>Plantilla personalizada para el correo. Si no se selecciona, se usa la plantilla por defecto del sistema.</td></tr>
                    <tr><td><strong>Clasificacion del Programa</strong></td><td><span class="badge badge-info">Seleccion</span></td><td>Opciones: Estandar, Consumo Gerencial, Beneficio Empleado, Promocion, Otro. Facilita el filtrado y reporte.</td></tr>
                </tbody>
            </table>
        </div>

        <h3 style="margin: 30px 0 15px; color: var(--secondary);">3.4 Categorias de Transaccion Precargadas</h3>
        <div class="highlight-box">
            <strong>&#9888; Categorias incluidas por defecto</strong>
            El sistema viene con cinco categorias predefinidas listas para usar. Pueden modificarse o crear nuevas desde la configuracion del Punto de Venta.
        </div>
        <div class="table-responsive">
            <table>
                <thead><tr><th>Categoria</th><th>Prioridad</th><th>Elimina Propina</th><th>Valor Simbolico</th><th>Descripcion</th></tr></thead>
                <tbody>
                    <tr><td><strong>Beneficio Administrativo</strong></td><td>5 (Alta)</td><td>&#10003; Si</td><td>&#10003; $1</td><td>Para beneficios administrativos internos</td></tr>
                    <tr><td><strong>Consumo Gerencial</strong></td><td>5 (Alta)</td><td>&#10003; Si</td><td>&#10003; $1</td><td>Para consumos de gerentes y directivos</td></tr>
                    <tr><td><strong>Fotos y Pruebas</strong></td><td>5 (Alta)</td><td>&#10003; Si</td><td>&#10003; $1</td><td>Para ordenes de prueba y sesiones fotograficas</td></tr>
                    <tr><td><strong>Cortesia</strong></td><td>4 (Media-Alta)</td><td>&#10007; No</td><td>&#10007; No</td><td>Para cortesias a clientes sin modificar totales</td></tr>
                    <tr><td><strong>Normal</strong></td><td>1 (Baja)</td><td>&#10007; No</td><td>&#10007; No</td><td>Categoria por defecto para ventas regulares</td></tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- 4. GUIA PASO A PASO -->
    <div class="section" id="guia-paso-a-paso">
        <div class="section-header">
            <div class="section-icon sage">&#128221;</div>
            <h2>4. Guia Paso a Paso <small>Configuracion y operacion</small></h2>
        </div>

        <h3 style="margin-bottom: 15px; color: var(--secondary);">Paso 1: Otorgar una Cortesia en el Punto de Venta</h3>
        <div class="vflow">
            <div class="vflow-step" data-step="1">
                <h4>Abrir una sesion del Punto de Venta</h4>
                <p>Inicie sesion normalmente en el terminal del Punto de Venta desde el modulo correspondiente.</p>
            </div>
            <div class="vflow-step" data-step="2">
                <h4>Agregar productos a la orden</h4>
                <p>Seleccione los productos que el cliente desea. Agregue a la orden todas las lineas necesarias antes de marcar cortesias.</p>
            </div>
            <div class="vflow-step" data-step="3">
                <h4>Seleccionar la linea a obsequiar</h4>
                <p>Haga clic sobre la linea de producto que desea marcar como cortesia dentro del resumen de la orden en pantalla.</p>
            </div>
            <div class="vflow-step" data-step="4">
                <h4>Presionar el boton de Cortesia</h4>
                <p>Haga clic en el boton con icono de regalo (&#127873;) que aparece en la barra de controles. El boton se muestra en color amarillo cuando esta disponible y cambia a verde si la linea ya es cortesia.</p>
            </div>
            <div class="vflow-step" data-step="5">
                <h4>Completar la informacion requerida</h4>
                <p>En la ventana emergente, ingrese la <strong>cantidad a obsequiar</strong> (puede ser parcial) y escriba la <strong>razon de la cortesia</strong>. Ambos datos son obligatorios para continuar.</p>
            </div>
            <div class="vflow-step" data-step="6">
                <h4>Confirmar y completar la venta</h4>
                <p>Presione confirmar. El sistema aplica el descuento del 100%, muestra la etiqueta verde de cortesia en la linea. Continue con el cobro normal. Al confirmar el pago, se genera automaticamente el registro con referencia secuencial.</p>
            </div>
        </div>

        <div class="highlight-box info">
            <strong>&#9432; Revertir una Cortesia</strong>
            Para quitar una cortesia antes de cobrar, seleccione la linea con cortesia y presione nuevamente el boton (que ahora muestra "Quitar Cortesia" en verde). El sistema restaurara el precio original del producto.
        </div>

        <h3 style="margin: 30px 0 15px; color: var(--secondary);">Paso 2: Configurar Categorias de Transaccion</h3>
        <div class="vflow">
            <div class="vflow-step" data-step="1">
                <h4>Acceder a la configuracion</h4>
                <p>Navegue a <strong>Punto de Venta &gt; Configuracion &gt; Productos &gt; Categorias de Transaccion</strong>. Aqui encontrara las cinco categorias precargadas.</p>
            </div>
            <div class="vflow-step" data-step="2">
                <h4>Crear o modificar una categoria</h4>
                <p>Haga clic en "Nuevo" o seleccione una existente. Defina el nombre, codigo unico, prioridad y active los comportamientos deseados (eliminar propina y/o valor simbolico).</p>
            </div>
            <div class="vflow-step" data-step="3">
                <h4>Vincular al programa de lealtad</h4>
                <p>Abra el programa de lealtad deseado y en el campo de <strong>Categoria de Transaccion</strong> seleccione la categoria creada. Guarde los cambios. A partir de ahora, todas las ordenes que usen este programa se clasificaran automaticamente.</p>
            </div>
        </div>

        <h3 style="margin: 30px 0 15px; color: var(--secondary);">Paso 3: Configurar Notificaciones por Correo</h3>
        <div class="vflow">
            <div class="vflow-step" data-step="1">
                <h4>Abrir el programa de lealtad</h4>
                <p>Navegue al programa de lealtad que desea monitorear. Puede acceder desde <strong>Punto de Venta &gt; Productos &gt; Programas de Lealtad</strong>.</p>
            </div>
            <div class="vflow-step" data-step="2">
                <h4>Ir a la pestana de Notificacion por Correo</h4>
                <p>En el formulario del programa, haga clic en la pestana <strong>"Notificacion Email"</strong>. Seleccione la clasificacion del programa (Estandar, Consumo Gerencial, Beneficio Empleado, etc.).</p>
            </div>
            <div class="vflow-step" data-step="3">
                <h4>Activar la notificacion y agregar destinatarios</h4>
                <p>Marque la casilla para activar el envio de correo. Al activarla, aparecen los campos para seleccionar <strong>plantilla personalizada</strong> (opcional) y agregar los <strong>usuarios destinatarios</strong>. Solo se notificara a usuarios con correo valido.</p>
            </div>
        </div>

        <h3 style="margin: 30px 0 15px; color: var(--secondary);">Paso 4: Asignar Permisos</h3>
        <div class="group-card">
            <div class="group-icon user">&#128100;</div>
            <div>
                <h4 style="color: var(--secondary); margin-bottom: 5px;">Usuario del Punto de Venta</h4>
                <p style="font-size: 13px; color: var(--gray-600); margin-bottom: 0;">Puede otorgar cortesias, consultar el registro de cortesias (solo lectura) y ver las categorias de transaccion. <strong>No puede</strong> eliminar registros de cortesia ni configurar categorias.</p>
            </div>
        </div>
        <div class="group-card">
            <div class="group-icon admin">&#128272;</div>
            <div>
                <h4 style="color: var(--secondary); margin-bottom: 5px;">Administrador del Punto de Venta</h4>
                <p style="font-size: 13px; color: var(--gray-600); margin-bottom: 0;"><strong>Acceso completo.</strong> Puede crear, modificar y eliminar registros de cortesia. Configura categorias de transaccion, comportamientos, notificaciones por correo y destinatarios. Gestiona programas de lealtad y sus clasificaciones.</p>
            </div>
        </div>
    </div>

    <!-- 5. ESTADOS -->
    <div class="section" id="estados">
        <div class="section-header">
            <div class="section-icon plum">&#128203;</div>
            <h2>5. Estados del Proceso <small>Ciclo de vida y estados</small></h2>
        </div>

        <h3 style="margin-bottom: 15px; color: var(--secondary);">5.1 Estados de la Cortesia</h3>
        <div class="table-responsive">
            <table>
                <thead><tr><th>Estado</th><th>Indicador</th><th>Descripcion</th></tr></thead>
                <tbody>
                    <tr>
                        <td><strong>Producto Seleccionado</strong></td>
                        <td><span class="badge badge-info">Normal</span></td>
                        <td>El producto esta en la orden pero aun no ha sido marcado como cortesia</td>
                    </tr>
                    <tr>
                        <td><strong>Cortesia en Proceso</strong></td>
                        <td><span class="badge badge-partial">En Ventana</span></td>
                        <td>El cajero ha abierto la ventana de cortesia e ingresa la razon y la cantidad a obsequiar</td>
                    </tr>
                    <tr>
                        <td><strong>Cortesia Aplicada</strong></td>
                        <td><span class="badge badge-complete">Cortesia</span></td>
                        <td>Descuento del 100% activo. La linea muestra la etiqueta verde de cortesia en la interfaz</td>
                    </tr>
                    <tr>
                        <td><strong>Registro Creado</strong></td>
                        <td><span class="badge badge-ic">Auditado</span></td>
                        <td>Al confirmar el pago se genera el registro de auditoria con referencia secuencial</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <h3 style="margin: 30px 0 15px; color: var(--secondary);">5.2 Estados de Clasificacion de Transacciones</h3>
        <div class="table-responsive">
            <table>
                <thead><tr><th>Estado</th><th>Indicador</th><th>Descripcion</th></tr></thead>
                <tbody>
                    <tr>
                        <td><strong>Sin Clasificar</strong></td>
                        <td><span class="badge badge-info">Pendiente</span></td>
                        <td>La orden aun no tiene lineas con recompensas de programas de lealtad</td>
                    </tr>
                    <tr>
                        <td><strong>Deteccion Automatica</strong></td>
                        <td><span class="badge badge-partial">Procesando</span></td>
                        <td>El sistema analiza los programas de lealtad usados y sus categorias asociadas</td>
                    </tr>
                    <tr>
                        <td><strong>Categoria Asignada</strong></td>
                        <td><span class="badge badge-ic">Clasificada</span></td>
                        <td>Se asigno la categoria de mayor prioridad segun los programas detectados</td>
                    </tr>
                    <tr>
                        <td><strong>Comportamientos Aplicados</strong></td>
                        <td><span class="badge badge-complete">Completado</span></td>
                        <td>Se ejecutaron automaticamente las acciones configuradas en la categoria (propina, valor simbolico)</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <h3 style="margin: 30px 0 15px; color: var(--secondary);">5.3 Estados de Notificacion por Correo</h3>
        <div class="table-responsive">
            <table>
                <thead><tr><th>Estado</th><th>Indicador</th><th>Descripcion</th></tr></thead>
                <tbody>
                    <tr>
                        <td><strong>Pendiente</strong></td>
                        <td><span class="badge badge-info">Pendiente</span></td>
                        <td>La orden fue creada y se detectaron programas con notificacion activa</td>
                    </tr>
                    <tr>
                        <td><strong>Enviando</strong></td>
                        <td><span class="badge badge-partial">Procesando</span></td>
                        <td>El sistema esta enviando el correo a cada destinatario configurado en el programa</td>
                    </tr>
                    <tr>
                        <td><strong>Enviada</strong></td>
                        <td><span class="badge badge-complete">Enviada</span></td>
                        <td>La notificacion fue enviada exitosamente y la orden queda marcada para evitar duplicados</td>
                    </tr>
                    <tr>
                        <td><strong>Error</strong></td>
                        <td><span class="badge badge-pending">Error</span></td>
                        <td>Se registro un error en la bitacora (correo invalido, falla del servidor). La venta continua normalmente.</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <h3 style="margin: 30px 0 15px; color: var(--secondary);">5.4 Contenido del Correo de Notificacion</h3>
        <p>Cada correo de notificacion incluye la siguiente informacion:</p>
        <div class="feature-grid" style="grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));">
            <div class="feature-card">
                <h4>Numero de Orden</h4>
                <p>Referencia unica de la orden del Punto de Venta</p>
            </div>
            <div class="feature-card">
                <h4>Fecha y Hora</h4>
                <p>Momento exacto en que se realizo la transaccion</p>
            </div>
            <div class="feature-card">
                <h4>Punto de Venta</h4>
                <p>Nombre del terminal donde se proceso la orden</p>
            </div>
            <div class="feature-card">
                <h4>Cajero / Empleado</h4>
                <p>Nombre del cajero o empleado que opero el terminal</p>
            </div>
            <div class="feature-card">
                <h4>Cliente</h4>
                <p>Nombre del cliente si fue registrado en la orden</p>
            </div>
            <div class="feature-card">
                <h4>Total Cobrado</h4>
                <p>Monto total de la orden con simbolo de moneda</p>
            </div>
        </div>
    </div>

    <!-- 6. TRAZABILIDAD -->
    <div class="section" id="trazabilidad">
        <div class="section-header">
            <div class="section-icon sage">&#128269;</div>
            <h2>6. Trazabilidad <small>Seguimiento completo de operaciones</small></h2>
        </div>

        <p>El ecosistema proporciona trazabilidad completa de todas las operaciones realizadas. Cada modulo aporta informacion que permite reconstruir el historial de cortesias, clasificaciones y notificaciones.</p>

        <h3 style="margin: 25px 0 15px; color: var(--secondary);">6.1 Trazabilidad de Cortesias</h3>
        <div class="highlight-box success">
            <strong>Registro Completo de Auditoria</strong>
            Cada cortesia genera un registro inmutable que almacena: referencia secuencial, fecha y hora, producto obsequiado, cantidad, precio original, monto total del descuento, razon ingresada por el cajero, usuario que autorizo la cortesia, sesion del Punto de Venta y terminal utilizado. Todos los registros incluyen enlace directo a la orden de venta asociada.
        </div>

        <h3 style="margin: 25px 0 15px; color: var(--secondary);">6.2 Acceso Rapido desde la Orden</h3>
        <p>Desde cualquier orden en el sistema, se muestra un <strong>contador con icono de regalo</strong> que indica el numero de cortesias otorgadas en esa orden. Al hacer clic sobre el indicador, se accede directamente a todos los registros de cortesia asociados.</p>

        <h3 style="margin: 25px 0 15px; color: var(--secondary);">6.3 Trazabilidad de Clasificacion</h3>
        <div class="table-responsive">
            <table>
                <thead><tr><th>Dato Rastreable</th><th>Donde se Consulta</th></tr></thead>
                <tbody>
                    <tr><td><strong>Categoria de transaccion asignada</strong></td><td>Formulario de la orden y columna en vista de lista</td></tr>
                    <tr><td><strong>Codigo de la categoria</strong></td><td>Campo de referencia rapida en la orden</td></tr>
                    <tr><td><strong>Programa de lealtad que origino la clasificacion</strong></td><td>Lineas de recompensa de la orden</td></tr>
                    <tr><td><strong>Comportamientos ejecutados</strong></td><td>Bitacora del sistema (registro detallado de cada accion)</td></tr>
                    <tr><td><strong>Agrupacion por categoria</strong></td><td>Vista de lista de ordenes con filtro de agrupacion</td></tr>
                </tbody>
            </table>
        </div>

        <h3 style="margin: 25px 0 15px; color: var(--secondary);">6.4 Trazabilidad de Notificaciones</h3>
        <div class="table-responsive">
            <table>
                <thead><tr><th>Dato Rastreable</th><th>Donde se Consulta</th></tr></thead>
                <tbody>
                    <tr><td><strong>Programa de lealtad utilizado</strong></td><td>Campo en el formulario de la orden (solo lectura)</td></tr>
                    <tr><td><strong>Estado de notificacion (enviada / no enviada)</strong></td><td>Indicador en el formulario de la orden</td></tr>
                    <tr><td><strong>Clasificacion del programa</strong></td><td>Campo en el programa de lealtad y en la vista de lista</td></tr>
                    <tr><td><strong>Errores de envio</strong></td><td>Bitacora del sistema con detalles del error</td></tr>
                </tbody>
            </table>
        </div>

        <h3 style="margin: 25px 0 15px; color: var(--secondary);">6.5 Filtros Preconfigurados</h3>
        <div class="highlight-box info">
            <strong>&#9432; Filtros disponibles para consulta</strong>
            <strong>Cortesias:</strong> Filtro por hoy, esta semana, este mes. Agrupacion por fecha (diario), producto, usuario, terminal y sesion.<br>
            <strong>Programas de lealtad:</strong> Filtro por programas con/sin categoria asignada. Busqueda por categoria de transaccion.<br>
            <strong>Ordenes:</strong> Filtro por ordenes con programa de lealtad, por consumo gerencial. Agrupacion por programa utilizado y por categoria de transaccion.
        </div>
    </div>

    <!-- 7. REPORTES -->
    <div class="section" id="reportes">
        <div class="section-header">
            <div class="section-icon warm">&#128202;</div>
            <h2>7. Detalle de Reportes <small>Vistas y paneles disponibles</small></h2>
        </div>

        <h3 style="margin-bottom: 15px; color: var(--secondary);">7.1 Registro de Cortesias (Vista de Lista)</h3>
        <div class="feature-grid" style="grid-template-columns: 1fr 1fr;">
            <div class="feature-card">
                <h4>Acceso</h4>
                <p>Punto de Venta &gt; Cortesias &gt; Registro de Cortesias</p>
            </div>
            <div class="feature-card">
                <h4>Columnas Disponibles</h4>
                <p>Referencia, Fecha, Orden, Producto, Cantidad, Precio Original, Monto Descuento, Razon, Usuario, Terminal, Sesion</p>
            </div>
        </div>
        <div class="highlight-box">
            <strong>Suma automatica:</strong> La columna de monto de descuento incluye suma total en la parte inferior de la tabla, permitiendo conocer el valor total de cortesias en el periodo consultado.
        </div>

        <h3 style="margin: 30px 0 15px; color: var(--secondary);">7.2 Analisis Pivote de Cortesias</h3>
        <div class="table-responsive">
            <table>
                <thead><tr><th>Elemento</th><th>Descripcion</th></tr></thead>
                <tbody>
                    <tr><td><strong>Ejes predeterminados</strong></td><td>Fecha (mensual) en filas x Producto en columnas</td></tr>
                    <tr><td><strong>Medidas disponibles</strong></td><td>Monto de descuento y Cantidad</td></tr>
                    <tr><td><strong>Uso</strong></td><td>Analisis de tendencias de cortesias por producto y periodo. Se puede expandir/colapsar dimensiones y exportar a Excel.</td></tr>
                </tbody>
            </table>
        </div>

        <h3 style="margin: 30px 0 15px; color: var(--secondary);">7.3 Grafico de Barras de Cortesias</h3>
        <div class="table-responsive">
            <table>
                <thead><tr><th>Elemento</th><th>Descripcion</th></tr></thead>
                <tbody>
                    <tr><td><strong>Tipo de grafico</strong></td><td>Barras verticales</td></tr>
                    <tr><td><strong>Eje horizontal</strong></td><td>Productos</td></tr>
                    <tr><td><strong>Eje vertical</strong></td><td>Monto total de descuentos</td></tr>
                    <tr><td><strong>Uso</strong></td><td>Identificar rapidamente los productos con mayor volumen de cortesias otorgadas</td></tr>
                </tbody>
            </table>
        </div>

        <h3 style="margin: 30px 0 15px; color: var(--secondary);">7.4 Ordenes por Categoria de Transaccion</h3>
        <div class="table-responsive">
            <table>
                <thead><tr><th>Elemento</th><th>Descripcion</th></tr></thead>
                <tbody>
                    <tr><td><strong>Acceso</strong></td><td>Desde el listado de ordenes del Punto de Venta</td></tr>
                    <tr><td><strong>Columna adicional</strong></td><td>Categoria de Transaccion visible en la vista de lista</td></tr>
                    <tr><td><strong>Agrupacion</strong></td><td>Agrupar ordenes por categoria de transaccion</td></tr>
                    <tr><td><strong>Filtros especiales</strong></td><td>Ordenes con programa de lealtad, ordenes de consumo gerencial</td></tr>
                </tbody>
            </table>
        </div>

        <h3 style="margin: 30px 0 15px; color: var(--secondary);">7.5 Reporte de Notificaciones</h3>
        <div class="table-responsive">
            <table>
                <thead><tr><th>Elemento</th><th>Descripcion</th></tr></thead>
                <tbody>
                    <tr><td><strong>Acceso</strong></td><td>Desde el formulario de cada orden y la vista de lista</td></tr>
                    <tr><td><strong>Informacion visible</strong></td><td>Programa utilizado, estado de notificacion (enviada/no enviada), clasificacion del programa</td></tr>
                    <tr><td><strong>Filtros</strong></td><td>Ordenes con programa de lealtad activo, ordenes de consumo gerencial</td></tr>
                    <tr><td><strong>Agrupacion</strong></td><td>Por programa de lealtad utilizado</td></tr>
                </tbody>
            </table>
        </div>

        <h3 style="margin: 30px 0 15px; color: var(--secondary);">7.6 Contenido del Correo de Alerta</h3>
        <div class="highlight-box info">
            <strong>&#9432; Formato del correo</strong>
            El correo se genera en formato HTML profesional con encabezado de alerta destacado, tabla con los datos de la orden (numero, fecha, punto de venta, cajero, cliente, programa utilizado, total cobrado) y pie de pagina con informacion de la compania. Se puede personalizar mediante plantillas de correo.
        </div>
    </div>

    <!-- 8. FAQ -->
    <div class="section" id="faq">
        <div class="section-header">
            <div class="section-icon mauve">&#10067;</div>
            <h2>8. Preguntas y Respuestas <small>Preguntas frecuentes del ecosistema</small></h2>
        </div>

        <div class="faq-item">
            <div class="faq-question"><span class="q-marker">Q</span>Como retiro una cortesia ya aplicada a un producto?</div>
            <div class="faq-answer">Seleccione la linea que tiene la etiqueta de cortesia y presione nuevamente el boton de Cortesia (que ahora muestra "Quitar Cortesia" en color verde). El sistema restaurara el precio original del producto y eliminara la marca de cortesia. Esto solo es posible <strong>antes de confirmar el pago</strong>.</div>
        </div>

        <div class="faq-item">
            <div class="faq-question"><span class="q-marker">Q</span>Puedo marcar solo una parte de la cantidad como cortesia?</div>
            <div class="faq-answer"><strong>Si.</strong> Si un producto tiene cantidad mayor a uno, al presionar el boton de cortesia puede indicar la cantidad parcial a obsequiar. El sistema dividira automaticamente la linea en dos: una con la cantidad que se cobra normalmente y otra con la cantidad de cortesia con descuento del 100%.</div>
        </div>

        <div class="faq-item">
            <div class="faq-question"><span class="q-marker">Q</span>Que sucede cuando una orden tiene multiples programas de lealtad con diferentes categorias?</div>
            <div class="faq-answer">El sistema selecciona automaticamente la <strong>categoria con el numero de prioridad mas alto</strong>. Por ejemplo, si una orden tiene un programa "Normal" (prioridad 1) y otro de "Consumo Gerencial" (prioridad 5), la orden se clasificara como "Consumo Gerencial" y se aplicaran los comportamientos de esa categoria.</div>
        </div>

        <div class="faq-item">
            <div class="faq-question"><span class="q-marker">Q</span>Que comportamientos se aplican a las categorias de Beneficio Administrativo y Consumo Gerencial?</div>
            <div class="faq-answer">Ambas categorias tienen habilitados dos comportamientos automaticos:<br><strong>1) Eliminacion de propina:</strong> se retiran las lineas de propina y cargos de servicio de la orden.<br><strong>2) Valor simbolico:</strong> el total de la orden se ajusta a un valor minimo (por defecto $1), redistribuyendo proporcionalmente los montos entre las lineas. Esto permite que estas ordenes se registren con un valor representativo.</div>
        </div>

        <div class="faq-item">
            <div class="faq-question"><span class="q-marker">Q</span>Puedo crear categorias de transaccion personalizadas?</div>
            <div class="faq-answer"><strong>Si.</strong> Desde Punto de Venta &gt; Configuracion &gt; Productos &gt; Categorias de Transaccion puede crear nuevas categorias con nombre, codigo unico, prioridad, y configurar individualmente si eliminan propina y/o ajustan a valor simbolico. Las categorias se pueden reordenar y archivar si ya no son necesarias.</div>
        </div>

        <div class="faq-item">
            <div class="faq-question"><span class="q-marker">Q</span>A quien le llegan las notificaciones por correo?</div>
            <div class="faq-answer">Las notificaciones se envian unicamente a los <strong>usuarios configurados en el campo de destinatarios</strong> de cada programa de lealtad. Solo se envia si el programa tiene la notificacion activa y si los destinatarios tienen correo electronico valido. Cada programa puede tener diferentes destinatarios segun las necesidades del negocio.</div>
        </div>

        <div class="faq-item">
            <div class="faq-question"><span class="q-marker">Q</span>Se puede personalizar el contenido del correo de notificacion?</div>
            <div class="faq-answer"><strong>Si.</strong> Cada programa de lealtad puede tener su propia plantilla de correo personalizada. Si no se selecciona una plantilla especifica, el sistema usa la plantilla por defecto que incluye: numero de orden, fecha, punto de venta, cajero, cliente, programa utilizado y total cobrado. Las plantillas personalizadas se gestionan desde el modulo de Correo Electronico.</div>
        </div>

        <div class="faq-item">
            <div class="faq-question"><span class="q-marker">Q</span>Se envia mas de un correo si la orden usa varios programas con notificacion activa?</div>
            <div class="faq-answer"><strong>Si.</strong> El sistema recorre todos los programas detectados en las lineas de la orden. Si multiples programas tienen la notificacion activa, se envia un correo independiente para cada programa con sus respectivos destinatarios. La orden se marca como notificada despues de procesar todos los envios.</div>
        </div>

        <div class="faq-item">
            <div class="faq-question"><span class="q-marker">Q</span>Que pasa si la notificacion falla?</div>
            <div class="faq-answer">Si el envio falla por cualquier motivo (correo invalido, error del servidor, etc.), el sistema registra el error en la <strong>bitacora interna</strong> sin interrumpir el proceso de la orden. La venta se completa normalmente aunque la notificacion haya fallado. El administrador puede revisar los registros para identificar y corregir los problemas.</div>
        </div>

        <div class="faq-item">
            <div class="faq-question"><span class="q-marker">Q</span>Es obligatorio usar los tres modulos juntos?</div>
            <div class="faq-answer"><strong>No.</strong> Los tres modulos funcionan de forma independiente:<br>- <strong>Boton de Cortesia</strong> requiere la funcionalidad de Restaurante en el Punto de Venta.<br>- <strong>Clasificacion de Lealtad</strong> requiere el modulo de Lealtad del Punto de Venta.<br>- <strong>Notificaciones por Correo</strong> requiere el modulo de Lealtad y la funcionalidad de Correo Electronico.<br>Puede instalar solo los modulos que necesite segun sus requerimientos.</div>
        </div>

        <div class="faq-item">
            <div class="faq-question"><span class="q-marker">Q</span>Donde puedo ver el historial completo de cortesias?</div>
            <div class="faq-answer">Existen dos formas:<br><strong>1)</strong> Desde el menu Punto de Venta &gt; Cortesias &gt; Registro de Cortesias, donde se muestra el listado completo con filtros por fecha, producto, usuario, terminal y sesion.<br><strong>2)</strong> Desde cualquier orden de venta, haciendo clic en el indicador con icono de regalo que muestra el numero de cortesias de esa orden especifica.<br>Adicionalmente, las vistas de tabla pivote y grafico de barras permiten analisis consolidados por producto y periodo.</div>
        </div>

        <div class="faq-item">
            <div class="faq-question"><span class="q-marker">Q</span>Que informacion contiene el correo de notificacion por defecto?</div>
            <div class="faq-answer">El correo incluye: <strong>numero de la orden</strong>, <strong>fecha y hora</strong> de la transaccion, <strong>nombre del punto de venta</strong>, <strong>nombre del cajero o empleado</strong>, <strong>nombre del cliente</strong> (si fue registrado), <strong>programa de lealtad utilizado</strong> y el <strong>total cobrado</strong> con simbolo de moneda. El formato es HTML profesional con encabezado de alerta y tabla de detalles.</div>
        </div>
    </div>

</div>

<!-- FOOTER -->
<div class="footer">
    <div class="company-name">COONDEV</div>
    <div class="tagline">Coonsulting &amp; Development</div>
    <div class="footer-divider"></div>
    <p>Guia Funcional - Reportes de Venta Restaurantes / Programas de Lealtad y Descuentos</p>
    <p>Ecosistema: <strong>Boton de Cortesia + Clasificacion de Lealtad + Notificaciones por Correo</strong> | Odoo 18</p>
    <p style="margin-top: 15px; font-size: 12px; opacity: 0.7;">Documento generado &bull; Febrero 2026</p>
</div>

</body>
</html>
